<!DOCTYPE html> <html> <head lang="en"> <meta charset="UTF-8"> <title>RegExr: Learn, Build, &amp; Test RegEx</title> 
<script id="regexWorker" type="javascript/worker"> onmessage=function(e){postMessage("onload");var t,s,n,a=e.data,i=a.text,d=a.tests,l=a.mode,r=new RegExp(a.pattern,a.flags),o=[];if("tests"===l)for(var g=0,x=d.length;g<x;g++){let e=d[g];i=e.text,r.lastIndex=0,t=r.exec(i),o[g]=t?{i:t.index,l:t[0].length,id:e.id}:{id:e.id}}else for(;t=r.exec(i);){s===r.lastIndex&&(n={id:"infinite",warning:!0},++r.lastIndex),s=r.lastIndex;var f=t.reduce(function(e,t,s){return(0===s||e.push({s:t}))&&e},[]);if(o.push({i:t.index,l:t[0].length,groups:f}),!r.global)break}postMessage({error:n,matches:o,mode:l})}; </script> 

<style type="text/css">
	@charset "UTF-8";.CodeMirror{font-family:monospace;height:300px;color:#000}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@-moz-keyframes blink{50%{background-color:transparent}}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-type,.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta{color:#555}.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-s-default .cm-error{color:red}.cm-invalidchar{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0f0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#f22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:0;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:0 0!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:0 0;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;overflow:auto}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:0}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background:#ffa;background:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:''}span.CodeMirror-selectedtext{background:0 0}.doc>section.text .tests .list li header,.doc>section>header,.sidebar>.min>.list>li:first-child{display:flex;align-items:center;padding:0 1rem 0 1rem;flex:0 2.5rem}.doc>section.text .tests .list li header h1,.doc>section>header h1,.sidebar>.min>.list>li:first-child h1{flex:1}#cheatsheet table th,.community>header .icon,.container .header .settings,.doc>section.text .tests .list li header .icon.delete,.doc>section.tools>article .icon.help,.example svg.icon.load,.sidebar>.full .list .row,.sidebar>.full .list li,.sidebar>.full>header .icon,.sidebar>.min .list .row,.sidebar>.min .list li,.tooltip .list li,.tooltip header .help.icon,a{transition:color .2s;color:#d7dadc}#cheatsheet table th:not(.inactive),.community>header .icon:not(.inactive),.container .header .settings:not(.inactive),.doc>section.text .tests .list li header .icon.delete:not(.inactive),.doc>section.tools>article .icon.help:not(.inactive),.example svg.icon.load:not(.inactive),.sidebar>.full .list .row:not(.inactive),.sidebar>.full .list li:not(.inactive),.sidebar>.full>header .icon:not(.inactive),.sidebar>.min .list .row:not(.inactive),.sidebar>.min .list li:not(.inactive),.tooltip .list li:not(.inactive),.tooltip header .help.icon:not(.inactive),a:not(.inactive){cursor:pointer}#cheatsheet table th:not(.inactive):hover,.community>header .icon:not(.inactive):hover,.container .header .settings:not(.inactive):hover,.doc>section.text .tests .list li header .icon.delete:not(.inactive):hover,.doc>section.tools>article .icon.help:not(.inactive):hover,.example svg.icon.load:not(.inactive):hover,.sidebar>.full .list .row:not(.inactive):hover,.sidebar>.full .list li:not(.inactive):hover,.sidebar>.full>header .icon:not(.inactive):hover,.sidebar>.min .list .row:not(.inactive):hover,.sidebar>.min .list li:not(.inactive):hover,.tooltip .list li:not(.inactive):hover,.tooltip header .help.icon:not(.inactive):hover,a:not(.inactive):hover{color:#e7e9ea}#cheatsheet table th:not(.inactive):hover svg.icon,.community>header .icon:not(.inactive):hover svg.icon,.container .header .settings:not(.inactive):hover svg.icon,.doc>section.text .tests .list li header .icon.delete:not(.inactive):hover svg.icon,.doc>section.tools>article .icon.help:not(.inactive):hover svg.icon,.example svg.icon.load:not(.inactive):hover svg.icon,.sidebar>.full .list .row:not(.inactive):hover svg.icon,.sidebar>.full .list li:not(.inactive):hover svg.icon,.sidebar>.full>header .icon:not(.inactive):hover svg.icon,.sidebar>.min .list .row:not(.inactive):hover svg.icon,.sidebar>.min .list li:not(.inactive):hover svg.icon,.tooltip .list li:not(.inactive):hover svg.icon,.tooltip header .help.icon:not(.inactive):hover svg.icon,a:not(.inactive):hover svg.icon{color:currentColor}#cheatsheet table th svg.icon,.community>header .icon svg.icon,.container .header .settings svg.icon,.doc>section.text .tests .list li header .icon.delete svg.icon,.doc>section.tools>article .icon.help svg.icon,.example svg.icon.load svg.icon,.sidebar>.full .list .row svg.icon,.sidebar>.full .list li svg.icon,.sidebar>.full>header .icon svg.icon,.sidebar>.min .list .row svg.icon,.sidebar>.min .list li svg.icon,.tooltip .list li svg.icon,.tooltip header .help.icon svg.icon,a svg.icon{transition:fill .2s}#tooltip .texthover i,.example code i{background:#595f64;color:#f0f1f2;font-weight:400;padding:0 .25em;margin-left:.25em}.doc>section.tools>article .details span.hover,.doc>section.tools>article .details table tr.group:hover,.doc>section.tools>article .explain div.selected{outline:solid 2px rgba(16,17,18,.3);z-index:10}.doc>section.tools>article .explain div.related{outline:solid 1px rgba(16,17,18,.3);z-index:9}body,html{margin:0;width:100%;height:100%;min-height:540px;min-width:500px;font-family:"Roboto Condensed",sans-serif;font-size:16px;color:#f0f1f2;-webkit-user-select:none;user-select:none;cursor:default}body>.container,html>.container{height:100%;display:flex;flex-flow:column}body>.container>.app,html>.container>.app{flex:1;min-height:0;display:flex;align-items:stretch}::-webkit-scrollbar{width:.5em;height:.5em}::-webkit-scrollbar-track{background:rgba(126,135,142,.25)}::-webkit-scrollbar-thumb{background-color:#7e878e;border-radius:.5em}.app .sidebar,.container .header,.tooltip{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}code,pre{font-family:"Source Code Pro",monospace}pre{margin:0}a{color:#70b0e0;text-decoration:none}h1,h2{font-size:1rem;font-weight:700;margin:0}.list{display:flex;flex-direction:column;margin:0;padding:0}.list li{display:block}hr{border:0;border-top:1px solid rgba(126,135,142,.25);margin:.75em 0 1em 0}span.match{background:rgba(112,176,224,.5);color:#101112}span.error{color:#d22;font-weight:700}span.error.warning{color:#d22}.anim-spin{animation:1s linear infinite spin}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}#tooltip-signin ul.list li,.button,.buttonbar>*,.container .header ul.file li,.control,.segcontrol>*,input,textarea{padding:.375rem .75rem;font-size:.875rem;border-radius:.125rem}input,textarea{border-radius:0;background:rgba(240,241,242,.05);border:none;border-bottom:solid 1px rgba(240,241,242,.05);font-family:"Roboto Condensed",sans-serif;font-size:1rem;display:block;width:100%;box-sizing:border-box;color:#f0f1f2;resize:vertical}input::placeholder,textarea::placeholder{color:currentColor;opacity:.4}input:focus,textarea:focus{outline:0}input:focus::placeholder,textarea:focus::placeholder{opacity:.2}.status{display:inline-block;color:rgba(240,241,242,.5)}.status .icon.success{color:#70b0e0}.status .icon.alert{color:#d22}svg.icon{width:1.125em;height:1.125em;display:inline-block;fill:currentColor;vertical-align:middle}svg.icon.small{width:.75em;height:.75em}svg.icon.inline{margin-top:-.25em}.control{background:rgba(240,241,242,.2)}#tooltip-signin ul.list li,.button,.buttonbar>*,.container .header ul.file li,.segcontrol>*{background:rgba(240,241,242,.35);display:inline-block;cursor:pointer;transition:background-color .2s ease-out;transition:opacity .2s ease-out;box-shadow:0 2px 1px rgba(0,0,0,.1);line-height:normal}#tooltip-signin ul.list li.default,.button.default,.buttonbar>.default,.container .header ul.file li.default,.segcontrol>.default{font-weight:700;background:#70b0e0;color:#101112}#tooltip-signin ul.list li.default:hover,.button.default:hover,.buttonbar>.default:hover,.container .header ul.file li.default:hover,.segcontrol>.default:hover{background:#f0f1f2}#tooltip-signin ul.list li.selected,#tooltip-signin ul.list li:hover,.button.selected,.button:hover,.buttonbar>.selected,.buttonbar>:hover,.container .header ul.file li.selected,.container .header ul.file li:hover,.segcontrol>.selected,.segcontrol>:hover{background:rgba(240,241,242,.75)}#tooltip-signin ul.list li.selected>svg.icon.dropdown,#tooltip-signin ul.list li:hover>svg.icon.dropdown,.button.selected>svg.icon.dropdown,.button:hover>svg.icon.dropdown,.buttonbar>.selected>svg.icon.dropdown,.buttonbar>:hover>svg.icon.dropdown,.container .header ul.file li.selected>svg.icon.dropdown,.container .header ul.file li:hover>svg.icon.dropdown,.segcontrol>.selected>svg.icon.dropdown,.segcontrol>:hover>svg.icon.dropdown{margin-top:.5em}#tooltip-signin ul.list li.disabled,.button.disabled,.buttonbar>.disabled,.container .header ul.file li.disabled,.segcontrol>.disabled{opacity:.35;cursor:default;pointer-events:none}#tooltip-signin ul.list li>svg.icon,.button>svg.icon,.buttonbar>*>svg.icon,.container .header ul.file li>svg.icon,.segcontrol>*>svg.icon{margin-top:-.125em}#tooltip-signin ul.list li>svg.icon+*,.button>svg.icon+*,.buttonbar>*>svg.icon+*,.container .header ul.file li>svg.icon+*,.segcontrol>*>svg.icon+*{margin-left:.25em}#tooltip-signin ul.list li>svg.icon.dropdown,.button>svg.icon.dropdown,.buttonbar>*>svg.icon.dropdown,.container .header ul.file li>svg.icon.dropdown,.segcontrol>*>svg.icon.dropdown{transition:margin-top .2s;margin-top:.125em;width:.375em;height:.375em}.buttonbar,.controlbar,.segcontrol{display:flex;padding:0;margin:0}.buttonbar>*,.controlbar>*,.segcontrol>*{margin-left:.25rem}.buttonbar>*,.segcontrol>*{margin-left:1px;border-radius:0;display:inline-block}.buttonbar>:first-child,.segcontrol>:first-child{border-radius:.125rem 0 0 .125rem}.buttonbar>:last-child,.segcontrol>:last-child{border-radius:0 .125rem .125rem 0}.segcontrol>:first-child{border-radius:.125rem 0 0 .125rem}.segcontrol>:last-child{border-radius:0 .125rem .125rem 0}.tooltip{display:flex;flex-flow:column;align-items:center;z-index:10000;position:absolute;transform:translate(-50%,0);transition-property:opacity,margin-top;transition-duration:.2s}.tooltip>.content{background:rgba(16,17,18,.85);color:#f0f1f2;padding:1rem;border-radius:.125rem;max-width:15rem;box-shadow:0 3px 4px rgba(0,0,0,.25);overflow-wrap:break-word;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.tooltip>.content code{font-weight:700}.tooltip>.content>.warningtext{display:block;color:#b7bcc0;margin-top:.5rem}.tooltip header{display:flex}.tooltip header h1{flex:1}.tooltip header .help.icon{margin-left:1em;color:#7e878e}.tooltip>.tip{fill:rgba(16,17,18,.85);width:8px;height:8px;transform:scale(1,-1)}.tooltip.flipped{transform:translate(-50%,-100%)}.tooltip.flipped .tip{transform:scale(1,1);order:1}.tooltip .list li{color:#b7bcc0}.tooltip .list li+li{margin-top:.5em}.tooltip .list li .check.icon{color:#585e63;margin-right:.25em}.tooltip .list li.selected .check.icon{color:#70b0e0}.tooltip .list li:not(.inactive):hover{color:#e7e9ea}.tooltip .list li em{font-style:normal;font-weight:700;color:#f0f1f2;padding:0 .15em;background:rgba(126,135,142,.3);border-radius:.125rem}.example svg.icon.load{color:#595f64;float:right;display:inline-block;padding-left:.5rem}.example code{display:inline-block;word-break:break-all;width:100%}.container .header{display:flex;align-items:center;justify-content:space-between;background:#101112;padding:0 1rem;height:54px;z-index:1000}.container .header .logo{flex:none;font-size:1.125rem;margin-top:.0625rem;color:#70b0e0;width:1.5em;height:1.5em}.container .header .settings{color:#70b0e0;display:flex;min-width:0;max-width:20em}.container .header .settings .name{margin:0 .25rem 0 .5rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.container .header .settings .icon.share{flex:none;color:#595f64;width:1em;margin-right:.5rem}.container .header .signin.selected a{color:#f0f1f2!important}.container .header ul{padding:0;white-space:nowrap}.container .header ul li{display:inline-block}.container .header ul li:first-child{margin-left:0}.container .header ul.file{text-align:right}.container .header ul.file li{color:#b7bcc0;background:#282b2d}.container .header ul.file li:hover{background:#3a3e41}.container .header ul.file li.save{color:#70b0e0;font-weight:700}.container .header ul.file li.save .savekey{font-size:.875em;font-weight:400;color:#7e878e}#tooltip-signin ul.list .container .header li.theme,.container .header #tooltip-signin ul.list li.theme,.container .header .button.theme,.container .header ul.file li.theme{padding:.3755rem;background:#282b2d}#tooltip-signin ul.list .container .header li.theme.selected .icon,.container .header #tooltip-signin ul.list li.theme.selected .icon,.container .header .button.theme.selected .icon,.container .header ul.file li.theme.selected .icon{color:#70b0e0}#tooltip-signin ul.list .container .header li.theme:hover,.container .header #tooltip-signin ul.list li.theme:hover,.container .header .button.theme:hover,.container .header ul.file li.theme:hover{background:#3a3e41}.container .header ul.etc{flex:1;text-align:right;font-size:.875rem;color:#595f64}.container .header ul.etc li{margin-left:1rem}#tooltip-signin ul.list li{margin:.25rem 0;padding:.625rem;color:#e7e9ea;opacity:.85}#tooltip-signin ul.list li:hover{opacity:1}#tooltip-signin ul.list li[data-id=GitHub]{background:#777!important}#tooltip-signin ul.list li[data-id=Facebook]{background:#4267b2!important}#tooltip-signin ul.list li[data-id=Google]{background:#c94130!important}#tooltip-signin ul.list li>svg.icon{margin-right:.625rem}#tooltip-signin .signout{display:none}#tooltip-signin .signout .signoutbtn{cursor:pointer;color:#70b0e0;font-weight:700}#tooltip-signin .signout .signoutbtn:hover{color:#f0f1f2}#tooltip-signin.authenticated .signin{display:none}#tooltip-signin.authenticated .signout{display:block}#tooltip-signin .distract{display:none;color:#7e878e}#tooltip-signin .distract .distractor{margin-right:.5rem}#tooltip-signin.wait .distract{display:block}#tooltip-signin.wait .signin .list,#tooltip-signin.wait .signout .signoutbtn{display:none}.doc{flex:8 800px;display:flex;flex-flow:column}.doc>section{background:#f0f1f2;color:#585e63;flex:1 1 0%;min-height:0;transition:flex .2s ease-out;display:flex;flex-direction:column}.doc>section>header{color:#26292b;background:#b7bcc0}.doc>section>header>.max{transition:transform .2s;color:#7e878e;margin-left:1rem;cursor:pointer}.doc>section>header>.max:hover{color:#f0f1f2}.doc>section>article{flex:1;min-height:0}.doc>section.closed{flex:0 2.5rem}.doc>section.closed>header{cursor:pointer}.doc>section.closed>header>:not(h1){opacity:.4}.doc>section.closed>header>.max{transform:rotate(45deg)}.doc.tests-mode section.tools{display:none}.doc input,.doc textarea{background:rgba(240,241,242,.05);border-color:rgba(240,241,242,.05)}.doc .control{background:rgba(240,241,242,.2)}#tooltip-signin ul.list .doc li,.container .header ul.file .doc li,.doc #tooltip-signin ul.list li,.doc .button,.doc .buttonbar>*,.doc .container .header ul.file li,.doc .segcontrol>*{background:rgba(240,241,242,.35)}#tooltip-signin ul.list .doc li.selected,#tooltip-signin ul.list .doc li:hover,.container .header ul.file .doc li.selected,.container .header ul.file .doc li:hover,.doc #tooltip-signin ul.list li.selected,.doc #tooltip-signin ul.list li:hover,.doc .button.selected,.doc .button:hover,.doc .buttonbar>.selected,.doc .buttonbar>:hover,.doc .container .header ul.file li.selected,.doc .container .header ul.file li:hover,.doc .segcontrol>.selected,.doc .segcontrol>:hover{background:rgba(240,241,242,.75)}#tooltip-signin ul.list .doc li.default:hover,.container .header ul.file .doc li.default:hover,.doc #tooltip-signin ul.list li.default:hover,.doc .button.default:hover,.doc .buttonbar>.default:hover,.doc .container .header ul.file li.default:hover,.doc .segcontrol>.default:hover{background:#f0f1f2}.doc>section.expression{flex:0 6.25rem}.doc>section.expression>header{background:#70b0e0}.doc>section.expression>.editor{position:relative}.doc>section.expression>.editor .icon.alert{display:none;position:relative;float:right;margin:1.25rem;color:#d22;z-index:10;-webkit-user-select:none;user-select:none}.doc>section.expression>.editor>.CodeMirror{padding:1rem 0 0 1rem;font-weight:700}.doc>section.expression>.editor.error>.icon.alert{display:block}#tooltip-flags>.list li,#tooltip-flavor>.list li{cursor:pointer;color:#b7bcc0}#tooltip-flags>.list li:hover,#tooltip-flavor>.list li:hover{color:#f0f1f2}#tooltip-flags>.list li+li,#tooltip-flavor>.list li+li{margin-top:.5em}#tooltip-flags>.list li .check.icon,#tooltip-flavor>.list li .check.icon{color:#585e63;margin-right:.25em}#tooltip-flags>.list li.selected .check.icon,#tooltip-flavor>.list li.selected .check.icon{color:#70b0e0}#tooltip-flags>.list li em,#tooltip-flavor>.list li em{font-style:normal;font-weight:700;color:#f0f1f2;padding:0 .15em;background:rgba(126,135,142,.3);border-radius:.125rem}.exp-related{border-bottom:solid 1px rgba(16,17,18,.3);border-top:solid 1px rgba(16,17,18,.3);margin-bottom:-1px;margin-top:-1px}.exp-related-left{border-left:solid 1px rgba(16,17,18,.3);margin-left:-1px}.exp-related-right{border-right:solid 1px rgba(16,17,18,.3);margin-right:-1px}.exp-selected{border-top:solid 2px rgba(16,17,18,.3);border-bottom:solid 2px rgba(16,17,18,.3)}.exp-selected-left{border-left:solid 2px rgba(16,17,18,.3);margin-left:-2px}.exp-selected-right{border-right:solid 2px rgba(16,17,18,.3);margin-right:-2px}.exp-error{border-bottom:solid 2px #d22}.exp-warning{border-bottom:dotted 2px #d22}.exp-char{color:#101112}.exp-decorator{color:#b7bcc0}.exp-esc{color:#c0c}.exp-lazy,.exp-possessive,.exp-quant{color:#58f}.exp-alt{color:#0a0}.exp-anchor{color:#840}.exp-group,.exp-lookaround,.exp-ref{color:#0a0}.exp-charclass,.exp-set,.exp-subst{color:#d70}.exp-group-0{background:rgba(0,238,0,.11)}.exp-group-1{background:rgba(0,238,0,.22)}.exp-group-2{background:rgba(0,238,0,.33)}.exp-group-3{background:rgba(0,238,0,.44)}.exp-group-set{background:rgba(255,238,0,.3)}.exp-comment{color:#b7bcc0;background:rgba(16,17,18,.05);font-style:italic;border-bottom:solid 3px #d7dadc}.exp-special{color:#c0c}.doc>section.text article{display:flex}.doc>section.text>header .modelist li{font-size:1rem;padding-top:.275rem;padding-bottom:.275rem}.doc>section.text>header .modelist li:last-child::after{transition:opacity 1s;font-size:.625rem;padding:.25em .5em;display:inline-block;position:absolute;color:#f0f1f2;background:#70b0e0;letter-spacing:.075em;transform:translate(.25rem,-.125rem);content:"NEW"}#tooltip-signin ul.list .doc>section.text>header li.add,.container .header ul.file .doc>section.text>header li.add,.doc>section.text>header #tooltip-signin ul.list li.add,.doc>section.text>header .button.add,.doc>section.text>header .container .header ul.file li.add{display:none!important}.doc>section.text>header .result{font-weight:700}.doc>section.text>header .result.error{background:#d22;color:#e7e9ea}.doc>section.text>header .result.error.warning{background:#d22}.doc>section.text>header .result.pass{background:#0a0;color:#e7e9ea}.doc>section.text>header .result.fail{background:#d22;color:#e7e9ea}.doc>section.text>header .result em{font-style:normal;font-weight:400;opacity:.75}.doc>section.text.tests-viewed>header .modelist li:last-child::after{opacity:0}.doc>section.text .editor{position:relative;box-sizing:border-box;display:flex;height:100%;width:100%;padding:1rem 0 1rem 1rem}.doc>section.text .editor>.pad{box-sizing:border-box;position:relative;overflow:hidden;width:100%;flex:1}.doc>section.text .editor>.pad>.CodeMirror{color:#101112}.doc>section.text .editor>.pad>iframe.resizedetector{opacity:0;z-index:-1000;border:none;width:100%;height:100%;position:absolute}.doc>section.text .editor>.pad>canvas.highlights{transition:opacity .2s;position:absolute}.doc>section.text .tests{display:none;width:100%;background:#d7dadc;padding:1rem;box-sizing:border-box;overflow:auto}.doc>section.text .tests .default{transition:opacity 1s;padding:1rem .5rem;color:#585e63}.doc>section.text .tests .list:empty~.default{opacity:1}.doc>section.text .tests.tests-added .default{opacity:0}#tooltip-signin ul.list .doc>section.text .tests li.add,.container .header ul.file .doc>section.text .tests li.add,.doc>section.text .tests #tooltip-signin ul.list li.add,.doc>section.text .tests .add.button,.doc>section.text .tests .container .header ul.file li.add{box-sizing:border-box;width:100%;box-shadow:none;opacity:.5;background:rgba(183,188,192,.75);color:#101112;padding:.75rem .625rem;margin-top:.125rem;font-weight:700;border-radius:.125rem}#tooltip-signin ul.list .doc>section.text .tests li.add:hover,.container .header ul.file .doc>section.text .tests li.add:hover,.doc>section.text .tests #tooltip-signin ul.list li.add:hover,.doc>section.text .tests .add.button:hover,.doc>section.text .tests .container .header ul.file li.add:hover{opacity:1}.doc>section.text .tests .list li{background:#e7e9ea;box-shadow:0 1px 2px rgba(0,0,0,.1);transition:margin .1s linear;margin:.125rem 0;display:inline-block;width:100%}.doc>section.text .tests .list li:first-child{margin-top:0}.doc>section.text .tests .list li:hover{outline:solid 2px rgba(16,17,18,.3)}.doc>section.text .tests .list li header{padding:.5rem .75rem}.doc>section.text .tests .list li header input.name{color:#383b3f;font-weight:700;padding:0;margin:0 .5rem;background:0 0;border:none}.doc>section.text .tests .list li header .icon.delete{color:#b7bcc0}.doc>section.text .tests .list li header .icon.delete:hover{color:#d22!important}.doc>section.text .tests .list li header .icon.fail{display:none;color:#d22}.doc>section.text .tests .list li header .icon.pass{color:#0a0}.doc>section.text .tests .list li header .type{background:0 0;text-transform:uppercase;font-size:.75em;color:#b7bcc0;font-weight:700;box-shadow:none}.doc>section.text .tests .list li article{border-top:solid 1px #d7dadc;padding:.5rem 0 .5rem .75rem;display:none;height:6em;align-items:stretch}.doc>section.text .tests .list li article .bar{background:#0a0;width:0;outline:solid 1px #0a0;margin:.25rem .875rem .25rem .375rem}.doc>section.text .tests .list li article .editor{padding:0}.doc>section.text .tests .list li:not(.selected){cursor:pointer}.doc>section.text .tests .list li:not(.selected) .type .icon.dropdown{opacity:0}.doc>section.text .tests .list li:not(.selected) *{pointer-events:none}.doc>section.text .tests .list li.selected{outline:solid 2px rgba(16,17,18,.3);background:#f0f1f2;box-shadow:0 2px 3px rgba(0,0,0,.25);margin:.75rem 0}.doc>section.text .tests .list li.selected:first-child{margin-top:0}.doc>section.text .tests .list li.selected article{display:flex}.doc>section.text .tests .list li.selected .type{color:#585e63}.doc>section.text .tests .list li.selected .type:hover{color:#26292b}.doc>section.text .tests .list li.fail .icon.fail{display:block}.doc>section.text .tests .list li.fail .icon.pass{display:none}.doc>section.text .tests .list li.fail .bar{outline:solid 1px #d22}#tooltip-signin ul.list .doc.tests-mode>section.text>header li.add,.container .header ul.file .doc.tests-mode>section.text>header li.add,.doc.tests-mode>section.text>header #tooltip-signin ul.list li.add,.doc.tests-mode>section.text>header .button.add,.doc.tests-mode>section.text>header .container .header ul.file li.add{display:inline-block}.doc.tests-mode>section.text>article>.editor{display:none}.doc.tests-mode>section.text .tests{display:block}#tooltip .texthover .more{display:inline-block;color:#b7bcc0;font-style:italic;margin-top:.75rem}.doc>section.tools>article{display:flex;flex-direction:column;background:#e7e9ea}.doc>section.tools>article .icon.help{position:absolute;right:.25rem;transform:translate(0,-50%) translate(0,1.875rem);padding:1rem;color:rgba(16,17,18,.25);z-index:10}.doc>section.tools>article .icon.help:hover{color:#26292b!important}.doc>section.tools>article .inputtool{display:none;flex-direction:column;flex:1}.doc>section.tools>article .inputtool .editor{position:relative;flex:0 3.75rem;background:#f0f1f2;border-bottom:solid 1px #d7dadc}.doc>section.tools>article .inputtool .editor>.CodeMirror{padding:1rem 0 0 1rem;height:100%;font-weight:700}.doc>section.tools>article .inputtool .result{flex:1}.doc>section.tools>article .inputtool .result textarea{box-sizing:border-box;padding:1rem 0 1rem 1rem;resize:none;display:block;border:0;background:0 0;width:100%;height:100%;margin:0;font-family:"Source Code Pro",monospace;font-size:16px;color:#101112}.doc>section.tools>article .inputtool .result textarea:focus{outline:0}.doc>section.tools>article .content{flex:1 1 0%;min-height:0;overflow-y:auto;display:block;padding:1rem}.doc>section.tools>article.showinput .inputtool{display:flex}.doc>section.tools>article.showinput .content{display:none}.doc>section.tools>article .explain>.desc{color:#7e878e;display:block;padding:.5rem}.doc>section.tools>article .explain div{padding:.5em 1em .5em 2.5em;margin-top:.75em;border:solid 1px rgba(183,188,192,.5);border-left:solid .25em rgba(183,188,192,.5);background:#f0f1f2;cursor:pointer}.doc>section.tools>article .explain div.applied{margin-left:1em;margin-top:0;border:none;background:rgba(183,188,192,.3)}.doc>section.tools>article .explain div.applied+div.applied{margin-top:1px;margin-left:2em}.doc>section.tools>article .explain div.error{background:#edd2d3;border-color:#d22}.doc>section.tools>article .explain div.error .error-title{font-weight:700}.doc>section.tools>article .explain div.error .warningtext{color:#7e878e;margin-left:.5rem}.doc>section.tools>article .explain code{font-weight:700}.doc>section.tools>article .explain code.token{display:inline-block;min-width:1.25em;margin:-1px .5em 0 -1.75em;float:left}.doc>section.tools>article .explain div.close{margin:0;padding:0;border:none;background:0 0}.doc>section.tools>article .explain .exp-group-0,.doc>section.tools>article .explain .exp-group-1,.doc>section.tools>article .explain .exp-group-2,.doc>section.tools>article .explain .exp-group-3{border-color:rgba(0,170,0,.25)}.doc>section.tools>article .explain .exp-group-0{background:#ddf1df}.doc>section.tools>article .explain .exp-group-1{background:#d1f1d3}.doc>section.tools>article .explain .exp-group-2{background:#c5f0c6}.doc>section.tools>article .explain .exp-group-3{background:#b9f0ba}.doc>section.tools>article .explain .exp-group-4{background:#383b3f;color:#f0f1f2;padding:1rem}.doc>section.tools>article .explain .exp-group-set{background:#f4f0b6;border-color:rgba(221,119,0,.25)}.doc>section.tools>article .details>div.desc{padding:.5rem;color:#7e878e;margin-bottom:.5em}.doc>section.tools>article .details>div.desc code{color:#585e63;font-weight:700}.doc>section.tools>article .details table{font-family:"Source Code Pro",monospace;width:100%;border-spacing:0;border:0}.doc>section.tools>article .details table tr:nth-child(odd) td{background:#e1e3e4}.doc>section.tools>article .details table tr.match td{background:#d7dadc;border-bottom:1px dotted #b7bcc0}.doc>section.tools>article .details table td{padding:.5rem 1rem;vertical-align:top}.doc>section.tools>article .details table td:first-child{font-weight:700;white-space:nowrap;padding-right:0}.doc>section.tools>article .details table td:nth-child(2){color:#7e878e;white-space:nowrap;border-right:1px dotted #b7bcc0}.doc>section.tools>article .details table td:nth-child(3){white-space:pre-wrap;width:100%;color:#101112;-webkit-user-select:text;user-select:text;-webkit-user-select:contain;user-select:contain}.doc>section.tools>article .details table td:nth-child(3) em{color:#7e878e}.doc>section.tools>article .details .group-1{background:rgba(255,255,0,.5)}.doc>section.tools>article .details .group-2{background:rgba(0,255,0,.5)}.doc>section.tools>article .details .group-3{background:rgba(102,128,255,.5)}.doc>section.tools>article .details .group-4{background:rgba(187,51,255,.5)}.doc>section.tools>article .details .group-5{background:rgba(255,51,85,.5)}.doc>section.tools>article .details .group-0{background:rgba(255,128,0,.5)}.doc>section.tools>article .details .group-0,.doc>section.tools>article .details .group-1,.doc>section.tools>article .details .group-2,.doc>section.tools>article .details .group-3,.doc>section.tools>article .details .group-4,.doc>section.tools>article .details .group-5{outline:.5px solid rgba(16,17,18,.25)}.sidebar>.full .list .row.active:hover,.sidebar>.full .list li.active:hover,.sidebar>.min .list .row.active:hover,.sidebar>.min .list li.active:hover{color:#f0f1f2}.sidebar>.full .list .row.active>.icon.check,.sidebar>.full .list .row.active>.icon:first-child,.sidebar>.full .list li.active>.icon.check,.sidebar>.full .list li.active>.icon:first-child,.sidebar>.min .list .row.active>.icon.check,.sidebar>.min .list .row.active>.icon:first-child,.sidebar>.min .list li.active>.icon.check,.sidebar>.min .list li.active>.icon:first-child{color:#70b0e0}.sidebar{flex:1 0 350px;width:350px;transition:flex .2s ease-out;background:#282b2d;display:flex;flex-direction:column;color:#b7bcc0;border-right:1px solid #3a3e41;box-shadow:1px 2px 8px rgba(0,0,0,.45);z-index:100}.sidebar>.blocker{display:none}.sidebar .list>li,.sidebar .row{display:flex;flex:0 0 auto;padding:.5rem;align-items:center;justify-content:center;border-bottom:1px solid rgba(240,241,242,.06);transition:background .2s;color:#b7bcc0}.sidebar .list>li>*,.sidebar .row>*{margin:0 .5rem}.sidebar .list>li .label,.sidebar .list>li input,.sidebar .row .label,.sidebar .row input{flex:1}.sidebar .list>li .icon,.sidebar .row .icon{color:#595f64}.sidebar header.row{flex:0 0 2.5rem;padding:0}.sidebar header.row .backrow{display:flex;flex:1 0 auto;align-items:center;cursor:pointer;margin:0;padding:.5rem 0}.sidebar header.row .backrow .icon{flex:0 0 auto;margin:0 1rem}.sidebar header.row .backrow:hover{color:#f0f1f2}.sidebar header.row .backrow:hover .icon{color:currentColor}.sidebar header.row .close.icon{padding:.75rem 1rem;margin:0}.sidebar code{color:#f0f1f2}.sidebar.closed{flex:0 50px}.sidebar>.full .list,.sidebar>.min .list{flex:1 1 0%;display:flex;align-items:stretch;overflow-y:auto;background:#3a3e41;border-bottom:2px solid #3a3e41}.sidebar>.full .list .row,.sidebar>.full .list li,.sidebar>.min .list .row,.sidebar>.min .list li{color:#b7bcc0}.sidebar>.full .list .row:hover:not(.inactive),.sidebar>.full .list li:hover:not(.inactive),.sidebar>.min .list .row:hover:not(.inactive),.sidebar>.min .list li:hover:not(.inactive){background:#4a4f53}.sidebar>.full .list .row:hover:not(.inactive) .icon,.sidebar>.full .list .row:hover:not(.inactive) .rating,.sidebar>.full .list .row:hover:not(.inactive) .token,.sidebar>.full .list li:hover:not(.inactive) .icon,.sidebar>.full .list li:hover:not(.inactive) .rating,.sidebar>.full .list li:hover:not(.inactive) .token,.sidebar>.min .list .row:hover:not(.inactive) .icon,.sidebar>.min .list .row:hover:not(.inactive) .rating,.sidebar>.min .list .row:hover:not(.inactive) .token,.sidebar>.min .list li:hover:not(.inactive) .icon,.sidebar>.min .list li:hover:not(.inactive) .rating,.sidebar>.min .list li:hover:not(.inactive) .token{color:currentColor}.sidebar>.full .list .row.selected,.sidebar>.full .list li.selected,.sidebar>.min .list .row.selected,.sidebar>.min .list li.selected{background:#595f64;color:#d7dadc}.sidebar>.full .list .row.selected .icon,.sidebar>.full .list .row.selected .rating,.sidebar>.full .list .row.selected .token,.sidebar>.full .list li.selected .icon,.sidebar>.full .list li.selected .rating,.sidebar>.full .list li.selected .token,.sidebar>.min .list .row.selected .icon,.sidebar>.min .list .row.selected .rating,.sidebar>.min .list .row.selected .token,.sidebar>.min .list li.selected .icon,.sidebar>.min .list li.selected .rating,.sidebar>.min .list li.selected .token{color:currentColor}.sidebar>.full .list .row.selected:hover,.sidebar>.full .list li.selected:hover,.sidebar>.min .list .row.selected:hover,.sidebar>.min .list li.selected:hover{background:#595f64;color:#f0f1f2}.sidebar>.full .list .row.disabled,.sidebar>.full .list li.disabled,.sidebar>.min .list .row.disabled,.sidebar>.min .list li.disabled{pointer-events:none;opacity:.35}.sidebar>.full .list .row.link:not(.disabled),.sidebar>.full .list li.link:not(.disabled),.sidebar>.min .list .row.link:not(.disabled),.sidebar>.min .list li.link:not(.disabled){overflow:hidden}.sidebar>.full .list .row.link:not(.disabled) .url,.sidebar>.full .list li.link:not(.disabled) .url,.sidebar>.min .list .row.link:not(.disabled) .url,.sidebar>.min .list li.link:not(.disabled) .url{color:#70b0e0;margin:0}.sidebar>.full .list .row.link:not(.disabled):hover,.sidebar>.full .list li.link:not(.disabled):hover,.sidebar>.min .list .row.link:not(.disabled):hover,.sidebar>.min .list li.link:not(.disabled):hover{color:#f0f1f2}.sidebar>.full .list .row.link:not(.disabled):hover .url,.sidebar>.full .list li.link:not(.disabled):hover .url,.sidebar>.min .list .row.link:not(.disabled):hover .url,.sidebar>.min .list li.link:not(.disabled):hover .url{color:#f0f1f2}.sidebar>.full .list .row.link:not(.disabled) .icon.copy,.sidebar>.full .list li.link:not(.disabled) .icon.copy,.sidebar>.min .list .row.link:not(.disabled) .icon.copy,.sidebar>.min .list li.link:not(.disabled) .icon.copy{padding:1rem;margin:-1rem -.5rem;color:#595f64}.sidebar>.full .list .row.link:not(.disabled) .icon.copy:hover,.sidebar>.full .list li.link:not(.disabled) .icon.copy:hover,.sidebar>.min .list .row.link:not(.disabled) .icon.copy:hover,.sidebar>.min .list li.link:not(.disabled) .icon.copy:hover{color:#f0f1f2}.sidebar>.full .list .row.loading,.sidebar>.full .list li.loading,.sidebar>.min .list .row.loading,.sidebar>.min .list li.loading{padding:1rem;display:block;border:none;color:#7e878e;pointer-events:none}.sidebar>.full .list .row .token,.sidebar>.full .list li .token,.sidebar>.min .list .row .token,.sidebar>.min .list li .token{color:#7e878e;font-family:"Source Code Pro",monospace;font-weight:700}.sidebar>.full .list .row .rating,.sidebar>.full .list li .rating,.sidebar>.min .list .row .rating,.sidebar>.min .list li .rating{display:flex;align-items:center;color:#7e878e;font-size:.875em}.sidebar>.full .list .row .rating .favorites.icon,.sidebar>.full .list li .rating .favorites.icon,.sidebar>.min .list .row .rating .favorites.icon,.sidebar>.min .list li .rating .favorites.icon{color:#70b0e0;padding:0 .25rem}.sidebar>.min{display:none;background:#3a3e41}.sidebar>.min>.list>li:first-child{background:#282b2d;padding:0}.sidebar>.full{display:flex;flex-direction:column;flex:1;min-height:0}.sidebar>.full.no-search>.search{display:none}.sidebar>.full.no-list>.list{display:none}.sidebar>.full>header h1{color:#f0f1f2}.sidebar>.full>header .icon{color:#595f64}.sidebar>.full>.search{padding:0 .5rem}.sidebar>.full>.search input{background:0 0;padding:0}.sidebar>.full>.search input:focus{border-bottom:1px dotted #3a3e41;margin-bottom:-1px}.sidebar>.full>.search svg.icon{width:1em;height:1em;margin-right:.375em}.sidebar>.full>.search svg.icon.search:hover{color:#f0f1f2;cursor:pointer}.sidebar>.full>.search svg.icon.distractor{display:none}.sidebar>.full>.search.wait svg.icon.search{display:none}.sidebar>.full>.search.wait svg.icon.distractor{display:block}.sidebar>.full>.content{flex:1 1 0%;overflow-y:auto;overflow-x:hidden;padding:1rem;-webkit-user-select:text;user-select:text;overflow-wrap:break-word;border-top:2px solid #282b2d;line-height:1.4em}.sidebar>.full>.content h1{margin-top:1.5em;color:#f0f1f2}.sidebar>.full>.content code em{font-style:normal;background:rgba(112,176,224,.5);color:#f0f1f2;margin-right:1px}.sidebar>.full>.content b{color:#d7dadc}.sidebar>.full>.content ul{padding-left:1.5em;margin-bottom:0}.sidebar>.full>.hello{flex:0 0 0;padding:0;border:.25rem solid #101112;background:#101112}.sidebar>.full>.hello .noad{padding:.75rem;color:#7e878e}.sidebar>.full>.hello .noad b{color:#b7bcc0}#cheatsheet table{width:100%}#cheatsheet table th{text-align:left;background:#3a3e41;padding:.25rem .5rem;color:#70b0e0}#cheatsheet table tr+tr>th{border-top:.5rem solid #282b2d}#cheatsheet table td{padding:0}#cheatsheet table td:first-child{font-family:"Source Code Pro",monospace}#cheatsheet table a{color:#f0f1f2}#cheatsheet table a+a{margin-left:.375em}.community>header{background:#101112;padding:1rem;margin:-1rem;margin-bottom:.5rem;display:flex;justify-content:space-between}.community>header .icon{color:#595f64}.community>header .icon.selected:not(:hover){color:#70b0e0}.community>header>.name{color:#f0f1f2;font-weight:700;overflow:hidden;display:block;white-space:nowrap;text-overflow:ellipsis}.community>header>div{display:flex}.community>header>div .favorites{margin:0 1rem}.community .row.rate .icon.thumbdown,.community .row.rate .icon.thumbup{cursor:pointer}.community .row.rate .icon.thumbdown.selected:hover,.community .row.rate .icon.thumbdown:hover,.community .row.rate .icon.thumbup.selected:hover,.community .row.rate .icon.thumbup:hover{color:#f0f1f2}.community .row.rate .icon.thumbdown.selected,.community .row.rate .icon.thumbup.selected{color:#70b0e0}.community .row.rate .icon.thumbdown{transform:translate(0,.125em) scale(1,-1)}.community>.author{margin-top:.125em;color:#7e878e}.community .actions.list{background:0;margin:-.5rem -1rem 0 -1rem}.community>.desc{margin-top:1rem}#share_community,#share_main{margin:-1rem}#share_community .list,#share_main .list{background:0 0;border:none}#share_community .inputs input,#share_community .inputs textarea,#share_main .inputs input,#share_main .inputs textarea{color:#f0f1f2;margin:2px 0}#share_community #tooltip-signin ul.list li,#share_community .button,#share_community .container .header ul.file li,#share_main #tooltip-signin ul.list li,#share_main .button,#share_main .container .header ul.file li,#tooltip-signin ul.list #share_community li,#tooltip-signin ul.list #share_main li,.container .header ul.file #share_community li,.container .header ul.file #share_main li{padding-left:2rem;padding-right:2rem}#share_community .buttons.wait #tooltip-signin ul.list li,#share_community .buttons.wait .button,#share_community .buttons.wait .container .header ul.file li,#share_main .buttons.wait #tooltip-signin ul.list li,#share_main .buttons.wait .button,#share_main .buttons.wait .container .header ul.file li,#tooltip-signin ul.list #share_community .buttons.wait li,#tooltip-signin ul.list #share_main .buttons.wait li,.container .header ul.file #share_community .buttons.wait li,.container .header ul.file #share_main .buttons.wait li{opacity:.35;pointer-events:none}#share_community .status,#share_main .status{margin-left:.5rem}#share_main .signin.row .signout{display:none}#share_main .signin.row.authenticated{display:none}#share_main .row:not(.active) .icon.check{display:none}#share_main .delete.row:hover{background:rgba(221,34,34,.6)}#share_main>.info{padding:1rem;margin-bottom:.5rem;border-bottom:solid 1px #3a3e41}#share_main>.info>.row{padding:0 0 .5rem 0;border:0;color:#b7bcc0;align-items:flex-start}#share_main>.info>.row svg.icon{color:currentColor;margin:0}#share_main>.save{flex-direction:column;align-items:flex-start;padding:1.25rem .5rem;margin-bottom:.5rem;background:#3a3e41;border:0;box-shadow:-3px 3px 6px rgba(0,0,0,.1)}#share_main>.save .message{color:#f0f1f2}#share_main>.save .buttons{padding:.5rem 0 0 0;border:0;color:#f0f1f2}#share_main>.save .buttons #tooltip-signin ul.list li,#share_main>.save .buttons .button,#share_main>.save .buttons .container .header ul.file li,#tooltip-signin ul.list #share_main>.save .buttons li,.container .header ul.file #share_main>.save .buttons li{margin:0 .5rem 0 0}#share_community{margin:0 .5rem}#share_community>.buttons{justify-content:flex-end;color:#f0f1f2;border:none}#share_community .buttons,#share_community .inputs{margin:1rem 0}.native-js{transition:all .25s ease-in-out;opacity:0;position:absolute;top:0}.native-js[data-state=visible]{position:static;opacity:1}.native-js[data-state=visible]+.noad{display:none}.native-img{margin-right:.75rem;max-height:40px;max-width:27%;border-radius:3px}.native-flex{display:flex;padding:.75rem;text-decoration:none;flex-flow:row nowrap;justify-content:space-between;align-items:center}.native-main{display:flex;flex-flow:row nowrap;align-items:center}.native-details{display:flex;font-size:12px;position:relative;max-height:5em;flex-flow:column}.native-company{margin-bottom:4px;text-transform:uppercase;letter-spacing:1px;font-weight:700;font-size:11px}.native-desc{letter-spacing:1px;font-weight:300;line-height:1.3em;text-overflow:ellipsis;max-height:5em;overflow:hidden;position:relative}#carbonads{display:block;overflow:hidden;background-color:#101112;font-size:13px;line-height:1.5}#carbonads a{color:inherit;text-decoration:none}#carbonads a:hover{color:inherit}#carbonads span{position:relative;display:block;overflow:hidden}.carbon-img{display:block;float:left;margin:0;line-height:1}.carbon-img img{display:block}.carbon-text{display:block;float:left;padding:8px 1em;max-width:calc(100% - 130px - 2em);text-align:left;letter-spacing:.5px}.carbon-poweredby{position:absolute;right:0;bottom:0;left:130px;display:block;padding:8px 13px;border-top:solid 1px #282b2d;text-transform:uppercase;letter-spacing:1px;font-weight:400;font-size:9px;line-height:1}@media (max-width:900px){body>.container>.header>.etc>.github{display:none}body>.container>.header>.file .savekey{display:none}body>.container>.app{display:block;position:relative;background:#e7e9ea}body>.container>.app>.doc{position:absolute;top:0;bottom:0;left:50px;right:0}body>.container>.app>.doc>.blocker{display:none;width:100%;height:100%;position:fixed;background:rgba(215,218,220,.5);z-index:10}body>.container>.app>.doc.fadeback{filter:blur(2px)}body>.container>.app>.doc.fadeback>.blocker{display:block}body>.container>.app>.sidebar{position:absolute;top:0;bottom:0;left:0;z-index:10000;transition:width .2s ease-out;width:calc(10% + 350px);box-shadow:10px 0 12px rgba(0,0,0,.45);background:#282b2d;opacity:.94}body>.container>.app>.sidebar.closed{width:50px;min-width:50px;box-shadow:1px 2px 8px rgba(0,0,0,.45);opacity:1}body>.container>.app>.sidebar.closed:before{content:none}}#export.theme{color:#70b0e0}#export.match{color:rgba(112,176,224,.5)}#export.selected-stroke{color:rgba(16,17,18,.3)}.CodeMirror{font-family:"Source Code Pro",monospace;background:0 0;position:absolute;box-sizing:border-box}.CodeMirror div.CodeMirror-cursor{pointer-events:none;border-left:1px solid #101112}.CodeMirror-selected{background:rgba(170,170,170,.55)}.CodeMirror-focused .CodeMirror-selected{background:rgba(140,150,255,.8)}.editor.multiline .CodeMirror-line:not(:last-child)>span:after{pointer-events:none;color:rgba(127,127,127,.33);content:"Â¬"}.CodeMirror-line .cm-space::before,.CodeMirror-line .cm-special::before{color:rgba(127,127,127,.33);content:"â€¢";position:absolute}.CodeMirror-line .cm-special::before{color:#d22}.CodeMirror-line .cm-tab{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REZENEEyN0Q3NTc0MTFFNzlFMTZGQ0Q1MEREODEyREEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REZENEEyN0U3NTc0MTFFNzlFMTZGQ0Q1MEREODEyREEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERkQ0QTI3Qjc1NzQxMUU3OUUxNkZDRDUwREQ4MTJEQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERkQ0QTI3Qzc1NzQxMUU3OUUxNkZDRDUwREQ4MTJEQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgWEz28AAABVSURBVHja7JVBCgAgCAQt+rf6cstjYN4iFxoQxJMjos3MCJlO4HyB26iqZLXyAswskQTUCmUSI7OruE4usxX9jCKELKK8w04e6Qqdmnfa/8SPmQIMANcZrZCVJGBIAAAAAElFTkSuQmCC);background-position:100%;background-repeat:no-repeat}
</style>
<meta name="title" content="RegExr: Learn, Build, & Test RegEx"> 
<meta name="description" content="Regular expression tester with syntax highlighting, PHP / PCRE & JS Support, contextual help, cheat sheet, reference, and searchable community patterns."> 
<meta id="viewport" name="viewport" content="width=device-width,initial-scale=1,user-scalable=0"> 
<meta name="apple-mobile-web-app-title" content="RegExr"> 
<meta name="application-name" content="RegExr"> <meta name="msapplication-TileColor" content="#70b0e0"> 
<meta name="msapplication-config" content="/assets/icons/browserconfig.xml"> 
<meta name="theme-color" content="#70b0e0"> 

</head> 
<body> 

		<div class="container"> <header class="header"> <svg class="icon logo inline"><use xlink:href="#RegExr"></use></svg> <div class="settings"> <span class="name">Untitled Pattern</span> <svg class="icon share"><use xlink:href="#share"><title>Pattern Settings</title></use></svg> </div>  <ul class="file"> <li class="save disabled"><span class="action">Save</span> <span class="savekey">(--)</span></li> <li class="new">New</li> </ul> <ul class="etc"> <li class="button theme"><svg class="icon moon inline"><use xlink:href="#moon"><title>Dark UI</title></use></svg></li> <li class="by">by <a href="http://gskinner.com">gskinner</a></li> <li class="github"><a href="http://github.com/gskinner/regexr/">GitHub</a></li> <li class="signin"><a> <svg class="icon user inline"><use xlink:href="#user"></use></svg> <span class="label">Sign In</span> </a></li> </ul> </header> <div class="app"> <aside class="sidebar"> <div class="full"> <header class="row"> <div class="backrow"> <svg class="icon back"><use xlink:href="#menu"></use></svg> <h1 class="label">Menu</h1> </div> <svg class="small icon close"><use xlink:href="#close"><title>Minimize menu</title></use></svg> </header> <header class="search row"> <input type="text" placeholder="search"> <svg class="icon distractor anim-spin"><use xlink:href="#distractor"></use></svg> <svg class="icon search"><use xlink:href="#search"></use></svg> </header> <ul class="list"></ul> <div class="content"> RegExr is an online tool to <b>learn</b>, <b>build</b>, &amp; <b>test</b> Regular Expressions (RegEx / RegExp). <hr> <ul> <li>Supports <b>JavaScript</b> &amp; <b>PHP/PCRE</b> RegEx.</li> <li>Results update in <b>real-time</b> as you type.</li> <li><b>Roll over</b> a match or expression for details.</li> <li>Validate patterns with suites of <b>Tests</b>.</li> <li><b>Save</b> &amp; share expressions with others.</li> <li>Use <b>Tools</b> to explore your results.</li> <li>Full <b>RegEx Reference</b> with help &amp; examples.</li> <li><b>Undo</b> &amp; <b>Redo</b> with {{getCtrlKey()}}-Z / Y in editors.</li> <li>Search for &amp; rate <b>Community Patterns</b>.</li> </ul> </div> <div class="hello"> <div class="native-js"> <a href="#native_link#" class="native-flex"> 
			<style> .native-js {
										background: linear-gradient(-30deg, #native_bg_color#E5, #native_bg_color#E5 45%, #native_bg_color# 45%) #fff;
									}

									.native-details {
										color: #native_color# !important;
									}

									.native-details:hover {
										color: #native_color_hover# !important;
									} </style> 
	<div class="native-main"> <img class="native-img" src="#native_logo#"> <div class="native-details"> <span class="native-company">Sponsored by #native_company#</span> <span class="native-desc">#native_desc#</span> </div> </div> </a> </div> <div class="noad"> <b>Want to support RegExr?</b> Consider disabling your ad-blocker for this domain. We'll show a non-intrusive, dev-oriented ad in this area. </div> </div> </div> <div class="min"> <ul class="list"></ul> </div> </aside> <div class="doc"> <div class="blocker"></div> <section class="expression"> <header> <h1>Expression</h1> <div class="controlbar"> <div class="button flavor"> <svg class="icon"><use xlink:href="#code"></use></svg> <span class="label">JavaScript</span> <svg class="icon dropdown"><use xlink:href="#dropdown"></use></svg> </div> <div class="button flags"> <svg class="icon"><use xlink:href="#flags"></use></svg> <span class="label">Flags</span> <svg class="icon dropdown"><use xlink:href="#dropdown"></use></svg> </div> </div> </header> <article class="editor"><svg class="icon alert"><use xlink:href="#alert"></use></svg></article> </section> <section class="text"> <header> <h1> <ul class="segcontrol modelist"></ul> </h1> <div class="button add"> <svg class="icon add"><use xlink:href="#add"></use></svg> <span class="label">Add Test</span> </div> <div class="controlbar"> <div class="control result">No match.</div> </div> </header> <article> <article class="editor multiline"><div class="pad"> <textarea>
RegExr由gskinner.com创建，并由Media Temple自豪地托管。

编辑表达式和文本以查看匹配。滚动匹配或表达式以了解细节。支持PCRE和JavaScript风味的RegEx。用测试模式验证你的表达式。

侧边栏包括一个Cheatsheet、完整的参考资料和帮助。你还可以在社区中保存和分享，并在 "我的模式 "中查看你创建或喜爱的模式。

用下面的工具探索结果。替换和列表输出自定义结果。详细说明列出了捕获组。解释 用简单的英语描述你的表达。
</textarea> </div></article> <div class="tests"> <ul class="list"></ul> <div class="add button"> <svg class="icon add"><use xlink:href="#add"></use></svg> <span class="label">Add Test</span> </div> <div class="default"> Build a suite of tests that your expression should (or should not) match. <p>Create new tests with the 'Add Test' button. Click a test to edit the name, type, & text.</p> </div> </div> </article></section> <section class="tools"> <header> <h1>Tools</h1> <ul class="segcontrol toollist"></ul> <svg class="small icon max"><use xlink:href="#close"><title>Toggle tools panel</title></use></svg> </header> <article> <svg class="icon help"><use xlink:href="#help"></use></svg> <div class="inputtool"> <div class="editor"></div> <div class="result"></div> </div> <div class="content"></div> </article> </section> </div> </div> </div> <div id="library" style="display:none;"> <div id="tooltip" class="tooltip"> <svg class="tip"><use xlink:href="#dropdown"></use></svg> <div class="content"></div> </div> <div id="tooltip-flavor"> <header> <h1>RegEx Engine</h1> <svg class="icon help"><use xlink:href="#help"></use></svg> </header> <hr> <ul class="list"></ul> </div> <div id="tooltip-flags"> <header> <h1>Expression Flags</h1> <svg class="icon help"><use xlink:href="#help"></use></svg> </header> <hr> <ul class="list"></ul> </div> <div id="tooltip-testtypes"> <ul class="list"></ul> </div> <div id="tooltip-signin"> <div class="signin"> <header> <h1>Sign In</h1> <svg class="icon help"><use xlink:href="#help"></use></svg> </header> <hr> <div class="content"> Sign in to persist favorites &amp; patterns. Click the help icon above for info. <br><br> Any unsaved changes will be lost. Saved patterns &amp; favorites will be migrated to your account. </div> <hr> <ul class="list"></ul> </div> <div class="signout"> <header> <h1>Sign Out</h1> </header> <hr> <div class="content"> You are currently signed in as <b class="username">--</b> via <b class="type">--</b>. <br><br> <span class="signoutbtn">Sign out.</span> </div> </div> <div class="distract"> <svg class="icon distractor anim-spin"><use xlink:href="#distractor"></use></svg> One moment... </div> </div> <div id="cheatsheet"> <table class="cheatsheet"> <tr><th colspan="2" data-id="charclasses">Character classes</th></tr> <tr><td>.</td><td>any character except newline</td></tr> <tr><td>\w \d \s</td><td>word, digit, whitespace</td></tr> <tr><td>\W \D \S</td><td>not word, digit, whitespace</td></tr> <tr><td>[abc]</td><td>any of a, b, or c</td></tr> <tr><td>[^abc]</td><td>not a, b, or c</td></tr> <tr><td>[a-g]</td><td>character between a & g</td></tr> <tr><th colspan="2" data-id="anchors">Anchors</th></tr> <tr><td>^abc$</td><td>start / end of the string</td></tr> <tr><td>\b \B</td><td>word, not-word boundary</td></tr> <tr><th colspan="2" data-id="escchars">Escaped characters</th></tr> <tr><td>\. \* \\</td><td>escaped special characters</td></tr> <tr><td>\t \n \r</td><td>tab, linefeed, carriage return</td></tr> <tr><th colspan="2" data-id="groups">Groups & Lookaround</th></tr> <tr><td>(abc)</td><td>capture group</td></tr> <tr><td>\1</td><td>backreference to group #1</td></tr> <tr><td>(?:abc)</td><td>non-capturing group</td></tr> <tr><td>(?=abc)</td><td>positive lookahead</td></tr> <tr><td>(?!abc)</td><td>negative lookahead</td></tr> <tr><th colspan="2" data-id="quants">Quantifiers & Alternation</th></tr> <tr><td>a* a+ a?</td><td>0 or more, 1 or more, 0 or 1</td></tr> <tr><td>a{5} a{2,}</td><td>exactly five, two or more</td></tr> <tr><td>a{1,3}</td><td>between one & three</td></tr> <tr><td>a+? a{2,}?</td><td>match as few as possible</td></tr> <tr><td>ab|cd</td><td>match ab or cd</td></tr> </table> </div> <div id="community" class="community"> <header> <div class="label name"></div> <div> <svg class="icon favorites"><use xlink:href="#favorites"><title>Favorite (add to My Patterns)</title></use></svg> <svg class="icon share"><use xlink:href="#share"><title>Load & open pattern settings</title></use></svg> </div> </header> <div class="actions list"> <div class="link row"> <svg class="icon link"><use xlink:href="#link"></use></svg> <div class="label">Load</div> <div class="url">--</div> <svg class="icon copy"><use xlink:href="#copy"><title>Copy to clipboard</title></use></svg> </div> <div class="rate inactive row"> <svg class="icon thumb"><use xlink:href="#thumb"></use></svg> <div class="label">Rate</div> <svg class="icon rate thumbdown"><use xlink:href="#thumb"><title>Rate pattern</title></use></svg> <span class="rating">--</span> <svg class="icon rate thumbup"><use xlink:href="#thumb"><title>Rate pattern</title></use></svg> </div> </div> <div class="desc"></div> <div class="author"></div> <hr> </div> <div id="share"> <div id="share_main"> <div class="signin row"> <svg class="icon user"><use xlink:href="#user"></use></svg> <div class="label signin"><a>Sign in</a> to avoid losing your patterns!</div> <div class="label signout">Signed in as <b class="username">--</b></div> </div> <div class="save row"> <div class="message">Saving will create a shareable public link.</div> <div class="buttons row"> <div class="fork button">Fork</div> <div class="save button default">Save</div> <div class="status"></div> </div> </div> <div class="info"> <div class="info row"> <svg class="icon info"><use xlink:href="#info"></use></svg> <div class="label">Optional info</div> </div> <div class="inputs"> <input class="name" type="text" placeholder="pattern name (recommended)" maxlength="30"> <input class="author" type="text" placeholder="author name" maxlength="20"> <textarea class="description" rows="4" placeholder="description" maxlength="250"></textarea> <input class="keywords" type="text" placeholder="keywords for search" maxlength="50"> </div> </div> <div class="actions list"> <div class="link row"> <svg class="icon link"><use xlink:href="#link"></use></svg> <div class="label">Shareable link</div> <div class="url"></div> <svg class="icon copy"><use xlink:href="#copy"><title>Copy to clipboard</title></use></svg> </div> <div class="private row"> <svg class="icon private"><use xlink:href="#private"></use></svg> <div class="label">Private</div> <div class="status"></div> <svg class="icon check"><use xlink:href="#check"></use></svg> </div> <div class="favorites row"> <svg class="icon favorites"><use xlink:href="#favorites"></use></svg> <div class="label">Favorite</div> <div class="status"></div> <svg class="icon check"><use xlink:href="#check"></use></svg> </div> <div class="community row"> <svg class="icon community"><use xlink:href="#community"></use></svg> <div class="label">Share with the Community</div> <svg class="icon arrow"><use xlink:href="#arrowright"></use></svg> </div> <div class="delete row"> <svg class="icon delete"><use xlink:href="#delete"></use></svg> <div class="label">Delete</div> <div class="status"></div> </div> </div> </div> <div id="share_community"> Edit or add extra information to help people find this expression. <div class="inputs"> <input class="name" type="text" placeholder="pattern name (required)" maxlength="30"> <input class="author" type="text" placeholder="author name" maxlength="20"> <textarea class="description" rows="3" placeholder="description" maxlength="250"></textarea> <input class="keywords" type="text" placeholder="keywords for search" maxlength="50"> </div> <div class="buttons"> <div class="button cancel">Cancel</div> <div class="button share default"><svg class="icon community"><use xlink:href="#community"></use></svg> Share</div> <div class="status"></div> </div> This will share a public copy of this Expression (including Text) with the Community. <b>You will not be able to edit or delete the shared copy.</b> </div> </div> <div id="tests_item"> <header> <svg class="icon fail small"><use xlink:href="#close"><title>Failed</title></use></svg> <svg class="icon pass small"><use xlink:href="#check"><title>Passed</title></use></svg> <h1><input type="text" class="name" placeholder="Untitled Test"></h1> <div class="button type"> <span class="label">Match all</span> <svg class="icon dropdown"><use xlink:href="#dropdown"></use></svg> </div> <svg class="icon delete small"><use xlink:href="#delete"><title>Delete test</title></use></svg> </header> <article> <div class="bar"></div> <div class="editor multiline"><div class="pad"></div></div> </article> </div> </div> 
<script>
	var regexr=function(){"use strict";var e;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(window,(function(){var e=navigator.userAgent,t=navigator.platform,i=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),s=/Edge\/(\d+)/.exec(e),o=r||n||s,a=o&&(r?document.documentMode||6:+(s||n)[1]),l=!s&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),h=!s&&/Chrome\//.test(e),u=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),g=!s&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),x=/win/i.test(t),w=u&&e.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(u=!1,l=!0);var _=y&&(c||u&&(null==w||w<12.11)),C=i||o&&a>=9;function k(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,E=function(e,t){var i=e.className,r=k(t).exec(i);if(r){var n=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(n?r[1]+n:"")}};function L(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return L(e).appendChild(t)}function M(e,t,i,r){var n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)n.appendChild(t[s]);return n}function R(e,t,i,r){var n=M(e,t,i,r);return n.setAttribute("role","presentation"),n}function A(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function F(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function N(e,t){var i=e.className;k(t).test(i)||(e.className+=(i?" ":"")+t)}function I(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!k(i[r]).test(t)&&(t+=" "+i[r]);return t}S=document.createRange?function(e,t,i,r){var n=document.createRange();return n.setEnd(r||e,i),n.setStart(e,t),n}:function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};var O=function(e){e.select()};function P(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function D(e,t,i){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===i&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function H(e,t,i,r,n){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var s=r||0,o=n||0;;){var a=e.indexOf("\t",s);if(a<0||a>=t)return o+(t-s);o+=a-s,o+=i-o%i,s=a+1}}g?O=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(O=function(e){try{e.select()}catch(e){}});var q=function(){this.id=null};function W(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}q.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var B={toString:function(){return"CodeMirror.Pass"}},z={scroll:!1},U={origin:"*mouse"},G={origin:"+move"};function V(e,t,i){for(var r=0,n=0;;){var s=e.indexOf("\t",r);-1==s&&(s=e.length);var o=s-r;if(s==e.length||n+o>=t)return r+Math.min(o,t-n);if(n+=s-r,r=s+1,(n+=i-n%i)>=t)return r}}var j=[""];function K(e){for(;j.length<=e;)j.push($(j)+" ");return j[e]}function $(e){return e[e.length-1]}function X(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function Y(){}function Z(e,t){var i;return Object.create?i=Object.create(e):(Y.prototype=e,i=new Y),t&&D(t,i),i}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(e){return/\w/.test(e)||e>"Â€"&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Q(e))||t.test(e):Q(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function re(e){return e.charCodeAt(0)>=768&&ie.test(e)}function ne(e,t,i){for(;(i<0?t>0:t<e.length)&&re(e.charAt(t));)t+=i;return t}function se(e,t,i){for(;;){if(Math.abs(t-i)<=1)return e(t)?t:i;var r=Math.floor((t+i)/2);e(r)?i=r:t=r}}function oe(e,t,r){var n=this;this.input=r,n.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=R("div",null,"CodeMirror-code"),n.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=M("div",null,"CodeMirror-cursors"),n.measure=M("div",null,"CodeMirror-measure"),n.lineMeasure=M("div",null,"CodeMirror-measure"),n.lineSpace=R("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var s=R("div",[n.lineSpace],"CodeMirror-lines");n.mover=M("div",[s],null,"position: relative"),n.sizer=M("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=M("div",null,null,"position: absolute; height: 30px; width: 1px;"),n.gutters=M("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=M("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=M("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),o&&a<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),l||i&&v||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,r.init(n)}function ae(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var n=i.children[r],s=n.chunkSize();if(t<s){i=n;break}t-=s}return i.lines[t]}function le(e,t,i){var r=[],n=t.line;return e.iter(t.line,i.line+1,(function(e){var s=e.text;n==i.line&&(s=s.slice(0,i.ch)),n==t.line&&(s=s.slice(t.ch)),r.push(s),++n})),r}function ce(e,t,i){var r=[];return e.iter(t,i,(function(e){r.push(e.text)})),r}function he(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function ue(e){if(null==e.parent)return null;for(var t=e.parent,i=W(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var n=0;r.children[n]!=t;++n)i+=r.children[n].chunkSize();return i+t.first}function de(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var n=e.children[r],s=n.height;if(t<s){e=n;continue e}t-=s,i+=n.chunkSize()}return i}while(!e.lines);for(var o=0;o<e.lines.length;++o){var a=e.lines[o].height;if(t<a)break;t-=a}return i+o}function pe(e,t){return t>=e.first&&t<e.first+e.size}function fe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,i){if(void 0===i&&(i=null),!(this instanceof ge))return new ge(e,t,i);this.line=e,this.ch=t,this.sticky=i}function me(e,t){return e.line-t.line||e.ch-t.ch}function ve(e,t){return e.sticky==t.sticky&&0==me(e,t)}function ye(e){return ge(e.line,e.ch)}function be(e,t){return me(e,t)<0?t:e}function xe(e,t){return me(e,t)<0?e:t}function we(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function _e(e,t){if(t.line<e.first)return ge(e.first,0);var i=e.first+e.size-1;return t.line>i?ge(i,ae(e,i).text.length):function(e,t){var i=e.ch;return null==i||i>t?ge(e.line,t):i<0?ge(e.line,0):e}(t,ae(e,t.line).text.length)}function Ce(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=_e(e,t[r]);return i}var ke=!1,Se=!1;function Ee(e,t,i){this.marker=e,this.from=t,this.to=i}function Le(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function Te(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function Me(e,t){if(t.full)return null;var i=pe(e,t.from.line)&&ae(e,t.from.line).markedSpans,r=pe(e,t.to.line)&&ae(e,t.to.line).markedSpans;if(!i&&!r)return null;var n=t.from.ch,s=t.to.ch,o=0==me(t.from,t.to),a=function(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var s=e[n],o=s.marker;if(null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t)||s.from==t&&"bookmark"==o.type&&(!i||!s.marker.insertLeft)){var a=null==s.to||(o.inclusiveRight?s.to>=t:s.to>t);(r||(r=[])).push(new Ee(o,s.from,a?null:s.to))}}return r}(i,n,o),l=function(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var s=e[n],o=s.marker;if(null==s.to||(o.inclusiveRight?s.to>=t:s.to>t)||s.from==t&&"bookmark"==o.type&&(!i||s.marker.insertLeft)){var a=null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t);(r||(r=[])).push(new Ee(o,a?null:s.from-t,null==s.to?null:s.to-t))}}return r}(r,s,o),c=1==t.text.length,h=$(t.text).length+(c?n:0);if(a)for(var u=0;u<a.length;++u){var d=a[u];if(null==d.to){var p=Le(l,d.marker);p?c&&(d.to=null==p.to?null:p.to+h):d.to=n}}if(l)for(var f=0;f<l.length;++f){var g=l[f];if(null!=g.to&&(g.to+=h),null==g.from)Le(a,g.marker)||(g.from=h,c&&(a||(a=[])).push(g));else g.from+=h,c&&(a||(a=[])).push(g)}a&&(a=Re(a)),l&&l!=a&&(l=Re(l));var m=[a];if(!c){var v,y=t.text.length-2;if(y>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(v||(v=[])).push(new Ee(a[b].marker,null,null));for(var x=0;x<y;++x)m.push(v);m.push(l)}return m}function Re(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ae(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Fe(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Ne(e){return e.inclusiveLeft?-1:0}function Ie(e){return e.inclusiveRight?1:0}function Oe(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var r=e.find(),n=t.find(),s=me(r.from,n.from)||Ne(e)-Ne(t);if(s)return-s;var o=me(r.to,n.to)||Ie(e)-Ie(t);return o||t.id-e.id}function Pe(e,t){var i,r=Se&&e.markedSpans;if(r)for(var n=void 0,s=0;s<r.length;++s)(n=r[s]).marker.collapsed&&null==(t?n.from:n.to)&&(!i||Oe(i,n.marker)<0)&&(i=n.marker);return i}function De(e){return Pe(e,!0)}function He(e){return Pe(e,!1)}function qe(e,t,i,r,n){var s=ae(e,t),o=Se&&s.markedSpans;if(o)for(var a=0;a<o.length;++a){var l=o[a];if(l.marker.collapsed){var c=l.marker.find(0),h=me(c.from,i)||Ne(l.marker)-Ne(n),u=me(c.to,r)||Ie(l.marker)-Ie(n);if(!(h>=0&&u<=0||h<=0&&u>=0)&&(h<=0&&(l.marker.inclusiveRight&&n.inclusiveLeft?me(c.to,i)>=0:me(c.to,i)>0)||h>=0&&(l.marker.inclusiveRight&&n.inclusiveLeft?me(c.from,r)<=0:me(c.from,r)<0)))return!0}}}function We(e){for(var t;t=De(e);)e=t.find(-1,!0).line;return e}function Be(e,t){var i=ae(e,t),r=We(i);return i==r?t:ue(r)}function ze(e,t){if(t>e.lastLine())return t;var i,r=ae(e,t);if(!Ue(e,r))return t;for(;i=He(r);)r=i.find(1,!0).line;return ue(r)+1}function Ue(e,t){var i=Se&&t.markedSpans;if(i)for(var r=void 0,n=0;n<i.length;++n)if((r=i[n]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Ge(e,t,r))return!0}}function Ge(e,t,i){if(null==i.to){var r=i.marker.find(1,!0);return Ge(e,r.line,Le(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,s=0;s<t.markedSpans.length;++s)if((n=t.markedSpans[s]).marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(null==n.to||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&Ge(e,t,n))return!0}function Ve(e){for(var t=0,i=(e=We(e)).parent,r=0;r<i.lines.length;++r){var n=i.lines[r];if(n==e)break;t+=n.height}for(var s=i.parent;s;s=(i=s).parent)for(var o=0;o<s.children.length;++o){var a=s.children[o];if(a==i)break;t+=a.height}return t}function je(e){if(0==e.height)return 0;for(var t,i=e.text.length,r=e;t=De(r);){var n=t.find(0,!0);r=n.from.line,i+=n.from.ch-n.to.ch}for(r=e;t=He(r);){var s=t.find(0,!0);i-=r.text.length-s.from.ch,i+=(r=s.to.line).text.length-s.to.ch}return i}function Ke(e){var t=e.display,i=e.doc;t.maxLine=ae(i,i.first),t.maxLineLength=je(t.maxLine),t.maxLineChanged=!0,i.iter((function(e){var i=je(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)}))}var $e=null;function Xe(e,t,i){var r;$e=null;for(var n=0;n<e.length;++n){var s=e[n];if(s.from<t&&s.to>t)return n;s.to==t&&(s.from!=s.to&&"before"==i?r=n:$e=n),s.from==t&&(s.from!=s.to&&"before"!=i?r=n:$e=n)}return null!=r?r:$e}var Ye=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,i=/[LRr]/,r=/[Lb1n]/,n=/[1n]/;function s(e,t,i){this.level=e,this.from=t,this.to=i}return function(o,a){var l="ltr"==a?"L":"R";if(0==o.length||"ltr"==a&&!e.test(o))return!1;for(var c,h=o.length,u=[],d=0;d<h;++d)u.push((c=o.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L");for(var p=0,f=l;p<h;++p){var g=u[p];"m"==g?u[p]=f:f=g}for(var m=0,v=l;m<h;++m){var y=u[m];"1"==y&&"r"==v?u[m]="n":i.test(y)&&(v=y,"r"==y&&(u[m]="R"))}for(var b=1,x=u[0];b<h-1;++b){var w=u[b];"+"==w&&"1"==x&&"1"==u[b+1]?u[b]="1":","!=w||x!=u[b+1]||"1"!=x&&"n"!=x||(u[b]=x),x=w}for(var _=0;_<h;++_){var C=u[_];if(","==C)u[_]="N";else if("%"==C){var k=void 0;for(k=_+1;k<h&&"%"==u[k];++k);for(var S=_&&"!"==u[_-1]||k<h&&"1"==u[k]?"1":"N",E=_;E<k;++E)u[E]=S;_=k-1}}for(var L=0,T=l;L<h;++L){var M=u[L];"L"==T&&"1"==M?u[L]="L":i.test(M)&&(T=M)}for(var R=0;R<h;++R)if(t.test(u[R])){var A=void 0;for(A=R+1;A<h&&t.test(u[A]);++A);for(var F="L"==(R?u[R-1]:l),N=F==("L"==(A<h?u[A]:l))?F?"L":"R":l,I=R;I<A;++I)u[I]=N;R=A-1}for(var O,P=[],D=0;D<h;)if(r.test(u[D])){var H=D;for(++D;D<h&&r.test(u[D]);++D);P.push(new s(0,H,D))}else{var q=D,W=P.length;for(++D;D<h&&"L"!=u[D];++D);for(var B=q;B<D;)if(n.test(u[B])){q<B&&P.splice(W,0,new s(1,q,B));var z=B;for(++B;B<D&&n.test(u[B]);++B);P.splice(W,0,new s(2,z,B)),q=B}else++B;q<D&&P.splice(W,0,new s(1,q,D))}return 1==P[0].level&&(O=o.match(/^\s+/))&&(P[0].from=O[0].length,P.unshift(new s(0,0,O[0].length))),1==$(P).level&&(O=o.match(/\s+$/))&&($(P).to-=O[0].length,P.push(new s(0,h-O[0].length,h))),"rtl"==a?P.reverse():P}}();function Ze(e,t){var i=e.order;return null==i&&(i=e.order=Ye(e.text,t)),i}function Je(e,t,i){var r=ne(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Qe(e,t,i){var r=Je(e,t.ch,i);return null==r?null:new ge(t.line,r,i<0?"after":"before")}function et(e,t,i,r,n){if(e){var s=Ze(i,t.doc.direction);if(s){var o,a=n<0?$(s):s[0],l=n<0==(1==a.level)?"after":"before";if(a.level>0){var c=Oi(t,i);o=n<0?i.text.length-1:0;var h=Pi(t,c,o).top;o=se((function(e){return Pi(t,c,e).top==h}),n<0==(1==a.level)?a.from:a.to-1,o),"before"==l&&(o=Je(i,o,1))}else o=n<0?a.to:a.from;return new ge(r,o,l)}}return new ge(r,n<0?i.text.length:0,n<0?"before":"after")}function tt(e,t,i,r){var n=Ze(t,e.doc.direction);if(!n)return Qe(t,i,r);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var s=Xe(n,i.ch,i.sticky),o=n[s];if("ltr"==e.doc.direction&&o.level%2==0&&(r>0?o.to>i.ch:o.from<i.ch))return Qe(t,i,r);var a,l=function(e,i){return Je(t,e instanceof ge?e.ch:e,i)},c=function(i){return e.options.lineWrapping?(a=a||Oi(e,t),er(e,t,a,i)):{begin:0,end:t.text.length}},h=c("before"==i.sticky?l(i,-1):i.ch);if("rtl"==e.doc.direction||1==o.level){var u=1==o.level==r<0,d=l(i,u?1:-1);if(null!=d&&(u?d<=o.to&&d<=h.end:d>=o.from&&d>=h.begin)){var p=u?"before":"after";return new ge(i.line,d,p)}}var f=function(e,t,r){for(var s=function(e,t){return t?new ge(i.line,l(e,1),"before"):new ge(i.line,e,"after")};e>=0&&e<n.length;e+=t){var o=n[e],a=t>0==(1!=o.level),c=a?r.begin:l(r.end,-1);if(o.from<=c&&c<o.to)return s(c,a);if(c=a?o.from:l(o.to,-1),r.begin<=c&&c<r.end)return s(c,a)}},g=f(s+r,r,h);if(g)return g;var m=r>0?h.end:l(h.begin,-1);return null==m||r>0&&m==t.text.length||!(g=f(r>0?0:n.length-1,r,c(m)))?null:g}var it=[],rt=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||it).concat(i)}};function nt(e,t){return e._handlers&&e._handlers[t]||it}function st(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,n=r&&r[t];if(n){var s=W(n,i);s>-1&&(r[t]=n.slice(0,s).concat(n.slice(s+1)))}}}function ot(e,t){var i=nt(e,t);if(i.length)for(var r=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,r)}function at(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ot(e,i||t.type,e,t),pt(t)||t.codemirrorIgnore}function lt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==W(i,t[r])&&i.push(t[r])}function ct(e,t){return nt(e,t).length>0}function ht(e){e.prototype.on=function(e,t){rt(this,e,t)},e.prototype.off=function(e,t){st(this,e,t)}}function ut(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function dt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function pt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ft(e){ut(e),dt(e)}function gt(e){return e.target||e.srcElement}function mt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var vt,yt,bt=function(){if(o&&a<9)return!1;var e=M("div");return"draggable"in e||"dragDrop"in e}();function xt(e){if(null==vt){var t=M("span","â€‹");T(e,M("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(vt=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&a<8))}var i=vt?M("span","â€‹"):M("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function wt(e){if(null!=yt)return yt;var t=T(e,document.createTextNode("AØ®A")),i=S(t,0,1).getBoundingClientRect(),r=S(t,1,2).getBoundingClientRect();return L(e),!(!i||i.left==i.right)&&(yt=r.right-i.right<3)}var _t,Ct=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],r=e.length;t<=r;){var n=e.indexOf("\n",t);-1==n&&(n=e.length);var s=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),o=s.indexOf("\r");-1!=o?(i.push(s.slice(0,o)),t+=o+1):(i.push(s),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},kt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},St="oncopy"in(_t=M("div"))||(_t.setAttribute("oncopy","return;"),"function"==typeof _t.oncopy),Et=null;var Lt={},Tt={};function Mt(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Lt[e]=t}function Rt(e){if("string"==typeof e&&Tt.hasOwnProperty(e))e=Tt[e];else if(e&&"string"==typeof e.name&&Tt.hasOwnProperty(e.name)){var t=Tt[e.name];"string"==typeof t&&(t={name:t}),(e=Z(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Rt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Rt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function At(e,t){t=Rt(t);var i=Lt[t.name];if(!i)return At(e,"text/plain");var r=i(e,t);if(Ft.hasOwnProperty(t.name)){var n=Ft[t.name];for(var s in n)n.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=n[s])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)r[o]=t.modeProps[o];return r}var Ft={};function Nt(e,t){D(t,Ft.hasOwnProperty(e)?Ft[e]:Ft[e]={})}function It(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var n=t[r];n instanceof Array&&(n=n.concat([])),i[r]=n}return i}function Ot(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Pt(e,t,i){return!e.startState||e.startState(t,i)}var Dt=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Dt.prototype.eol=function(){return this.pos>=this.string.length},Dt.prototype.sol=function(){return this.pos==this.lineStart},Dt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Dt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Dt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Dt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Dt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Dt.prototype.skipToEnd=function(){this.pos=this.string.length},Dt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Dt.prototype.backUp=function(e){this.pos-=e},Dt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=H(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)},Dt.prototype.indentation=function(){return H(this.string,null,this.tabSize)-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)},Dt.prototype.match=function(e,t,i){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var n=function(e){return i?e.toLowerCase():e};if(n(this.string.substr(this.pos,e.length))==n(e))return!1!==t&&(this.pos+=e.length),!0},Dt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Dt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Dt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)};var Ht=function(e,t){this.state=e,this.lookAhead=t},qt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0};function Wt(e,t,i,r){var n=[e.state.modeGen],s={};Xt(e,t.text,e.doc.mode,i,(function(e,t){return n.push(e,t)}),s,r);for(var o=i.state,a=function(r){var o=e.state.overlays[r],a=1,l=0;i.state=!0,Xt(e,t.text,o.mode,i,(function(e,t){for(var i=a;l<e;){var r=n[a];r>e&&n.splice(a,1,e,n[a+1],r),a+=2,l=Math.min(e,r)}if(t)if(o.opaque)n.splice(i,a-i,e,"overlay "+t),a=i+2;else for(;i<a;i+=2){var s=n[i+1];n[i+1]=(s?s+" ":"")+"overlay "+t}}),s)},l=0;l<e.state.overlays.length;++l)a(l);return i.state=o,{styles:n,classes:s.bgClass||s.textClass?s:null}}function Bt(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=zt(e,ue(t)),n=t.text.length>e.options.maxHighlightLength&&It(e.doc.mode,r.state),s=Wt(e,t,r);n&&(r.state=n),t.stateAfter=r.save(!n),t.styles=s.styles,s.classes?t.styleClasses=s.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function zt(e,t,i){var r=e.doc,n=e.display;if(!r.mode.startState)return new qt(r,!0,t);var s=function(e,t,i){for(var r,n,s=e.doc,o=i?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>o;--a){if(a<=s.first)return s.first;var l=ae(s,a-1),c=l.stateAfter;if(c&&(!i||a+(c instanceof Ht?c.lookAhead:0)<=s.modeFrontier))return a;var h=H(l.text,null,e.options.tabSize);(null==n||r>h)&&(n=a-1,r=h)}return n}(e,t,i),o=s>r.first&&ae(r,s-1).stateAfter,a=o?qt.fromSaved(r,o,s):new qt(r,Pt(r.mode),s);return r.iter(s,t,(function(i){Ut(e,i.text,a);var r=a.line;i.stateAfter=r==t-1||r%5==0||r>=n.viewFrom&&r<n.viewTo?a.save():null,a.nextLine()})),i&&(r.modeFrontier=a.line),a}function Ut(e,t,i,r){var n=e.doc.mode,s=new Dt(t,e.options.tabSize,i);for(s.start=s.pos=r||0,""==t&&Gt(n,i.state);!s.eol();)Vt(n,s,i.state),s.start=s.pos}function Gt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=Ot(e,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Vt(e,t,i,r){for(var n=0;n<10;n++){r&&(r[0]=Ot(e,i).mode);var s=e.token(t,i);if(t.pos>t.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}qt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},qt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},qt.fromSaved=function(e,t,i){return t instanceof Ht?new qt(e,It(e.mode,t.state),i,t.lookAhead):new qt(e,It(e.mode,t),i)},qt.prototype.save=function(e){var t=!1!==e?It(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ht(t,this.maxLookAhead):t};var jt=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Kt(e,t,i,r){var n,s,o=e.doc,a=o.mode,l=ae(o,(t=_e(o,t)).line),c=zt(e,t.line,i),h=new Dt(l.text,e.options.tabSize,c);for(r&&(s=[]);(r||h.pos<t.ch)&&!h.eol();)h.start=h.pos,n=Vt(a,h,c.state),r&&s.push(new jt(h,n,It(o.mode,c.state)));return r?s:new jt(h,n,c.state)}function $t(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";null==t[r]?t[r]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Xt(e,t,i,r,n,s,o){var a=i.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,h=null,u=new Dt(t,e.options.tabSize,r),d=e.options.addModeClass&&[null];for(""==t&&$t(Gt(i,r.state),s);!u.eol();){if(u.pos>e.options.maxHighlightLength?(a=!1,o&&Ut(e,t,r,u.pos),u.pos=t.length,l=null):l=$t(Vt(i,u,r.state,d),s),d){var p=d[0].name;p&&(l="m-"+(l?p+" "+l:p))}if(!a||h!=l){for(;c<u.start;)n(c=Math.min(u.start,c+5e3),h);h=l}u.start=u.pos}for(;c<u.pos;){var f=Math.min(u.pos,c+5e3);n(f,h),c=f}}var Yt=function(e,t,i){this.text=e,Fe(this,t),this.height=i?i(this):1};function Zt(e){e.parent=null,Ae(e)}Yt.prototype.lineNo=function(){return ue(this)},ht(Yt);var Jt={},Qt={};function ei(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?Qt:Jt;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function ti(e,t){var i=R("span",null,null,l?"padding-right: .1px":null),r={pre:R("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(o||l)&&e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var s=n?t.rest[n-1]:t.line,a=void 0;r.pos=0,r.addToken=ri,wt(e.display.measure)&&(a=Ze(s,e.doc.direction))&&(r.addToken=ni(r.addToken,a)),r.map=[],oi(s,r,Bt(e,s,t!=e.display.externalMeasured&&ue(s))),s.styleClasses&&(s.styleClasses.bgClass&&(r.bgClass=I(s.styleClasses.bgClass,r.bgClass||"")),s.styleClasses.textClass&&(r.textClass=I(s.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(xt(e.display.measure))),0==n?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var c=r.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return ot(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=I(r.pre.className,r.textClass||"")),r}function ii(e){var t=M("span","â€¢","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ri(e,t,i,r,n,s,l){if(t){var c,h=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,r="",n=0;n<e.length;n++){var s=e.charAt(n);" "!=s||!i||n!=e.length-1&&32!=e.charCodeAt(n+1)||(s="Â "),r+=s,i=" "==s}return r}(t,e.trailingSpace):t,u=e.cm.state.specialChars,d=!1;if(u.test(t)){c=document.createDocumentFragment();for(var p=0;;){u.lastIndex=p;var f=u.exec(t),g=f?f.index-p:t.length-p;if(g){var m=document.createTextNode(h.slice(p,p+g));o&&a<9?c.appendChild(M("span",[m])):c.appendChild(m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!f)break;p+=g+1;var v=void 0;if("\t"==f[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=c.appendChild(M("span",K(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==f[0]||"\n"==f[0]?((v=c.appendChild(M("span","\r"==f[0]?"â":"â¤","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),o&&a<9?c.appendChild(M("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,c),o&&a<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),i||r||n||d||l){var x=i||"";r&&(x+=r),n&&(x+=n);var w=M("span",[c],x,l);return s&&(w.title=s),e.content.appendChild(w)}e.content.appendChild(c)}}function ni(e,t){return function(i,r,n,s,o,a,l){n=n?n+" cm-force-border":"cm-force-border";for(var c=i.pos,h=c+r.length;;){for(var u=void 0,d=0;d<t.length&&!((u=t[d]).to>c&&u.from<=c);d++);if(u.to>=h)return e(i,r,n,s,o,a,l);e(i,r.slice(0,u.to-c),n,s,null,a,l),s=null,r=r.slice(u.to-c),c=u.to}}}function si(e,t,i,r){var n=!r&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!r&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function oi(e,t,i){var r=e.markedSpans,n=e.text,s=0;if(r)for(var o,a,l,c,h,u,d,p=n.length,f=0,g=1,m="",v=0;;){if(v==f){l=c=h=u=a="",d=null,v=1/0;for(var y=[],b=void 0,x=0;x<r.length;++x){var w=r[x],_=w.marker;"bookmark"==_.type&&w.from==f&&_.widgetNode?y.push(_):w.from<=f&&(null==w.to||w.to>f||_.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,c=""),_.className&&(l+=" "+_.className),_.css&&(a=(a?a+";":"")+_.css),_.startStyle&&w.from==f&&(h+=" "+_.startStyle),_.endStyle&&w.to==v&&(b||(b=[])).push(_.endStyle,w.to),_.title&&!u&&(u=_.title),_.collapsed&&(!d||Oe(d.marker,_)<0)&&(d=w)):w.from>f&&v>w.from&&(v=w.from)}if(b)for(var C=0;C<b.length;C+=2)b[C+1]==v&&(c+=" "+b[C]);if(!d||d.from==f)for(var k=0;k<y.length;++k)si(t,0,y[k]);if(d&&(d.from||0)==f){if(si(t,(null==d.to?p+1:d.to)-f,d.marker,null==d.from),null==d.to)return;d.to==f&&(d=!1)}}if(f>=p)break;for(var S=Math.min(p,v);;){if(m){var E=f+m.length;if(!d){var L=E>S?m.slice(0,S-f):m;t.addToken(t,L,o?o+l:l,h,f+L.length==v?c:"",u,a)}if(E>=S){m=m.slice(S-f),f=S;break}f=E,h=""}m=n.slice(s,s=i[g++]),o=ei(i[g++],t.cm.options)}}else for(var T=1;T<i.length;T+=2)t.addToken(t,n.slice(s,s=i[T]),ei(i[T+1],t.cm.options))}function ai(e,t,i){this.line=t,this.rest=function(e){for(var t,i;t=He(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}(t),this.size=this.rest?ue($(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Ue(e,t)}function li(e,t,i){for(var r,n=[],s=t;s<i;s=r){var o=new ai(e.doc,ae(e.doc,s),s);r=s+o.size,n.push(o)}return n}var ci=null;var hi=null;function ui(e,t){var i=nt(e,t);if(i.length){var r,n=Array.prototype.slice.call(arguments,2);ci?r=ci.delayedCallbacks:hi?r=hi:(r=hi=[],setTimeout(di,0));for(var s=function(e){r.push((function(){return i[e].apply(null,n)}))},o=0;o<i.length;++o)s(o)}}function di(){var e=hi;hi=null;for(var t=0;t<e.length;++t)e[t]()}function pi(e,t,i,r){for(var n=0;n<t.changes.length;n++){var s=t.changes[n];"text"==s?mi(e,t):"gutter"==s?yi(e,t,i,r):"class"==s?vi(e,t):"widget"==s&&bi(e,t,r)}t.changes=null}function fi(e){return e.node==e.text&&(e.node=M("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&a<8&&(e.node.style.zIndex=2)),e.node}function gi(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):ti(e,t)}function mi(e,t){var i=t.text.className,r=gi(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,vi(e,t)):i&&(t.text.className=i)}function vi(e,t){!function(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=fi(t);t.background=r.insertBefore(M("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?fi(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function yi(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=fi(t);t.gutterBackground=M("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var o=fi(t),a=t.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),o.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(M("div",fe(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],h=s.hasOwnProperty(c)&&s[c];h&&a.appendChild(M("div",[h],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function bi(e,t,i){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,n=void 0;r;r=n)n=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);wi(e,t,i)}function xi(e,t,i,r){var n=gi(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),vi(e,t),yi(e,t,i,r),wi(e,t,r),t.node}function wi(e,t,i){if(_i(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)_i(e,t.rest[r],t,i,!1)}function _i(e,t,i,r,n){if(t.widgets)for(var s=fi(i),o=0,a=t.widgets;o<a.length;++o){var l=a[o],c=M("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Ci(l,c,i,r),e.display.input.setUneditable(c),n&&l.above?s.insertBefore(c,i.gutter||i.text):s.appendChild(c),ui(l,"redraw")}}function Ci(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(n-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function ki(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!A(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),T(t.display.measure,M("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Si(e,t){for(var i=gt(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function Ei(e){return e.lineSpace.offsetTop}function Li(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ti(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,M("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Mi(e){return 30-e.display.nativeBarWidth}function Ri(e){return e.display.scroller.clientWidth-Mi(e)-e.display.barWidth}function Ai(e){return e.display.scroller.clientHeight-Mi(e)-e.display.barHeight}function Fi(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var n=0;n<e.rest.length;n++)if(ue(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ni(e,t,i,r){return Pi(e,Oi(e,t),i,r)}function Ii(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[cr(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function Oi(e,t){var i=ue(t),r=Ii(e,i);r&&!r.text?r=null:r&&r.changes&&(pi(e,r,i,nr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var i=ue(t=We(t)),r=e.display.externalMeasured=new ai(e.doc,t,i);r.lineN=i;var n=r.built=ti(e,r);return r.text=n.pre,T(e.display.lineMeasure,n.pre),r}(e,t));var n=Fi(r,t,i);return{line:t,view:r,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Pi(e,t,i,r,n){t.before&&(i=-1);var s,l=i+(r||"");return t.cache.hasOwnProperty(l)?s=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,i){var r=e.options.lineWrapping,n=r&&Ri(e);if(!t.measure.heights||r&&t.measure.width!=n){var s=t.measure.heights=[];if(r){t.measure.width=n;for(var o=t.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var l=o[a],c=o[a+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-i.top)}}s.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),(s=function(e,t,i,r){var n,s=qi(t.map,i,r),l=s.node,c=s.start,h=s.end,u=s.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;c&&re(t.line.text.charAt(s.coverStart+c));)--c;for(;s.coverStart+h<s.coverEnd&&re(t.line.text.charAt(s.coverStart+h));)++h;if((n=o&&a<9&&0==c&&h==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():Wi(S(l,c,h).getClientRects(),r)).left||n.right||0==c)break;h=c,c-=1,u="right"}o&&a<11&&(n=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Et)return Et;var t=T(e,M("span","x")),i=t.getBoundingClientRect(),r=S(t,0,1).getBoundingClientRect();return Et=Math.abs(i.left-r.left)>1}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,n))}else{var p;c>0&&(u=r="right"),n=e.options.lineWrapping&&(p=l.getClientRects()).length>1?p["right"==r?p.length-1:0]:l.getBoundingClientRect()}if(o&&a<9&&!c&&(!n||!n.left&&!n.right)){var f=l.parentNode.getClientRects()[0];n=f?{left:f.left,right:f.left+rr(e.display),top:f.top,bottom:f.bottom}:Hi}for(var g=n.top-t.rect.top,m=n.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var x=b?y[b-1]:0,w=y[b],_={left:("right"==u?n.right:n.left)-t.rect.left,right:("left"==u?n.left:n.right)-t.rect.left,top:x,bottom:w};n.left||n.right||(_.bogus=!0);e.options.singleCursorHeightPerLine||(_.rtop=g,_.rbottom=m);return _}(e,t,i,r)).bogus||(t.cache[l]=s)),{left:s.left,right:s.right,top:n?s.rtop:s.top,bottom:n?s.rbottom:s.bottom}}var Di,Hi={left:0,right:0,top:0,bottom:0};function qi(e,t,i){for(var r,n,s,o,a,l,c=0;c<e.length;c+=3)if(a=e[c],l=e[c+1],t<a?(n=0,s=1,o="left"):t<l?s=(n=t-a)+1:(c==e.length-3||t==l&&e[c+3]>t)&&(n=(s=l-a)-1,t>=l&&(o="right")),null!=n){if(r=e[c+2],a==l&&i==(r.insertLeft?"left":"right")&&(o=i),"left"==i&&0==n)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],o="left";if("right"==i&&n==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],o="right";break}return{node:r,start:n,end:s,collapse:o,coverStart:a,coverEnd:l}}function Wi(e,t){var i=Hi;if("left"==t)for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var n=e.length-1;n>=0&&(i=e[n]).left==i.right;n--);return i}function Bi(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function zi(e){e.display.externalMeasure=null,L(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Bi(e.display.view[t])}function Ui(e){zi(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Gi(){return h&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Vi(){return h&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ji(e,t,i,r,n){if(!n&&t.widgets)for(var s=0;s<t.widgets.length;++s)if(t.widgets[s].above){var o=ki(t.widgets[s]);i.top+=o,i.bottom+=o}if("line"==r)return i;r||(r="local");var a=Ve(t);if("local"==r?a+=Ei(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==r?0:Vi());var c=l.left+("window"==r?0:Gi());i.left+=c,i.right+=c}return i.top+=a,i.bottom+=a,i}function Ki(e,t,i){if("div"==i)return t;var r=t.left,n=t.top;if("page"==i)r-=Gi(),n-=Vi();else if("local"==i||!i){var s=e.display.sizer.getBoundingClientRect();r+=s.left,n+=s.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:n-o.top}}function $i(e,t,i,r,n){return r||(r=ae(e.doc,t.line)),ji(e,r,Ni(e,r,t.ch,n),i)}function Xi(e,t,i,r,n,s){function o(t,o){var a=Pi(e,n,t,o?"right":"left",s);return o?a.left=a.right:a.right=a.left,ji(e,r,a,i)}r=r||ae(e.doc,t.line),n||(n=Oi(e,r));var a=Ze(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return o("before"==c?l-1:l,"before"==c);function h(e,t,i){return o(i?e-1:e,a[t].level%2!=0!=i)}var u=Xe(a,l,c),d=$e,p=h(l,u,"before"==c);return null!=d&&(p.other=h(l,d,"before"!=c)),p}function Yi(e,t){var i=0;t=_e(e.doc,t),e.options.lineWrapping||(i=rr(e.display)*t.ch);var r=ae(e.doc,t.line),n=Ve(r)+Ei(e.display);return{left:i,right:i,top:n,bottom:n+r.height}}function Zi(e,t,i,r,n){var s=ge(e,t,i);return s.xRel=n,r&&(s.outside=!0),s}function Ji(e,t,i){var r=e.doc;if((i+=e.display.viewOffset)<0)return Zi(r.first,0,null,!0,-1);var n=de(r,i),s=r.first+r.size-1;if(n>s)return Zi(r.first+r.size-1,ae(r,s).text.length,null,!0,1);t<0&&(t=0);for(var o=ae(r,n);;){var a=tr(e,o,n,t,i),l=He(o),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;n=ue(o=c.to.line)}}function Qi(e,t,i,r){var n=function(r){return ji(e,t,Pi(e,i,r),"line")},s=t.text.length,o=se((function(e){return n(e-1).bottom<=r}),s,0);return{begin:o,end:s=se((function(e){return n(e).top>r}),o,s)}}function er(e,t,i,r){return Qi(e,t,i,ji(e,t,Pi(e,i,r),"line").top)}function tr(e,t,i,r,n){n-=Ve(t);var s,o=0,a=t.text.length,l=Oi(e,t);if(Ze(t,e.doc.direction)){var c;if(e.options.lineWrapping)o=(c=Qi(e,t,l,n)).begin,a=c.end;s=new ge(i,Math.floor(o+(a-o)/2));var h,u,d=Xi(e,s,"line",t,l).left,p=d<r?1:-1,f=d-r,g=Math.ceil((a-o)/4);e:do{h=f,u=s;for(var m=0;m<g;++m){var v=s;if(null==(s=tt(e,t,s,p))||s.ch<o||a<=("before"==s.sticky?s.ch-1:s.ch)){s=v;break e}}if(f=Xi(e,s,"line",t,l).left-r,g>1){var y=Math.abs(f-h)/g;g=Math.min(g,Math.ceil(Math.abs(f)/y)),p=f<0?1:-1}}while(0!=f&&(g>1||p<0!=f<0&&Math.abs(f)<=Math.abs(h)));if(Math.abs(f)>Math.abs(h)){if(f<0==h<0)throw new Error("Broke out of infinite loop in coordsCharInner");s=u}}else{var b=se((function(i){var s=ji(e,t,Pi(e,l,i),"line");return s.top>n?(a=Math.min(i,a),!0):!(s.bottom<=n)&&(s.left>r||!(s.right<r)&&r-s.left<s.right-r)}),o,a);s=new ge(i,b=ne(t.text,b,1),b==a?"before":"after")}var x=Xi(e,s,"line",t,l);return(n<x.top||x.bottom<n)&&(s.outside=!0),s.xRel=r<x.left?-1:r>x.right?1:0,s}function ir(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Di){Di=M("pre");for(var t=0;t<49;++t)Di.appendChild(document.createTextNode("x")),Di.appendChild(M("br"));Di.appendChild(document.createTextNode("x"))}T(e.measure,Di);var i=Di.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),L(e.measure),i||1}function rr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=M("span","xxxxxxxxxx"),i=M("pre",[t]);T(e.measure,i);var r=t.getBoundingClientRect(),n=(r.right-r.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}function nr(e){for(var t=e.display,i={},r={},n=t.gutters.clientLeft,s=t.gutters.firstChild,o=0;s;s=s.nextSibling,++o)i[e.options.gutters[o]]=s.offsetLeft+s.clientLeft+n,r[e.options.gutters[o]]=s.clientWidth;return{fixedPos:sr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function sr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function or(e){var t=ir(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/rr(e.display)-3);return function(n){if(Ue(e.doc,n))return 0;var s=0;if(n.widgets)for(var o=0;o<n.widgets.length;o++)n.widgets[o].height&&(s+=n.widgets[o].height);return i?s+(Math.ceil(n.text.length/r)||1)*t:s+t}}function ar(e){var t=e.doc,i=or(e);t.iter((function(e){var t=i(e);t!=e.height&&he(e,t)}))}function lr(e,t,i,r){var n=e.display;if(!i&&"true"==gt(t).getAttribute("cm-not-content"))return null;var s,o,a=n.lineSpace.getBoundingClientRect();try{s=t.clientX-a.left,o=t.clientY-a.top}catch(t){return null}var l,c=Ji(e,s,o);if(r&&1==c.xRel&&(l=ae(e.doc,c.line).text).length==c.ch){var h=H(l,l.length,e.options.tabSize)-l.length;c=ge(c.line,Math.max(0,Math.round((s-Ti(e.display).left)/rr(e.display))-h))}return c}function cr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,r=0;r<i.length;r++)if((t-=i[r].size)<0)return r}function hr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function ur(e,t){for(var i=e.doc,r={},n=r.cursors=document.createDocumentFragment(),s=r.selection=document.createDocumentFragment(),o=0;o<i.sel.ranges.length;o++)if(!1!==t||o!=i.sel.primIndex){var a=i.sel.ranges[o];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&dr(e,a.head,n),l||pr(e,a,s)}}return r}function dr(e,t,i){var r=Xi(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(M("div","Â ","CodeMirror-cursor"));if(n.style.left=r.left+"px",n.style.top=r.top+"px",n.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var s=i.appendChild(M("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function pr(e,t,i){var r=e.display,n=e.doc,s=document.createDocumentFragment(),o=Ti(e.display),a=o.left,l=Math.max(r.sizerWidth,Ri(e)-r.sizer.offsetLeft)-o.right;function c(e,t,i,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==i?l-e:i)+"px;\n                             height: "+(r-t)+"px"))}function h(t,i,r){var s,o,h=ae(n,t),u=h.text.length;function d(i,r){return $i(e,ge(t,i),"div",h,r)}return function(e,t,i,r){if(!e)return r(t,i,"ltr");for(var n=!1,s=0;s<e.length;++s){var o=e[s];(o.from<i&&o.to>t||t==i&&o.to==t)&&(r(Math.max(o.from,t),Math.min(o.to,i),1==o.level?"rtl":"ltr"),n=!0)}n||r(t,i,"ltr")}(Ze(h,n.direction),i||0,null==r?u:r,(function(e,t,n){var h,p,f,g=d(e,"left");if(e==t)h=g,p=f=g.left;else{if(h=d(t-1,"right"),"rtl"==n){var m=g;g=h,h=m}p=g.left,f=h.right}null==i&&0==e&&(p=a),h.top-g.top>3&&(c(p,g.top,null,g.bottom),p=a,g.bottom<h.top&&c(p,g.bottom,null,h.top)),null==r&&t==u&&(f=l),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!o||h.bottom>o.bottom||h.bottom==o.bottom&&h.right>o.right)&&(o=h),p<a+1&&(p=a),c(p,h.top,f-p,h.bottom)})),{start:s,end:o}}var u=t.from(),d=t.to();if(u.line==d.line)h(u.line,u.ch,d.ch);else{var p=ae(n,u.line),f=ae(n,d.line),g=We(p)==We(f),m=h(u.line,u.ch,g?p.text.length+1:null).end,v=h(d.line,g?0:null,d.ch).start;g&&(m.top<v.top-2?(c(m.right,m.top,null,m.bottom),c(a,v.top,v.left,v.bottom)):c(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&c(a,m.bottom,null,v.top)}i.appendChild(s)}function fr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function gr(e){e.state.focused||(e.display.input.focus(),vr(e))}function mr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yr(e))}),100)}function vr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ot(e,"focus",e,t),e.state.focused=!0,N(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),fr(e))}function yr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ot(e,"blur",e,t),e.state.focused=!1,E(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function br(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var n=t.view[r],s=void 0;if(!n.hidden){if(o&&a<8){var l=n.node.offsetTop+n.node.offsetHeight;s=l-i,i=l}else{var c=n.node.getBoundingClientRect();s=c.bottom-c.top}var h=n.line.height-s;if(s<2&&(s=ir(t)),(h>.005||h<-.005)&&(he(n.line,s),xr(n.line),n.rest))for(var u=0;u<n.rest.length;u++)xr(n.rest[u])}}}function xr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function wr(e,t,i){var r=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-Ei(e));var n=i&&null!=i.bottom?i.bottom:r+e.wrapper.clientHeight,s=de(t,r),o=de(t,n);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;a<s?(s=a,o=de(t,Ve(ae(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=o&&(s=de(t,Ve(ae(t,l))-e.wrapper.clientHeight),o=l)}return{from:s,to:Math.max(o,s+1)}}function _r(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=sr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,s=r+"px",o=0;o<i.length;o++)if(!i[o].hidden){e.options.fixedGutter&&(i[o].gutter&&(i[o].gutter.style.left=s),i[o].gutterBackground&&(i[o].gutterBackground.style.left=s));var a=i[o].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function Cr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=fe(e.options,t.first+t.size-1),r=e.display;if(i.length!=r.lineNumChars){var n=r.measure.appendChild(M("div",[M("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=n.firstChild.offsetWidth,o=n.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o)+1,r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",hn(e),!0}return!1}function kr(e,t){var i=e.display,r=ir(e.display);t.top<0&&(t.top=0);var n=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:i.scroller.scrollTop,s=Ai(e),o={};t.bottom-t.top>s&&(t.bottom=t.top+s);var a=e.doc.height+Li(i),l=t.top<r,c=t.bottom>a-r;if(t.top<n)o.scrollTop=l?0:t.top;else if(t.bottom>n+s){var h=Math.min(t.top,(c?a:t.bottom)-s);h!=n&&(o.scrollTop=h)}var u=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:i.scroller.scrollLeft,d=Ri(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),p=t.right-t.left>d;return p&&(t.right=t.left+d),t.left<10?o.scrollLeft=0:t.left<u?o.scrollLeft=Math.max(0,t.left-(p?0:10)):t.right>d+u-3&&(o.scrollLeft=t.right+(p?0:10)-d),o}function Sr(e,t){null!=t&&(Tr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Er(e){Tr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Lr(e,t,i){null==t&&null==i||Tr(e),null!=t&&(e.curOp.scrollLeft=t),null!=i&&(e.curOp.scrollTop=i)}function Tr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Mr(e,Yi(e,t.from),Yi(e,t.to),t.margin))}function Mr(e,t,i,r){var n=kr(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});Lr(e,n.scrollLeft,n.scrollTop)}function Rr(e,t){Math.abs(e.doc.scrollTop-t)<2||(i||cn(e,{top:t}),Ar(e,t,!0),i&&cn(e),nn(e,100))}function Ar(e,t,i){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Fr(e,t,i,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,_r(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Nr(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+Li(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Mi(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var Ir=function(e,t,i){this.cm=i;var r=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(n),rt(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),rt(n,"scroll",(function(){n.clientWidth&&t(n.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,o&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ir.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var n=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+s)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},Ir.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ir.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ir.prototype.zeroWidthHack=function(){var e=y&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new q,this.disableVert=new q},Ir.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto",t.set(1e3,(function r(){var n=e.getBoundingClientRect();("vert"==i?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)}))},Ir.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Or=function(){};function Pr(e,t){t||(t=Nr(e));var i=e.display.barWidth,r=e.display.barHeight;Dr(e,t);for(var n=0;n<4&&i!=e.display.barWidth||r!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&br(e),Dr(e,Nr(e)),i=e.display.barWidth,r=e.display.barHeight}function Dr(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}Or.prototype.update=function(){return{bottom:0,right:0}},Or.prototype.setScrollLeft=function(){},Or.prototype.setScrollTop=function(){},Or.prototype.clear=function(){};var Hr={native:Ir,null:Or};function qr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&E(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Hr[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),rt(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,i){"horizontal"==i?Fr(e,t):Rr(e,t)}),e),e.display.scrollbars.addClass&&N(e.display.wrapper,e.display.scrollbars.addClass)}var Wr=0;function Br(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wr},t=e.curOp,ci?ci.ops.push(t):t.ownsGroup=ci={ops:[t],delayedCallbacks:[]}}function zr(e){!function(e,t){var i=e.ownsGroup;if(i)try{!function(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var n=e.ops[r];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}(i)}finally{ci=null,t(i)}}(e.curOp,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,i=0;i<t.length;i++)Ur(t[i]);for(var r=0;r<t.length;r++)Gr(t[r]);for(var n=0;n<t.length;n++)Vr(t[n]);for(var s=0;s<t.length;s++)jr(t[s]);for(var o=0;o<t.length;o++)Kr(t[o])}(e)}))}function Ur(e){var t=e.cm,i=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Mi(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Mi(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ke(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new on(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Gr(e){e.updatedDisplay=e.mustUpdate&&an(e.cm,e.update)}function Vr(e){var t=e.cm,i=t.display;e.updatedDisplay&&br(t),e.barMeasure=Nr(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ni(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Mi(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-Ri(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection(e.focus))}function jr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Fr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==F()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Pr(t,e.barMeasure),e.updatedDisplay&&un(t,e.barMeasure),e.selectionChanged&&fr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&gr(e.cm)}function Kr(e){var t=e.cm,i=t.display,r=t.doc;(e.updatedDisplay&&ln(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&Ar(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Fr(t,e.scrollLeft,!0,!0),e.scrollToPos)&&function(e,t){if(!at(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),n=null;if(t.top+r.top<0?n=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!f){var s=M("div","â€‹",null,"position: absolute;\n                         top: "+(t.top-i.viewOffset-Ei(e.display))+"px;\n                         height: "+(t.bottom-t.top+Mi(e)+i.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(n),e.display.lineSpace.removeChild(s)}}}(t,function(e,t,i,r){var n;null==r&&(r=0),e.options.lineWrapping||t!=i||(i="before"==(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ge(t.line,t.ch+1,"before"):t);for(var s=0;s<5;s++){var o=!1,a=Xi(e,t),l=i&&i!=t?Xi(e,i):a,c=kr(e,n={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-r,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+r}),h=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=c.scrollTop&&(Rr(e,c.scrollTop),Math.abs(e.doc.scrollTop-h)>1&&(o=!0)),null!=c.scrollLeft&&(Fr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(o=!0)),!o)break}return n}(t,_e(r,e.scrollToPos.from),_e(r,e.scrollToPos.to),e.scrollToPos.margin));var n=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(n)for(var o=0;o<n.length;++o)n[o].lines.length||ot(n[o],"hide");if(s)for(var a=0;a<s.length;++a)s[a].lines.length&&ot(s[a],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ot(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function $r(e,t){if(e.curOp)return t();Br(e);try{return t()}finally{zr(e)}}function Xr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Br(e);try{return t.apply(e,arguments)}finally{zr(e)}}}function Yr(e){return function(){if(this.curOp)return e.apply(this,arguments);Br(this);try{return e.apply(this,arguments)}finally{zr(this)}}}function Zr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Br(t);try{return e.apply(this,arguments)}finally{zr(t)}}}function Jr(e,t,i,r){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),r||(r=0);var n=e.display;if(r&&i<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)Se&&Be(e.doc,t)<n.viewTo&&en(e);else if(i<=n.viewFrom)Se&&ze(e.doc,i+r)>n.viewFrom?en(e):(n.viewFrom+=r,n.viewTo+=r);else if(t<=n.viewFrom&&i>=n.viewTo)en(e);else if(t<=n.viewFrom){var s=tn(e,i,i+r,1);s?(n.view=n.view.slice(s.index),n.viewFrom=s.lineN,n.viewTo+=r):en(e)}else if(i>=n.viewTo){var o=tn(e,t,t,-1);o?(n.view=n.view.slice(0,o.index),n.viewTo=o.lineN):en(e)}else{var a=tn(e,t,t,-1),l=tn(e,i,i+r,1);a&&l?(n.view=n.view.slice(0,a.index).concat(li(e,a.lineN,l.lineN)).concat(n.view.slice(l.index)),n.viewTo+=r):en(e)}var c=n.externalMeasured;c&&(i<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(n.externalMeasured=null))}function Qr(e,t,i){e.curOp.viewChanged=!0;var r=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var s=r.view[cr(e,t)];if(null!=s.node){var o=s.changes||(s.changes=[]);-1==W(o,i)&&o.push(i)}}}function en(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function tn(e,t,i,r){var n,s=cr(e,t),o=e.display.view;if(!Se||i==e.doc.first+e.doc.size)return{index:s,lineN:i};for(var a=e.display.viewFrom,l=0;l<s;l++)a+=o[l].size;if(a!=t){if(r>0){if(s==o.length-1)return null;n=a+o[s].size-t,s++}else n=a-t;t+=n,i+=n}for(;Be(e.doc,i)!=i;){if(s==(r<0?0:o.length-1))return null;i+=r*o[s-(r<0?1:0)].size,s+=r}return{index:s,lineN:i}}function rn(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var n=t[r];n.hidden||n.node&&!n.changes||++i}return i}function nn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,P(sn,e))}function sn(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,r=zt(e,t.highlightFrontier),n=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(s){if(r.line>=e.display.viewFrom){var o=s.styles,a=s.text.length>e.options.maxHighlightLength?It(t.mode,r.state):null,l=Wt(e,s,r,!0);a&&(r.state=a),s.styles=l.styles;var c=s.styleClasses,h=l.classes;h?s.styleClasses=h:c&&(s.styleClasses=null);for(var u=!o||o.length!=s.styles.length||c!=h&&(!c||!h||c.bgClass!=h.bgClass||c.textClass!=h.textClass),d=0;!u&&d<o.length;++d)u=o[d]!=s.styles[d];u&&n.push(r.line),s.stateAfter=r.save(),r.nextLine()}else s.text.length<=e.options.maxHighlightLength&&Ut(e,s.text,r),s.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>i)return nn(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),n.length&&$r(e,(function(){for(var t=0;t<n.length;t++)Qr(e,n[t],"text")}))}}var on=function(e,t,i){var r=e.display;this.viewport=t,this.visible=wr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Ri(e),this.force=i,this.dims=nr(e),this.events=[]};function an(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return en(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==rn(e))return!1;Cr(e)&&(en(e),t.dims=nr(e));var n=r.first+r.size,s=Math.max(t.visible.from-e.options.viewportMargin,r.first),o=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(r.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(n,i.viewTo)),Se&&(s=Be(e.doc,s),o=ze(e.doc,o));var a=s!=i.viewFrom||o!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;!function(e,t,i){var r=e.display;0==r.view.length||t>=r.viewTo||i<=r.viewFrom?(r.view=li(e,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=li(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(cr(e,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(li(e,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,cr(e,i)))),r.viewTo=i}(e,s,o),i.viewOffset=Ve(ae(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var c=rn(e);if(!a&&0==c&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var h=function(e){if(e.hasFocus())return null;var t=F();if(!t||!A(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&A(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}(e);return c>4&&(i.lineDiv.style.display="none"),function(e,t,i){var r=e.display,n=e.options.lineNumbers,s=r.lineDiv,o=s.firstChild;function a(t){var i=t.nextSibling;return l&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var c=r.view,h=r.viewFrom,u=0;u<c.length;u++){var d=c[u];if(d.hidden);else if(d.node&&d.node.parentNode==s){for(;o!=d.node;)o=a(o);var p=n&&null!=t&&t<=h&&d.lineNumber;d.changes&&(W(d.changes,"gutter")>-1&&(p=!1),pi(e,d,h,i)),p&&(L(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(fe(e.options,h)))),o=d.node.nextSibling}else{var f=xi(e,d,h,i);s.insertBefore(f,o)}h+=d.size}for(;o;)o=a(o)}(e,i.updateLineNumbers,t.dims),c>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(e){if(e&&e.activeElt&&e.activeElt!=F()&&(e.activeElt.focus(),e.anchorNode&&A(document.body,e.anchorNode)&&A(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}(h),L(i.cursorDiv),L(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,a&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,nn(e,400)),i.updateLineNumbers=null,!0}function ln(e,t){for(var i=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Ri(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+Li(e.display)-Ai(e),i.top)}),t.visible=wr(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&an(e,t);r=!1){br(e);var n=Nr(e);hr(e),Pr(e,n),un(e,n),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function cn(e,t){var i=new on(e,t);if(an(e,i)){br(e),ln(e,i);var r=Nr(e);hr(e),Pr(e,r),un(e,r),i.finish()}}function hn(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function un(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Mi(e)+"px"}function dn(e){var t=e.display.gutters,i=e.options.gutters;L(t);for(var r=0;r<i.length;++r){var n=i[r],s=t.appendChild(M("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",hn(e)}function pn(e){var t=W(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}on.prototype.signal=function(e,t){ct(e,t)&&this.events.push(arguments)},on.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ot.apply(null,this.events[e])};var fn=0,gn=null;function mn(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}}function vn(e){var t=mn(e);return t.x*=gn,t.y*=gn,t}function yn(e,t){var r=mn(t),n=r.x,s=r.y,o=e.display,a=o.scroller,c=a.scrollWidth>a.clientWidth,h=a.scrollHeight>a.clientHeight;if(n&&c||s&&h){if(s&&y&&l)e:for(var d=t.target,p=o.view;d!=a;d=d.parentNode)for(var f=0;f<p.length;f++)if(p[f].node==d){e.display.currentWheelTarget=d;break e}if(n&&!i&&!u&&null!=gn)return s&&h&&Rr(e,Math.max(0,a.scrollTop+s*gn)),Fr(e,Math.max(0,a.scrollLeft+n*gn)),(!s||s&&h)&&ut(t),void(o.wheelStartX=null);if(s&&null!=gn){var g=s*gn,m=e.doc.scrollTop,v=m+o.wrapper.clientHeight;g<0?m=Math.max(0,m+g-50):v=Math.min(e.doc.height,v+g+50),cn(e,{top:m,bottom:v})}fn<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=n,o.wheelDY=s,setTimeout((function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(gn=(gn*fn+i)/(fn+1),++fn)}}),200)):(o.wheelDX+=n,o.wheelDY+=s))}}o?gn=-.53:i?gn=15:h?gn=-.7:d&&(gn=-1/3);var bn=function(e,t){this.ranges=e,this.primIndex=t};bn.prototype.primary=function(){return this.ranges[this.primIndex]},bn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!ve(i.anchor,r.anchor)||!ve(i.head,r.head))return!1}return!0},bn.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new xn(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new bn(e,this.primIndex)},bn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},bn.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(me(t,r.from())>=0&&me(e,r.to())<=0)return i}return-1};var xn=function(e,t){this.anchor=e,this.head=t};function wn(e,t){var i=e[t];e.sort((function(e,t){return me(e.from(),t.from())})),t=W(e,i);for(var r=1;r<e.length;r++){var n=e[r],s=e[r-1];if(me(s.to(),n.from())>=0){var o=xe(s.from(),n.from()),a=be(s.to(),n.to()),l=s.empty()?n.from()==n.head:s.from()==s.head;r<=t&&--t,e.splice(--r,2,new xn(l?a:o,l?o:a))}}return new bn(e,t)}function _n(e,t){return new bn([new xn(e,t||e)],0)}function Cn(e){return e.text?ge(e.from.line+e.text.length-1,$(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function kn(e,t){if(me(e,t.from)<0)return e;if(me(e,t.to)<=0)return Cn(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Cn(t).ch-t.to.ch),ge(i,r)}function Sn(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var n=e.sel.ranges[r];i.push(new xn(kn(n.anchor,t),kn(n.head,t)))}return wn(i,e.sel.primIndex)}function En(e,t,i){return e.line==t.line?ge(i.line,e.ch-t.ch+i.ch):ge(i.line+(e.line-t.line),e.ch)}function Ln(e){e.doc.mode=At(e.options,e.doc.modeOption),Tn(e)}function Tn(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,nn(e,100),e.state.modeGen++,e.curOp&&Jr(e)}function Mn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==$(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Rn(e,t,i,r){function n(e){return i?i[e]:null}function s(e,i,n){!function(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ae(e),Fe(e,i);var n=r?r(e):1;n!=e.height&&he(e,n)}(e,i,n,r),ui(e,"change",e,t)}function o(e,t){for(var i=[],s=e;s<t;++s)i.push(new Yt(c[s],n(s),r));return i}var a=t.from,l=t.to,c=t.text,h=ae(e,a.line),u=ae(e,l.line),d=$(c),p=n(c.length-1),f=l.line-a.line;if(t.full)e.insert(0,o(0,c.length)),e.remove(c.length,e.size-c.length);else if(Mn(e,t)){var g=o(0,c.length-1);s(u,u.text,p),f&&e.remove(a.line,f),g.length&&e.insert(a.line,g)}else if(h==u)if(1==c.length)s(h,h.text.slice(0,a.ch)+d+h.text.slice(l.ch),p);else{var m=o(1,c.length-1);m.push(new Yt(d+h.text.slice(l.ch),p,r)),s(h,h.text.slice(0,a.ch)+c[0],n(0)),e.insert(a.line+1,m)}else if(1==c.length)s(h,h.text.slice(0,a.ch)+c[0]+u.text.slice(l.ch),n(0)),e.remove(a.line+1,f);else{s(h,h.text.slice(0,a.ch)+c[0],n(0)),s(u,d+u.text.slice(l.ch),p);var v=o(1,c.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,v)}ui(e,"change",e,t)}function An(e,t,i){!function e(r,n,s){if(r.linked)for(var o=0;o<r.linked.length;++o){var a=r.linked[o];if(a.doc!=n){var l=s&&a.sharedHist;i&&!l||(t(a.doc,l),e(a.doc,r,l))}}}(e,null,!0)}function Fn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ar(e),Ln(e),Nn(e),e.options.lineWrapping||Ke(e),e.options.mode=t.modeOption,Jr(e)}function Nn(e){("rtl"==e.doc.direction?N:E)(e.display.lineDiv,"CodeMirror-rtl")}function In(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function On(e,t){var i={from:ye(t.from),to:Cn(t),text:le(e,t.from,t.to)};return Wn(e,i,t.from.line,t.to.line+1),An(e,(function(e){return Wn(e,i,t.from.line,t.to.line+1)}),!0),i}function Pn(e){for(;e.length;){if(!$(e).ranges)break;e.pop()}}function Dn(e,t,i,r){var n=e.history;n.undone.length=0;var s,o,a=+new Date;if((n.lastOp==r||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&n.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(s=function(e,t){return t?(Pn(e.done),$(e.done)):e.done.length&&!$(e.done).ranges?$(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),$(e.done)):void 0}(n,n.lastOp==r)))o=$(s.changes),0==me(t.from,t.to)&&0==me(t.from,o.to)?o.to=Cn(t):s.changes.push(On(e,t));else{var l=$(n.done);for(l&&l.ranges||qn(e.sel,n.done),s={changes:[On(e,t)],generation:n.generation},n.done.push(s);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=a,n.lastOp=n.lastSelOp=r,n.lastOrigin=n.lastSelOrigin=t.origin,o||ot(e,"historyAdded")}function Hn(e,t,i,r){var n=e.history,s=r&&r.origin;i==n.lastSelOp||s&&n.lastSelOrigin==s&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==s||function(e,t,i,r){var n=t.charAt(0);return"*"==n||"+"==n&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,s,$(n.done),t))?n.done[n.done.length-1]=t:qn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=s,n.lastSelOp=i,r&&!1!==r.clearRedo&&Pn(n.undone)}function qn(e,t){var i=$(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Wn(e,t,i,r){var n=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),(function(i){i.markedSpans&&((n||(n=t["spans_"+e.id]={}))[s]=i.markedSpans),++s}))}function Bn(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function zn(e,t){var i=function(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],n=0;n<t.text.length;++n)r.push(Bn(i[n]));return r}(e,t),r=Me(e,t);if(!i)return r;if(!r)return i;for(var n=0;n<i.length;++n){var s=i[n],o=r[n];if(s&&o)e:for(var a=0;a<o.length;++a){for(var l=o[a],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue e;s.push(l)}else o&&(i[n]=o)}return i}function Un(e,t,i){for(var r=[],n=0;n<e.length;++n){var s=e[n];if(s.ranges)r.push(i?bn.prototype.deepCopy.call(s):s);else{var o=s.changes,a=[];r.push({changes:a});for(var l=0;l<o.length;++l){var c=o[l],h=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var u in c)(h=u.match(/^spans_(\d+)$/))&&W(t,Number(h[1]))>-1&&($(a)[u]=c[u],delete c[u])}}}return r}function Gn(e,t,i,r){if(r){var n=e.anchor;if(i){var s=me(t,n)<0;s!=me(i,n)<0?(n=t,t=i):s!=me(t,i)<0&&(t=i)}return new xn(n,t)}return new xn(i||t,t)}function Vn(e,t,i,r,n){null==n&&(n=e.cm&&(e.cm.display.shift||e.extend)),Yn(e,new bn([Gn(e.sel.primary(),t,i,n)],0),r)}function jn(e,t,i){for(var r=[],n=e.cm&&(e.cm.display.shift||e.extend),s=0;s<e.sel.ranges.length;s++)r[s]=Gn(e.sel.ranges[s],t[s],null,n);Yn(e,wn(r,e.sel.primIndex),i)}function Kn(e,t,i,r){var n=e.sel.ranges.slice(0);n[t]=i,Yn(e,wn(n,e.sel.primIndex),r)}function $n(e,t,i,r){Yn(e,_n(t,i),r)}function Xn(e,t,i){var r=e.history.done,n=$(r);n&&n.ranges?(r[r.length-1]=t,Zn(e,t,i)):Yn(e,t,i)}function Yn(e,t,i){Zn(e,t,i),Hn(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Zn(e,t,i){(ct(e,"beforeSelectionChange")||e.cm&&ct(e.cm,"beforeSelectionChange"))&&(t=function(e,t,i){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++)this.ranges[i]=new xn(_e(e,t[i].anchor),_e(e,t[i].head))},origin:i&&i.origin};return ot(e,"beforeSelectionChange",e,r),e.cm&&ot(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?wn(r.ranges,r.ranges.length-1):t}(e,t,i));var r=i&&i.bias||(me(t.primary().head,e.sel.primary().head)<0?-1:1);Jn(e,es(e,t,r,!0)),i&&!1===i.scroll||!e.cm||Er(e.cm)}function Jn(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,lt(e.cm)),ui(e,"cursorActivity",e))}function Qn(e){Jn(e,es(e,e.sel,null,!1))}function es(e,t,i,r){for(var n,s=0;s<t.ranges.length;s++){var o=t.ranges[s],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[s],l=is(e,o.anchor,a&&a.anchor,i,r),c=is(e,o.head,a&&a.head,i,r);(n||l!=o.anchor||c!=o.head)&&(n||(n=t.ranges.slice(0,s)),n[s]=new xn(l,c))}return n?wn(n,t.primIndex):t}function ts(e,t,i,r,n){var s=ae(e,t.line);if(s.markedSpans)for(var o=0;o<s.markedSpans.length;++o){var a=s.markedSpans[o],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(n&&(ot(l,"beforeCursorEnter"),l.explicitlyCleared)){if(s.markedSpans){--o;continue}break}if(!l.atomic)continue;if(i){var c=l.find(r<0?1:-1),h=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=rs(e,c,-r,c&&c.line==t.line?s:null)),c&&c.line==t.line&&(h=me(c,i))&&(r<0?h<0:h>0))return ts(e,c,t,r,n)}var u=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(u=rs(e,u,r,u.line==t.line?s:null)),u?ts(e,u,t,r,n):null}}return t}function is(e,t,i,r,n){var s=r||1,o=ts(e,t,i,s,n)||!n&&ts(e,t,i,s,!0)||ts(e,t,i,-s,n)||!n&&ts(e,t,i,-s,!0);return o||(e.cantEdit=!0,ge(e.first,0))}function rs(e,t,i,r){return i<0&&0==t.ch?t.line>e.first?_e(e,ge(t.line-1)):null:i>0&&t.ch==(r||ae(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+i)}function ns(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),z)}function ss(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(t,i,n,s){t&&(r.from=_e(e,t)),i&&(r.to=_e(e,i)),n&&(r.text=n),void 0!==s&&(r.origin=s)}),ot(e,"beforeChange",e,r),e.cm&&ot(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function os(e,t,i){if(e.cm){if(!e.cm.curOp)return Xr(e.cm,os)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(ct(e,"beforeChange")||e.cm&&ct(e.cm,"beforeChange"))||(t=ss(e,t,!0))){var r=ke&&!i&&function(e,t,i){var r=null;if(e.iter(t.line,i.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||r&&-1!=W(r,i)||(r||(r=[])).push(i)}})),!r)return null;for(var n=[{from:t,to:i}],s=0;s<r.length;++s)for(var o=r[s],a=o.find(0),l=0;l<n.length;++l){var c=n[l];if(!(me(c.to,a.from)<0||me(c.from,a.to)>0)){var h=[l,1],u=me(c.from,a.from),d=me(c.to,a.to);(u<0||!o.inclusiveLeft&&!u)&&h.push({from:c.from,to:a.from}),(d>0||!o.inclusiveRight&&!d)&&h.push({from:a.to,to:c.to}),n.splice.apply(n,h),l+=h.length-3}}return n}(e,t.from,t.to);if(r)for(var n=r.length-1;n>=0;--n)as(e,{from:r[n].from,to:r[n].to,text:n?[""]:t.text});else as(e,t)}}function as(e,t){if(1!=t.text.length||""!=t.text[0]||0!=me(t.from,t.to)){var i=Sn(e,t);Dn(e,t,i,e.cm?e.cm.curOp.id:NaN),hs(e,t,i,Me(e,t));var r=[];An(e,(function(e,i){i||-1!=W(r,e.history)||(fs(e.history,t),r.push(e.history)),hs(e,t,null,Me(e,t))}))}}function ls(e,t,i){if(!e.cm||!e.cm.state.suppressEdits||i){for(var r,n=e.history,s=e.sel,o="undo"==t?n.done:n.undone,a="undo"==t?n.undone:n.done,l=0;l<o.length&&(r=o[l],i?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=o.length){for(n.lastOrigin=n.lastSelOrigin=null;(r=o.pop()).ranges;){if(qn(r,a),i&&!r.equals(e.sel))return void Yn(e,r,{clearRedo:!1});s=r}var c=[];qn(s,a),a.push({changes:c,generation:n.generation}),n.generation=r.generation||++n.maxGeneration;for(var h=ct(e,"beforeChange")||e.cm&&ct(e.cm,"beforeChange"),u=function(i){var n=r.changes[i];if(n.origin=t,h&&!ss(e,n,!1))return o.length=0,{};c.push(On(e,n));var s=i?Sn(e,n):$(o);hs(e,n,s,zn(e,n)),!i&&e.cm&&e.cm.scrollIntoView({from:n.from,to:Cn(n)});var a=[];An(e,(function(e,t){t||-1!=W(a,e.history)||(fs(e.history,n),a.push(e.history)),hs(e,n,null,zn(e,n))}))},d=r.changes.length-1;d>=0;--d){var p=u(d);if(p)return p.v}}}}function cs(e,t){if(0!=t&&(e.first+=t,e.sel=new bn(X(e.sel.ranges,(function(e){return new xn(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Jr(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)Qr(e.cm,r,"gutter")}}function hs(e,t,i,r){if(e.cm&&!e.cm.curOp)return Xr(e.cm,hs)(e,t,i,r);if(t.to.line<e.first)cs(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);cs(e,n),t={from:ge(e.first,0),to:ge(t.to.line+n,t.to.ch),text:[$(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:ge(s,ae(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=le(e,t.from,t.to),i||(i=Sn(e,t)),e.cm?function(e,t,i){var r=e.doc,n=e.display,s=t.from,o=t.to,a=!1,l=s.line;e.options.lineWrapping||(l=ue(We(ae(r,s.line))),r.iter(l,o.line+1,(function(e){if(e==n.maxLine)return a=!0,!0})));r.sel.contains(t.from,t.to)>-1&&lt(e);Rn(r,t,i,or(e)),e.options.lineWrapping||(r.iter(l,s.line+t.text.length,(function(e){var t=je(e);t>n.maxLineLength&&(n.maxLine=e,n.maxLineLength=t,n.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;r>i;r--){var n=ae(e,r).stateAfter;if(n&&(!(n instanceof Ht)||r+n.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}})(r,s.line),nn(e,400);var c=t.text.length-(o.line-s.line)-1;t.full?Jr(e):s.line!=o.line||1!=t.text.length||Mn(e.doc,t)?Jr(e,s.line,o.line+1,c):Qr(e,s.line,"text");var h=ct(e,"changes"),u=ct(e,"change");if(u||h){var d={from:s,to:o,text:t.text,removed:t.removed,origin:t.origin};u&&ui(e,"change",e,d),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,r):Rn(e,t,r),Zn(e,i,z)}}function us(e,t,i,r,n){if(r||(r=i),me(r,i)<0){var s=r;r=i,i=s}"string"==typeof t&&(t=e.splitLines(t)),os(e,{from:i,to:r,text:t,origin:n})}function ds(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function ps(e,t,i,r){for(var n=0;n<e.length;++n){var s=e[n],o=!0;if(s.ranges){s.copied||((s=e[n]=s.deepCopy()).copied=!0);for(var a=0;a<s.ranges.length;a++)ds(s.ranges[a].anchor,t,i,r),ds(s.ranges[a].head,t,i,r)}else{for(var l=0;l<s.changes.length;++l){var c=s.changes[l];if(i<c.from.line)c.from=ge(c.from.line+r,c.from.ch),c.to=ge(c.to.line+r,c.to.ch);else if(t<=c.to.line){o=!1;break}}o||(e.splice(0,n+1),n=0)}}}function fs(e,t){var i=t.from.line,r=t.to.line,n=t.text.length-(r-i)-1;ps(e.done,i,r,n),ps(e.undone,i,r,n)}function gs(e,t,i,r){var n=t,s=t;return"number"==typeof t?s=ae(e,we(e,t)):n=ue(t),null==n?null:(r(s,n)&&e.cm&&Qr(e.cm,n,i),s)}function ms(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function vs(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var n=e[r];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}xn.prototype.from=function(){return xe(this.anchor,this.head)},xn.prototype.to=function(){return be(this.anchor,this.head)},xn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ms.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,r=e+t;i<r;++i){var n=this.lines[i];this.height-=n.height,Zt(n),ui(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}},vs.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(e<n){var s=Math.min(t,n-e),o=r.height;if(r.removeInner(e,s),this.height-=o-r.height,n==s&&(this.children.splice(i--,1),r.parent=null),0==(t-=s))break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ms))){var a=[];this.collapse(a),this.children=[new ms(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var n=this.children[r],s=n.chunkSize();if(e<=s){if(n.insertInner(e,t,i),n.lines&&n.lines.length>50){for(var o=n.lines.length%25+25,a=o;a<n.lines.length;){var l=new ms(n.lines.slice(a,a+=25));n.height-=l.height,this.children.splice(++r,0,l),l.parent=this}n.lines=n.lines.slice(0,o),this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new vs(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var i=W(e.parent.children,e);e.parent.children.splice(i+1,0,t)}else{var r=new vs(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var n=this.children[r],s=n.chunkSize();if(e<s){var o=Math.min(t,s-e);if(n.iterN(e,o,i))return!0;if(0==(t-=o))break;e=0}else e-=s}}};var ys=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};function bs(e,t,i){Ve(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Sr(e,i)}ys.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=ue(i);if(null!=r&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var s=ki(this);he(i,Math.max(0,i.height-s)),e&&($r(e,(function(){bs(e,i,-s),Qr(e,r,"widget")})),ui(e,"lineWidgetCleared",e,this,r))}},ys.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var n=ki(this)-t;n&&(he(r,r.height+n),i&&$r(i,(function(){i.curOp.forceUpdate=!0,bs(i,r,n),ui(i,"lineWidgetChanged",i,e,ue(r))})))},ht(ys);var xs=0,ws=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++xs};function _s(e,t,i,r,n){if(r&&r.shared)return function(e,t,i,r,n){(r=D(r)).shared=!1;var s=[_s(e,t,i,r,n)],o=s[0],a=r.widgetNode;return An(e,(function(e){a&&(r.widgetNode=a.cloneNode(!0)),s.push(_s(e,_e(e,t),_e(e,i),r,n));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=$(s)})),new Cs(s,o)}(e,t,i,r,n);if(e.cm&&!e.cm.curOp)return Xr(e.cm,_s)(e,t,i,r,n);var s=new ws(e,n),o=me(t,i);if(r&&D(r,s,!1),o>0||0==o&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=R("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(qe(e,t.line,t,i,s)||t.line!=i.line&&qe(e,i.line,t,i,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");Se=!0}s.addToHistory&&Dn(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,i.line+1,(function(e){c&&s.collapsed&&!c.options.lineWrapping&&We(e)==c.display.maxLine&&(a=!0),s.collapsed&&l!=t.line&&he(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Ee(s,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l})),s.collapsed&&e.iter(t.line,i.line+1,(function(t){Ue(e,t)&&he(t,0)})),s.clearOnEnter&&rt(s,"beforeCursorEnter",(function(){return s.clear()})),s.readOnly&&(ke=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++xs,s.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),s.collapsed)Jr(c,t.line,i.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var h=t.line;h<=i.line;h++)Qr(c,h,"text");s.atomic&&Qn(c.doc),ui(c,"markerAdded",c,s)}return s}ws.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Br(e),ct(this,"clear")){var i=this.find();i&&ui(this,"clear",i.from,i.to)}for(var r=null,n=null,s=0;s<this.lines.length;++s){var o=this.lines[s],a=Le(o.markedSpans,this);e&&!this.collapsed?Qr(e,ue(o),"text"):e&&(null!=a.to&&(n=ue(o)),null!=a.from&&(r=ue(o))),o.markedSpans=Te(o.markedSpans,a),null==a.from&&this.collapsed&&!Ue(this.doc,o)&&e&&he(o,ir(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=We(this.lines[l]),h=je(c);h>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=h,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Jr(e,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Qn(e.doc)),e&&ui(e,"markerCleared",e,this,r,n),t&&zr(e),this.parent&&this.parent.clear()}},ws.prototype.find=function(e,t){var i,r;null==e&&"bookmark"==this.type&&(e=1);for(var n=0;n<this.lines.length;++n){var s=this.lines[n],o=Le(s.markedSpans,this);if(null!=o.from&&(i=ge(t?s:ue(s),o.from),-1==e))return i;if(null!=o.to&&(r=ge(t?s:ue(s),o.to),1==e))return r}return i&&{from:i,to:r}},ws.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,r=this.doc.cm;t&&r&&$r(r,(function(){var n=t.line,s=ue(t.line),o=Ii(r,s);if(o&&(Bi(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Ue(i.doc,n)&&null!=i.height){var a=i.height;i.height=null;var l=ki(i)-a;l&&he(n,n.height+l)}ui(r,"markerChanged",r,e)}))},ws.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=W(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ws.prototype.detachLine=function(e){if(this.lines.splice(W(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ht(ws);var Cs=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function ks(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),(function(e){return e.parent}))}function Ss(e){for(var t=function(t){var i=e[t],r=[i.primary.doc];An(i.primary.doc,(function(e){return r.push(e)}));for(var n=0;n<i.markers.length;n++){var s=i.markers[n];-1==W(r,s.doc)&&(s.parent=null,i.markers.splice(n--,1))}},i=0;i<e.length;i++)t(i)}Cs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ui(this,"clear")}},Cs.prototype.find=function(e,t){return this.primary.find(e,t)},ht(Cs);var Es=0,Ls=function e(t,i,r,n,s){if(!(this instanceof e))return new e(t,i,r,n,s);null==r&&(r=0),vs.call(this,[new ms([new Yt("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=ge(r,0);this.sel=_n(o),this.history=new In(null),this.id=++Es,this.modeOption=i,this.lineSep=n,this.direction="rtl"==s?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Rn(this,{from:o,to:o,text:t}),Yn(this,_n(o),z)};(Ls.prototype=Z(vs.prototype,{constructor:Ls,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ce(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Zr((function(e){var t=ge(this.first,0),i=this.first+this.size-1;os(this,{from:t,to:ge(i,ae(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Lr(this.cm,0,0),Yn(this,_n(t),z)})),replaceRange:function(e,t,i,r){us(this,e,t=_e(this,t),i=i?_e(this,i):t,r)},getRange:function(e,t,i){var r=le(this,_e(this,e),_e(this,t));return!1===i?r:r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(pe(this,e))return ae(this,e)},getLineNumber:function(e){return ue(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=ae(this,e)),We(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return _e(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Zr((function(e,t,i){$n(this,_e(this,"number"==typeof e?ge(e,t||0):e),null,i)})),setSelection:Zr((function(e,t,i){$n(this,_e(this,e),_e(this,t||e),i)})),extendSelection:Zr((function(e,t,i){Vn(this,_e(this,e),t&&_e(this,t),i)})),extendSelections:Zr((function(e,t){jn(this,Ce(this,e),t)})),extendSelectionsBy:Zr((function(e,t){jn(this,Ce(this,X(this.sel.ranges,e)),t)})),setSelections:Zr((function(e,t,i){if(e.length){for(var r=[],n=0;n<e.length;n++)r[n]=new xn(_e(this,e[n].anchor),_e(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Yn(this,wn(r,t),i)}})),addSelection:Zr((function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new xn(_e(this,e),_e(this,t||e))),Yn(this,wn(r,r.length-1),i)})),getSelection:function(e){for(var t,i=this.sel.ranges,r=0;r<i.length;r++){var n=le(this,i[r].from(),i[r].to());t=t?t.concat(n):n}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var n=le(this,i[r].from(),i[r].to());!1!==e&&(n=n.join(e||this.lineSeparator())),t[r]=n}return t},replaceSelection:function(e,t,i){for(var r=[],n=0;n<this.sel.ranges.length;n++)r[n]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:Zr((function(e,t,i){for(var r=[],n=this.sel,s=0;s<n.ranges.length;s++){var o=n.ranges[s];r[s]={from:o.from(),to:o.to(),text:this.splitLines(e[s]),origin:i}}for(var a=t&&"end"!=t&&function(e,t,i){for(var r=[],n=ge(e.first,0),s=n,o=0;o<t.length;o++){var a=t[o],l=En(a.from,n,s),c=En(Cn(a),n,s);if(n=a.to,s=c,"around"==i){var h=e.sel.ranges[o],u=me(h.head,h.anchor)<0;r[o]=new xn(u?c:l,u?l:c)}else r[o]=new xn(l,l)}return new bn(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)os(this,r[l]);a?Xn(this,a):this.cm&&Er(this.cm)})),undo:Zr((function(){ls(this,"undo")})),redo:Zr((function(){ls(this,"redo")})),undoSelection:Zr((function(){ls(this,"undo",!0)})),redoSelection:Zr((function(){ls(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new In(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Un(this.history.done),undone:Un(this.history.undone)}},setHistory:function(e){var t=this.history=new In(this.history.maxGeneration);t.done=Un(e.done.slice(0),null,!0),t.undone=Un(e.undone.slice(0),null,!0)},setGutterMarker:Zr((function(e,t,i){return gs(this,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=i,!i&&te(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:Zr((function(e){var t=this;this.iter((function(i){i.gutterMarkers&&i.gutterMarkers[e]&&gs(t,i,"gutter",(function(){return i.gutterMarkers[e]=null,te(i.gutterMarkers)&&(i.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!pe(this,e))return null;if(t=e,!(e=ae(this,e)))return null}else if(null==(t=ue(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Zr((function(e,t,i){return gs(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(k(i).test(e[r]))return!1;e[r]+=" "+i}else e[r]=i;return!0}))})),removeLineClass:Zr((function(e,t,i){return gs(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",n=e[r];if(!n)return!1;if(null==i)e[r]=null;else{var s=n.match(k(i));if(!s)return!1;var o=s.index+s[0].length;e[r]=n.slice(0,s.index)+(s.index&&o!=n.length?" ":"")+n.slice(o)||null}return!0}))})),addLineWidget:Zr((function(e,t,i){return function(e,t,i,r){var n=new ys(e,i,r),s=e.cm;return s&&n.noHScroll&&(s.display.alignWidgets=!0),gs(e,t,"widget",(function(t){var i=t.widgets||(t.widgets=[]);if(null==n.insertAt?i.push(n):i.splice(Math.min(i.length-1,Math.max(0,n.insertAt)),0,n),n.line=t,s&&!Ue(e,t)){var r=Ve(t)<e.scrollTop;he(t,t.height+ki(n)),r&&Sr(s,n.height),s.curOp.forceUpdate=!0}return!0})),ui(s,"lineWidgetAdded",s,n,"number"==typeof t?t:ue(t)),n}(this,e,t,i)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return _s(this,_e(this,e),_e(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return _s(this,e=_e(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=ae(this,(e=_e(this,e)).line).markedSpans;if(i)for(var r=0;r<i.length;++r){var n=i[r];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=_e(this,e),t=_e(this,t);var r=[],n=e.line;return this.iter(e.line,t.line+1,(function(s){var o=s.markedSpans;if(o)for(var a=0;a<o.length;a++){var l=o[a];null!=l.to&&n==e.line&&e.ch>=l.to||null==l.from&&n!=e.line||null!=l.from&&n==t.line&&l.from>=t.ch||i&&!i(l.marker)||r.push(l.marker.parent||l.marker)}++n})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var i=t.markedSpans;if(i)for(var r=0;r<i.length;++r)null!=i[r].from&&e.push(i[r].marker)})),e},posFromIndex:function(e){var t,i=this.first,r=this.lineSeparator().length;return this.iter((function(n){var s=n.text.length+r;if(s>e)return t=e,!0;e-=s,++i})),_e(this,ge(i,t))},indexFromPos:function(e){var t=(e=_e(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+i})),t},copy:function(e){var t=new Ls(ce(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var r=new Ls(ce(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.find(),s=e.clipPos(n.from),o=e.clipPos(n.to);if(me(s,o)){var a=_s(e,s,o,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,ks(this)),r},unlinkDoc:function(e){if(e instanceof wo&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ss(ks(this));break}}if(e.history==this.history){var i=[e.id];An(e,(function(e){return i.push(e.id)}),!0),e.history=new In(null),e.history.done=Un(this.history.done,i),e.history.undone=Un(this.history.undone,i)}},iterLinkedDocs:function(e){An(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ct(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Zr((function(e){var t;("rtl"!=e&&(e="ltr"),e!=this.direction)&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&$r(t=this.cm,(function(){Nn(t),Jr(t)})))}))})).eachLine=Ls.prototype.iter;var Ts=0;function Ms(e){var t=this;if(Rs(t),!at(t,e)&&!Si(t.display,e)){ut(e),o&&(Ts=+new Date);var i=lr(t,e,!0),r=e.dataTransfer.files;if(i&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var n=r.length,s=Array(n),a=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=W(t.options.allowDropFileTypes,e.type)){var o=new FileReader;o.onload=Xr(t,(function(){var e=o.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[r]=e,++a==n){var l={from:i=_e(t.doc,i),to:i,text:t.doc.splitLines(s.join(t.doc.lineSeparator())),origin:"paste"};os(t.doc,l),Xn(t.doc,_n(i,Cn(l)))}})),o.readAsText(e)}},c=0;c<n;++c)l(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var h=e.dataTransfer.getData("Text");if(h){var u;if(t.state.draggingText&&!t.state.draggingText.copy&&(u=t.listSelections()),Zn(t.doc,_n(i,i)),u)for(var d=0;d<u.length;++d)us(t.doc,"",u[d].anchor,u[d].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Rs(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function As(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&e(r)}}var Fs=!1;function Ns(){var e;Fs||(rt(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,As(Is)}),100))})),rt(window,"blur",(function(){return As(yr)})),Fs=!0)}function Is(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}for(var Os={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ps=0;Ps<10;Ps++)Os[Ps+48]=Os[Ps+96]=String(Ps);for(var Ds=65;Ds<=90;Ds++)Os[Ds]=String.fromCharCode(Ds);for(var Hs=1;Hs<=12;Hs++)Os[Hs+111]=Os[Hs+63235]="F"+Hs;var qs={};function Ws(e){var t,i,r,n,s=e.split(/-(?!$)/);e=s[s.length-1];for(var o=0;o<s.length-1;o++){var a=s[o];if(/^(cmd|meta|m)$/i.test(a))n=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),n&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Bs(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==r){delete e[i];continue}for(var n=X(i.split(" "),Ws),s=0;s<n.length;s++){var o=void 0,a=void 0;s==n.length-1?(a=n.join(" "),o=r):(a=n.slice(0,s+1).join(" "),o="...");var l=t[a];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+a)}else t[a]=o}delete e[i]}for(var c in t)e[c]=t[c];return e}function zs(e,t,i,r){var n=(t=js(t)).call?t.call(e,r):t[e];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&i(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return zs(e,t.fallthrough,i,r);for(var s=0;s<t.fallthrough.length;s++){var o=zs(e,t.fallthrough[s],i,r);if(o)return o}}}function Us(e){var t="string"==typeof e?e:Os[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Gs(e,t,i){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(_?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(_?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!i&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Vs(e,t){if(u&&34==e.keyCode&&e.char)return!1;var i=Os[e.keyCode];return null!=i&&!e.altGraphKey&&Gs(i,e,t)}function js(e){return"string"==typeof e?qs[e]:e}function Ks(e,t){for(var i=e.doc.sel.ranges,r=[],n=0;n<i.length;n++){for(var s=t(i[n]);r.length&&me(s.from,$(r).to)<=0;){var o=r.pop();if(me(o.from,s.from)<0){s.from=o.from;break}}r.push(s)}$r(e,(function(){for(var t=r.length-1;t>=0;t--)us(e.doc,"",r[t].from,r[t].to,"+delete");Er(e)}))}qs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},qs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qs.default=y?qs.macDefault:qs.pcDefault;var $s={selectAll:ns,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),z)},killLine:function(e){return Ks(e,(function(t){if(t.empty()){var i=ae(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:ge(t.head.line+1,0)}:{from:t.head,to:ge(t.head.line,i)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Ks(e,(function(t){return{from:ge(t.from().line,0),to:_e(e.doc,ge(t.to().line+1,0))}}))},delLineLeft:function(e){return Ks(e,(function(e){return{from:ge(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Ks(e,(function(t){var i=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:i},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Ks(e,(function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Xs(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return Ys(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var i=ae(e.doc,t),r=function(e){for(var t;t=He(e);)e=t.find(1,!0).line;return e}(i);r!=i&&(t=ue(r));return et(!0,e,i,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")}),G)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")}),G)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var i=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return r.ch<e.getLine(r.line).search(/\S/)?Ys(e,t.head):r}),G)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,n=0;n<i.length;n++){var s=i[n].from(),o=H(e.getLine(s.line),s.ch,r);t.push(K(r-o%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return $r(e,(function(){for(var t=e.listSelections(),i=[],r=0;r<t.length;r++)if(t[r].empty()){var n=t[r].head,s=ae(e.doc,n.line).text;if(s)if(n.ch==s.length&&(n=new ge(n.line,n.ch-1)),n.ch>0)n=new ge(n.line,n.ch+1),e.replaceRange(s.charAt(n.ch-1)+s.charAt(n.ch-2),ge(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var o=ae(e.doc,n.line-1).text;o&&(n=new ge(n.line,1),e.replaceRange(s.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),ge(n.line-1,o.length-1),n,"+transpose"))}i.push(new xn(n,n))}e.setSelections(i)}))},newlineAndIndent:function(e){return $r(e,(function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Er(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Xs(e,t){var i=ae(e.doc,t),r=We(i);return r!=i&&(t=ue(r)),et(!0,e,r,t,1)}function Ys(e,t){var i=Xs(e,t.line),r=ae(e.doc,i.line),n=Ze(r,e.doc.direction);if(!n||0==n[0].level){var s=Math.max(0,r.text.search(/\S/)),o=t.line==i.line&&t.ch<=s&&t.ch;return ge(i.line,o?0:s,i.sticky)}return i}function Zs(e,t,i){if("string"==typeof t&&!(t=$s[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=B}finally{e.display.shift=r,e.state.suppressEdits=!1}return n}var Js=new q;function Qs(e,t,i,r){var n=e.state.keySeq;if(n){if(Us(t))return"handled";Js.set(50,(function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())})),t=n+" "+t}var s=function(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var n=zs(t,e.state.keyMaps[r],i,e);if(n)return n}return e.options.extraKeys&&zs(t,e.options.extraKeys,i,e)||zs(t,e.options.keyMap,i,e)}(e,t,r);return"multi"==s&&(e.state.keySeq=t),"handled"==s&&ui(e,"keyHandled",e,t,i),"handled"!=s&&"multi"!=s||(ut(i),fr(e)),n&&!s&&/\'$/.test(t)?(ut(i),!0):!!s}function eo(e,t){var i=Vs(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?Qs(e,"Shift-"+i,t,(function(t){return Zs(e,t,!0)}))||Qs(e,i,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Zs(e,t)})):Qs(e,i,t,(function(t){return Zs(e,t)})))}var to=null;function io(e){var t=this;if(t.curOp.focus=F(),!at(t,e)){o&&a<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=eo(t,e);u&&(to=r?i:null,r||88!=i||St||!(y?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function i(e){18!=e.keyCode&&e.altKey||(E(t,"CodeMirror-crosshair"),st(document,"keyup",i),st(document,"mouseover",i))}N(t,"CodeMirror-crosshair"),rt(document,"keyup",i),rt(document,"mouseover",i)}(t)}}function ro(e){16==e.keyCode&&(this.doc.sel.shift=!1),at(this,e)}function no(e){var t=this;if(!(Si(t.display,e)||at(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var i=e.keyCode,r=e.charCode;if(u&&i==to)return to=null,void ut(e);if(!u||e.which&&!(e.which<10)||!eo(t,e)){var n=String.fromCharCode(null==r?i:r);"\b"!=n&&(function(e,t,i){return Qs(e,"'"+i+"'",t,(function(t){return Zs(e,t,!0)}))}(t,e,n)||t.display.input.onKeyPress(e))}}}var so,oo,ao=function(e,t,i){this.time=e,this.pos=t,this.button=i};function lo(e){var t=this,i=t.display;if(!(at(t,e)||i.activeTouch&&i.input.supportsTouch()))if(i.input.ensurePolled(),i.shift=e.shiftKey,Si(i,e))l||(i.scroller.draggable=!1,setTimeout((function(){return i.scroller.draggable=!0}),100));else if(!uo(t,e)){var r=lr(t,e),n=mt(e),s=r?function(e,t){var i=+new Date;return oo&&oo.compare(i,e,t)?(so=oo=null,"triple"):so&&so.compare(i,e,t)?(oo=new ao(i,e,t),so=null,"double"):(so=new ao(i,e,t),oo=null,"single")}(r,n):"single";window.focus(),1==n&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,i,r,n){var s="Click";"double"==r?s="Double"+s:"triple"==r&&(s="Triple"+s);return Qs(e,Gs(s=(1==t?"Left":2==t?"Middle":"Right")+s,n),n,(function(t){if("string"==typeof t&&(t=$s[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,i)!=B}finally{e.state.suppressEdits=!1}return r}))}(t,n,r,s,e)||(1==n?r?function(e,t,i,r){o?setTimeout(P(gr,e),0):e.curOp.focus=F();var n,s=function(e,t,i){var r=e.getOption("configureMouse"),n=r?r(e,t,i):{};if(null==n.unit){var s=b?i.shiftKey&&i.metaKey:i.altKey;n.unit=s?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==n.extend||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey);null==n.addNew&&(n.addNew=y?i.metaKey:i.ctrlKey);null==n.moveOnDrag&&(n.moveOnDrag=!(y?i.altKey:i.ctrlKey));return n}(e,i,r),c=e.doc.sel;e.options.dragDrop&&bt&&!e.isReadOnly()&&"single"==i&&(n=c.contains(t))>-1&&(me((n=c.ranges[n]).from(),t)<0||t.xRel>0)&&(me(n.to(),t)>0||t.xRel<0)?function(e,t,i,r){var n=e.display,s=!1,c=Xr(e,(function(t){l&&(n.scroller.draggable=!1),e.state.draggingText=!1,st(document,"mouseup",c),st(document,"mousemove",h),st(n.scroller,"dragstart",u),st(n.scroller,"drop",c),s||(ut(t),r.addNew||Vn(e.doc,i,null,null,r.extend),l||o&&9==a?setTimeout((function(){document.body.focus(),n.input.focus()}),20):n.input.focus())})),h=function(e){s=s||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},u=function(){return s=!0};l&&(n.scroller.draggable=!0);e.state.draggingText=c,c.copy=!r.moveOnDrag,n.scroller.dragDrop&&n.scroller.dragDrop();rt(document,"mouseup",c),rt(document,"mousemove",h),rt(n.scroller,"dragstart",u),rt(n.scroller,"drop",c),mr(e),setTimeout((function(){return n.input.focus()}),20)}(e,r,t,s):function(e,t,i,r){var n=e.display,s=e.doc;ut(t);var o,a,l=s.sel,c=l.ranges;r.addNew&&!r.extend?(a=s.sel.contains(i),o=a>-1?c[a]:new xn(i,i)):(o=s.sel.primary(),a=s.sel.primIndex);if("rectangle"==r.unit)r.addNew||(o=new xn(i,i)),i=lr(e,t,!0,!0),a=-1;else{var h=co(e,i,r.unit);o=r.extend?Gn(o,h.anchor,h.head,r.extend):h}r.addNew?-1==a?(a=c.length,Yn(s,wn(c.concat([o]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"char"==r.unit&&!r.extend?(Yn(s,wn(c.slice(0,a).concat(c.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=s.sel):Kn(s,a,o,U):(a=0,Yn(s,new bn([o],0),U),l=s.sel);var u=i;var d=n.wrapper.getBoundingClientRect(),p=0;function f(t){var c=++p,h=lr(e,t,!0,"rectangle"==r.unit);if(h)if(0!=me(h,u)){e.curOp.focus=F(),function(t){if(0!=me(u,t))if(u=t,"rectangle"==r.unit){for(var n=[],c=e.options.tabSize,h=H(ae(s,i.line).text,i.ch,c),d=H(ae(s,t.line).text,t.ch,c),p=Math.min(h,d),f=Math.max(h,d),g=Math.min(i.line,t.line),m=Math.min(e.lastLine(),Math.max(i.line,t.line));g<=m;g++){var v=ae(s,g).text,y=V(v,p,c);p==f?n.push(new xn(ge(g,y),ge(g,y))):v.length>y&&n.push(new xn(ge(g,y),ge(g,V(v,f,c))))}n.length||n.push(new xn(i,i)),Yn(s,wn(l.ranges.slice(0,a).concat(n),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,x=o,w=co(e,t,r.unit),_=x.anchor;me(w.anchor,_)>0?(b=w.head,_=xe(x.from(),w.anchor)):(b=w.anchor,_=be(x.to(),w.head));var C=l.ranges.slice(0);C[a]=new xn(_e(s,_),b),Yn(s,wn(C,a),U)}}(h);var g=wr(n,s);(h.line>=g.to||h.line<g.from)&&setTimeout(Xr(e,(function(){p==c&&f(t)})),150)}else{var m=t.clientY<d.top?-20:t.clientY>d.bottom?20:0;m&&setTimeout(Xr(e,(function(){p==c&&(n.scroller.scrollTop+=m,f(t))})),50)}}function g(t){e.state.selectingText=!1,p=1/0,ut(t),n.input.focus(),st(document,"mousemove",m),st(document,"mouseup",v),s.history.lastSelOrigin=null}var m=Xr(e,(function(e){mt(e)?f(e):g(e)})),v=Xr(e,g);e.state.selectingText=v,rt(document,"mousemove",m),rt(document,"mouseup",v)}(e,r,t,s)}(t,r,s,e):gt(e)==i.scroller&&ut(e):2==n?(r&&Vn(t.doc,r),setTimeout((function(){return i.input.focus()}),20)):3==n&&(C?po(t,e):mr(t)))}}function co(e,t,i){if("char"==i)return new xn(t,t);if("word"==i)return e.findWordAt(t);if("line"==i)return new xn(ge(t.line,0),_e(e.doc,ge(t.line+1,0)));var r=i(e,t);return new xn(r.from,r.to)}function ho(e,t,i,r){var n,s;try{n=t.clientX,s=t.clientY}catch(t){return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ut(t);var o=e.display,a=o.lineDiv.getBoundingClientRect();if(s>a.bottom||!ct(e,i))return pt(t);s-=a.top-o.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=o.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=n)return ot(e,i,e,de(e.doc,s),e.options.gutters[l],t),pt(t)}}function uo(e,t){return ho(e,t,"gutterClick",!0)}function po(e,t){Si(e.display,t)||function(e,t){if(!ct(e,"gutterContextMenu"))return!1;return ho(e,t,"gutterContextMenu",!1)}(e,t)||at(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function fo(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ui(e)}ao.prototype.compare=function(e,t,i){return this.time+400>e&&0==me(t,this.pos)&&i==this.button};var go={toString:function(){return"CodeMirror.Init"}},mo={},vo={};function yo(e){dn(e),Jr(e),_r(e)}function bo(e,t,i){if(!t!=!(i&&i!=go)){var r=e.display.dragFunctions,n=t?rt:st;n(e.display.scroller,"dragstart",r.start),n(e.display.scroller,"dragenter",r.enter),n(e.display.scroller,"dragover",r.over),n(e.display.scroller,"dragleave",r.leave),n(e.display.scroller,"drop",r.drop)}}function xo(e){e.options.lineWrapping?(N(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(E(e.display.wrapper,"CodeMirror-wrap"),Ke(e)),ar(e),Jr(e),Ui(e),setTimeout((function(){return Pr(e)}),100)}function wo(e,t){var i=this;if(!(this instanceof wo))return new wo(e,t);this.options=t=t?D(t):{},D(mo,t,!1),pn(t);var r=t.value;"string"==typeof r&&(r=new Ls(r,t.mode,null,t.lineSeparator,t.direction)),this.doc=r;var n=new wo.inputStyles[t.inputStyle](this),s=this.display=new oe(e,r,n);for(var c in s.wrapper.CodeMirror=this,dn(this),fo(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),qr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new q,keySeq:null,specialChars:null},t.autofocus&&!v&&s.input.focus(),o&&a<11&&setTimeout((function(){return i.display.input.reset(!0)}),20),function(e){var t=e.display;rt(t.scroller,"mousedown",Xr(e,lo)),rt(t.scroller,"dblclick",o&&a<11?Xr(e,(function(t){if(!at(e,t)){var i=lr(e,t);if(i&&!uo(e,t)&&!Si(e.display,t)){ut(t);var r=e.findWordAt(i);Vn(e.doc,r.anchor,r.head)}}})):function(t){return at(e,t)||ut(t)});C||rt(t.scroller,"contextmenu",(function(t){return po(e,t)}));var i,r={end:0};function n(){t.activeTouch&&(i=setTimeout((function(){return t.activeTouch=null}),1e3),(r=t.activeTouch).end=+new Date)}function s(e,t){if(null==t.left)return!0;var i=t.left-e.left,r=t.top-e.top;return i*i+r*r>400}rt(t.scroller,"touchstart",(function(n){if(!at(e,n)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(n)){t.input.ensurePolled(),clearTimeout(i);var s=+new Date;t.activeTouch={start:s,moved:!1,prev:s-r.end<=300?r:null},1==n.touches.length&&(t.activeTouch.left=n.touches[0].pageX,t.activeTouch.top=n.touches[0].pageY)}})),rt(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),rt(t.scroller,"touchend",(function(i){var r=t.activeTouch;if(r&&!Si(t,i)&&null!=r.left&&!r.moved&&new Date-r.start<300){var o,a=e.coordsChar(t.activeTouch,"page");o=!r.prev||s(r,r.prev)?new xn(a,a):!r.prev.prev||s(r,r.prev.prev)?e.findWordAt(a):new xn(ge(a.line,0),_e(e.doc,ge(a.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),ut(i)}n()})),rt(t.scroller,"touchcancel",n),rt(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Rr(e,t.scroller.scrollTop),Fr(e,t.scroller.scrollLeft,!0),ot(e,"scroll",e))})),rt(t.scroller,"mousewheel",(function(t){return yn(e,t)})),rt(t.scroller,"DOMMouseScroll",(function(t){return yn(e,t)})),rt(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){at(e,t)||ft(t)},over:function(t){at(e,t)||(!function(e,t){var i=lr(e,t);if(i){var r=document.createDocumentFragment();dr(e,i,r),e.display.dragCursor||(e.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),T(e.display.dragCursor,r)}}(e,t),ft(t))},start:function(t){return function(e,t){if(o&&(!e.state.draggingText||+new Date-Ts<100))ft(t);else if(!at(e,t)&&!Si(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var i=M("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",u&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),u&&i.parentNode.removeChild(i)}}(e,t)},drop:Xr(e,Ms),leave:function(t){at(e,t)||Rs(e)}};var l=t.input.getField();rt(l,"keyup",(function(t){return ro.call(e,t)})),rt(l,"keydown",Xr(e,io)),rt(l,"keypress",Xr(e,no)),rt(l,"focus",(function(t){return vr(e,t)})),rt(l,"blur",(function(t){return yr(e,t)}))}(this),Ns(),Br(this),this.curOp.forceUpdate=!0,Fn(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(P(vr,this),20):yr(this),vo)vo.hasOwnProperty(c)&&vo[c](i,t[c],go);Cr(this),t.finishInit&&t.finishInit(this);for(var h=0;h<_o.length;++h)_o[h](i);zr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}wo.defaults=mo,wo.optionHandlers=vo;var _o=[];function Co(e,t,i,r){var n,s=e.doc;null==i&&(i="add"),"smart"==i&&(s.mode.indent?n=zt(e,t).state:i="prev");var o=e.options.tabSize,a=ae(s,t),l=H(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var c,h=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==i&&((c=s.mode.indent(n,a.text.slice(h.length),a.text))==B||c>150)){if(!r)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>s.first?H(ae(s,t-1).text,null,o):0:"add"==i?c=l+e.options.indentUnit:"subtract"==i?c=l-e.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var u="",d=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/o);p;--p)d+=o,u+="\t";if(d<c&&(u+=K(c-d)),u!=h)return us(s,u,ge(t,0),ge(t,h.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<s.sel.ranges.length;f++){var g=s.sel.ranges[f];if(g.head.line==t&&g.head.ch<h.length){var m=ge(t,h.length);Kn(s,f,new xn(m,m));break}}}wo.defineInitHook=function(e){return _o.push(e)};var ko=null;function So(e){ko=e}function Eo(e,t,i,r,n){var s=e.doc;e.display.shift=!1,r||(r=s.sel);var o,a=e.state.pasteIncoming||"paste"==n,l=Ct(t),c=null;if(a&&r.ranges.length>1)if(ko&&ko.text.join("\n")==t){if(r.ranges.length%ko.text.length==0){c=[];for(var h=0;h<ko.text.length;h++)c.push(s.splitLines(ko.text[h]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(l,(function(e){return[e]})));for(var u=r.ranges.length-1;u>=0;u--){var d=r.ranges[u],p=d.from(),f=d.to();d.empty()&&(i&&i>0?p=ge(p.line,p.ch-i):e.state.overwrite&&!a?f=ge(f.line,Math.min(ae(s,f.line).text.length,f.ch+$(l).length)):ko&&ko.lineWise&&ko.text.join("\n")==t&&(p=f=ge(p.line,0))),o=e.curOp.updateInput;var g={from:p,to:f,text:c?c[u%c.length]:l,origin:n||(a?"paste":e.state.cutIncoming?"cut":"+input")};os(e.doc,g),ui(e,"inputRead",e,g)}t&&!a&&To(e,t),Er(e),e.curOp.updateInput=o,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Lo(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||$r(t,(function(){return Eo(t,i,0,null,"paste")})),!0}function To(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,r=i.ranges.length-1;r>=0;r--){var n=i.ranges[r];if(!(n.head.ch>100||r&&i.ranges[r-1].head.line==n.head.line)){var s=e.getModeAt(n.head),o=!1;if(s.electricChars){for(var a=0;a<s.electricChars.length;a++)if(t.indexOf(s.electricChars.charAt(a))>-1){o=Co(e,n.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(ae(e.doc,n.head.line).text.slice(0,n.head.ch))&&(o=Co(e,n.head.line,"smart"));o&&ui(e,"electricInput",e,n.head.line)}}}function Mo(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var n=e.doc.sel.ranges[r].head.line,s={anchor:ge(n,0),head:ge(n+1,0)};i.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:i}}function Ro(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Ao(){var e=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=M("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Ro(e),t}function Fo(e,t,i,r,n){var s=t,o=i,a=ae(e,t.line);function l(r){var s,o;if(null==(s=n?tt(e.cm,a,t,i):Qe(a,t,i))){if(r||(o=t.line+i)<e.first||o>=e.first+e.size||(t=new ge(o,t.ch,t.sticky),!(a=ae(e,o))))return!1;t=et(n,e.cm,a,t.line,i)}else t=s;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,h="group"==r,u=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(i<0)||l(!d);d=!1){var p=a.text.charAt(t.ch)||"\n",f=ee(p,u)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(!h||d||f||(f="s"),c&&c!=f){i<0&&(i=1,l(),t.sticky="after");break}if(f&&(c=f),i>0&&!l(!d))break}var g=is(e,t,s,o,!0);return ve(s,g)&&(g.hitSide=!0),g}function No(e,t,i,r){var n,s,o=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*ir(e.display),3);n=(i>0?t.bottom:t.top)+i*c}else"line"==r&&(n=i>0?t.bottom+3:t.top-3);for(;(s=Ji(e,a,n)).outside;){if(i<0?n<=0:n>=o.height){s.hitSide=!0;break}n+=5*i}return s}var Io=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new q,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Oo(e,t){var i=Ii(e,t.line);if(!i||i.hidden)return null;var r=ae(e.doc,t.line),n=Fi(i,r,t.line),s=Ze(r,e.doc.direction),o="left";s&&(o=Xe(s,t.ch)%2?"right":"left");var a=qi(n.map,t.ch,o);return a.offset="right"==a.collapse?a.end:a.start,a}function Po(e,t){return t&&(e.bad=!0),e}function Do(e,t,i){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[i]))return Po(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var s=e.display.view[n];if(s.node==r)return Ho(s,t,i)}}function Ho(e,t,i){var r=e.text.firstChild,n=!1;if(!t||!A(r,t))return Po(ge(ue(e.line),0),!0);if(t==r&&(n=!0,t=r.childNodes[i],i=0,!t)){var s=e.rest?$(e.rest):e.line;return Po(ge(ue(s),s.text.length),n)}var o=3==t.nodeType?t:null,a=t;for(o||1!=t.childNodes.length||3!=t.firstChild.nodeType||(o=t.firstChild,i&&(i=o.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var l=e.measure,c=l.maps;function h(t,i,r){for(var n=-1;n<(c?c.length:0);n++)for(var s=n<0?l.map:c[n],o=0;o<s.length;o+=3){var a=s[o+2];if(a==t||a==i){var h=ue(n<0?e.line:e.rest[n]),u=s[o]+r;return(r<0||a!=t)&&(u=s[o+(r?1:0)]),ge(h,u)}}}var u=h(o,a,i);if(u)return Po(u,n);for(var d=a.nextSibling,p=o?o.nodeValue.length-i:0;d;d=d.nextSibling){if(u=h(d,d.firstChild,0))return Po(ge(u.line,u.ch-p),n);p+=d.textContent.length}for(var f=a.previousSibling,g=i;f;f=f.previousSibling){if(u=h(f,f.firstChild,-1))return Po(ge(u.line,u.ch+g),n);g+=f.textContent.length}}Io.prototype.init=function(e){var t=this,i=this,r=i.cm,n=i.div=e.lineDiv;function s(e){if(!at(r,e)){if(r.somethingSelected())So({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Mo(r);So({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,z),r.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=ko.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var o=Ao(),a=o.firstChild;r.display.lineSpace.insertBefore(o,r.display.lineSpace.firstChild),a.value=ko.text.join("\n");var l=document.activeElement;O(a),setTimeout((function(){r.display.lineSpace.removeChild(o),l.focus(),l==n&&i.showPrimarySelection()}),50)}}Ro(n,r.options.spellcheck),rt(n,"paste",(function(e){at(r,e)||Lo(e,r)||a<=11&&setTimeout(Xr(r,(function(){return t.updateFromDOM()})),20)})),rt(n,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),rt(n,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),rt(n,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),rt(n,"touchstart",(function(){return i.forceCompositionEnd()})),rt(n,"input",(function(){t.composing||t.readFromDOMSoon()})),rt(n,"copy",s),rt(n,"cut",s)},Io.prototype.prepareSelection=function(){var e=ur(this.cm,!1);return e.focus=this.cm.state.focused,e},Io.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Io.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,r=t.doc.sel.primary(),n=r.from(),s=r.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||s.line<t.display.viewFrom)e.removeAllRanges();else{var o=Do(t,e.anchorNode,e.anchorOffset),a=Do(t,e.focusNode,e.focusOffset);if(!o||o.bad||!a||a.bad||0!=me(xe(o,a),n)||0!=me(be(o,a),s)){var l=t.display.view,c=n.line>=t.display.viewFrom&&Oo(t,n)||{node:l[0].measure.map[2],offset:0},h=s.line<t.display.viewTo&&Oo(t,s);if(!h){var u=l[l.length-1].measure,d=u.maps?u.maps[u.maps.length-1]:u.map;h={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(c&&h){var p,f=e.rangeCount&&e.getRangeAt(0);try{p=S(c.node,c.offset,h.offset,h.node)}catch(e){}p&&(!i&&t.state.focused?(e.collapse(c.node,c.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),f&&null==e.anchorNode?e.addRange(f):i&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Io.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Io.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors),T(this.cm.display.selectionDiv,e.selection)},Io.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Io.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return A(this.div,t)},Io.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Io.prototype.blur=function(){this.div.blur()},Io.prototype.getField=function(){return this.div},Io.prototype.supportsTouch=function(){return!0},Io.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():$r(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Io.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Io.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;if(m&&h&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=Do(t,e.anchorNode,e.anchorOffset),r=Do(t,e.focusNode,e.focusOffset);i&&r&&$r(t,(function(){Yn(t.doc,_n(i,r),z),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Io.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,i,r=this.cm,n=r.display,s=r.doc.sel.primary(),o=s.from(),a=s.to();if(0==o.ch&&o.line>r.firstLine()&&(o=ge(o.line-1,ae(r.doc,o.line-1).length)),a.ch==ae(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=ge(a.line+1,0)),o.line<n.viewFrom||a.line>n.viewTo-1)return!1;o.line==n.viewFrom||0==(e=cr(r,o.line))?(t=ue(n.view[0].line),i=n.view[0].node):(t=ue(n.view[e].line),i=n.view[e-1].node.nextSibling);var l,c,h=cr(r,a.line);if(h==n.view.length-1?(l=n.viewTo-1,c=n.lineDiv.lastChild):(l=ue(n.view[h+1].line)-1,c=n.view[h+1].node.previousSibling),!i)return!1;for(var u=r.doc.splitLines(function(e,t,i,r,n){var s="",o=!1,a=e.doc.lineSeparator();function l(){o&&(s+=a,o=!1)}function c(e){e&&(l(),s+=e)}function h(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(null!=i)return void c(i||t.textContent.replace(/\u200b/g,""));var s,u=t.getAttribute("cm-marker");if(u){var d=e.findMarks(ge(r,0),ge(n+1,0),(g=+u,function(e){return e.id==g}));return void(d.length&&(s=d[0].find())&&c(le(e.doc,s.from,s.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p)$/i.test(t.nodeName);p&&l();for(var f=0;f<t.childNodes.length;f++)h(t.childNodes[f]);p&&(o=!0)}else 3==t.nodeType&&c(t.nodeValue);var g}for(;h(t),t!=i;)t=t.nextSibling;return s}(r,i,c,t,l)),d=le(r.doc,ge(t,0),ge(l,ae(r.doc,l).text.length));u.length>1&&d.length>1;)if($(u)==$(d))u.pop(),d.pop(),l--;else{if(u[0]!=d[0])break;u.shift(),d.shift(),t++}for(var p=0,f=0,g=u[0],m=d[0],v=Math.min(g.length,m.length);p<v&&g.charCodeAt(p)==m.charCodeAt(p);)++p;for(var y=$(u),b=$(d),x=Math.min(y.length-(1==u.length?p:0),b.length-(1==d.length?p:0));f<x&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==u.length&&1==d.length&&t==o.line)for(;p&&p>o.ch&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)p--,f++;u[u.length-1]=y.slice(0,y.length-f).replace(/^\u200b+/,""),u[0]=u[0].slice(p).replace(/\u200b+$/,"");var w=ge(t,p),_=ge(l,d.length?$(d).length-f:0);return u.length>1||u[0]||me(w,_)?(us(r.doc,u,w,_,"+input"),!0):void 0},Io.prototype.ensurePolled=function(){this.forceCompositionEnd()},Io.prototype.reset=function(){this.forceCompositionEnd()},Io.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Io.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Io.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||$r(this.cm,(function(){return Jr(e.cm)}))},Io.prototype.setUneditable=function(e){e.contentEditable="false"},Io.prototype.onKeyPress=function(e){0!=e.charCode&&(e.preventDefault(),this.cm.isReadOnly()||Xr(this.cm,Eo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Io.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Io.prototype.onContextMenu=function(){},Io.prototype.resetPosition=function(){},Io.prototype.needsContentAttribute=!0;var qo=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new q,this.hasSelection=!1,this.composing=null};qo.prototype.init=function(e){var t=this,i=this,r=this.cm,n=this.wrapper=Ao(),s=this.textarea=n.firstChild;function l(e){if(!at(r,e)){if(r.somethingSelected())So({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Mo(r);So({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,z):(i.prevInput="",s.value=t.text.join("\n"),O(s))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(n,e.wrapper.firstChild),g&&(s.style.width="0px"),rt(s,"input",(function(){o&&a>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()})),rt(s,"paste",(function(e){at(r,e)||Lo(e,r)||(r.state.pasteIncoming=!0,i.fastPoll())})),rt(s,"cut",l),rt(s,"copy",l),rt(e.scroller,"paste",(function(t){Si(e,t)||at(r,t)||(r.state.pasteIncoming=!0,i.focus())})),rt(e.lineSpace,"selectstart",(function(t){Si(e,t)||ut(t)})),rt(s,"compositionstart",(function(){var e=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),rt(s,"compositionend",(function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)}))},qo.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=ur(e);if(e.options.moveInputWithCursor){var n=Xi(e,i.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+o.top-s.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+o.left-s.left))}return r},qo.prototype.showSelection=function(e){var t=this.cm.display;T(t.cursorDiv,e.cursors),T(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},qo.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&O(this.textarea),o&&a>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",o&&a>=9&&(this.hasSelection=null))}},qo.prototype.getField=function(){return this.textarea},qo.prototype.supportsTouch=function(){return!1},qo.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||F()!=this.textarea))try{this.textarea.focus()}catch(e){}},qo.prototype.blur=function(){this.textarea.blur()},qo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},qo.prototype.receivedFocus=function(){this.slowPoll()},qo.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},qo.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function i(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,i))}))},qo.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||kt(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==r&&!t.somethingSelected())return!1;if(o&&a>=9&&this.hasSelection===n||y&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var s=n.charCodeAt(0);if(8203!=s||r||(r="â€‹"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,n.length);l<c&&r.charCodeAt(l)==n.charCodeAt(l);)++l;return $r(t,(function(){Eo(t,n.slice(l),r.length-l,null,e.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},qo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},qo.prototype.onKeyPress=function(){o&&a>=9&&(this.hasSelection=null),this.fastPoll()},qo.prototype.onContextMenu=function(e){var t=this,i=t.cm,r=i.display,n=t.textarea,s=lr(i,e),c=r.scroller.scrollTop;if(s&&!u){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(s)&&Xr(i,Yn)(i.doc,_n(s),z);var h=n.style.cssText,d=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var p,f=t.wrapper.getBoundingClientRect();if(n.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(p=window.scrollY),r.input.focus(),l&&window.scrollTo(null,p),r.input.reset(),i.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=!0,r.selForContextMenu=i.doc.sel,clearTimeout(r.detectingSelectAll),o&&a>=9&&g(),C){ft(e);rt(window,"mouseup",(function e(){st(window,"mouseup",e),setTimeout(m,20)}))}else setTimeout(m,50)}function g(){if(null!=n.selectionStart){var e=i.somethingSelected(),s="â€‹"+(e?n.value:"");n.value="â‡š",n.value=s,t.prevInput=e?"":"â€‹",n.selectionStart=1,n.selectionEnd=s.length,r.selForContextMenu=i.doc.sel}}function m(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=d,n.style.cssText=h,o&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=n.selectionStart){(!o||o&&a<9)&&g();var e=0;r.detectingSelectAll=setTimeout((function s(){r.selForContextMenu==i.doc.sel&&0==n.selectionStart&&n.selectionEnd>0&&"â€‹"==t.prevInput?Xr(i,ns)(i):e++<10?r.detectingSelectAll=setTimeout(s,500):(r.selForContextMenu=null,r.input.reset())}),200)}}},qo.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},qo.prototype.setUneditable=function(){},qo.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function i(i,r,n,s){e.defaults[i]=r,n&&(t[i]=s?function(e,t,i){i!=go&&n(e,t,i)}:n)}e.defineOption=i,e.Init=go,i("value","",(function(e,t){return e.setValue(t)}),!0),i("mode",null,(function(e,t){e.doc.modeOption=t,Ln(e)}),!0),i("indentUnit",2,Ln,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,(function(e){Tn(e),Ui(e),Jr(e)}),!0),i("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var i=[],r=e.doc.first;e.doc.iter((function(e){for(var n=0;;){var s=e.text.indexOf(t,n);if(-1==s)break;n=s+t.length,i.push(ge(r,s))}r++}));for(var n=i.length-1;n>=0;n--)us(e.doc,t,i[n],ge(i[n].line,i[n].ch+t.length))}})),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,(function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=go&&e.refresh()})),i("specialCharPlaceholder",ii,(function(e){return e.refresh()}),!0),i("electricChars",!0),i("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),i("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),i("rtlMoveVisually",!x),i("wholeLineUpdateBefore",!0),i("theme","default",(function(e){fo(e),yo(e)}),!0),i("keyMap","default",(function(e,t,i){var r=js(t),n=i!=go&&js(i);n&&n.detach&&n.detach(e,r),r.attach&&r.attach(e,n||null)})),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,xo,!0),i("gutters",[],(function(e){pn(e.options),yo(e)}),!0),i("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?sr(e.display)+"px":"0",e.refresh()}),!0),i("coverGutterNextToScrollbar",!1,(function(e){return Pr(e)}),!0),i("scrollbarStyle","native",(function(e){qr(e),Pr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),i("lineNumbers",!1,(function(e){pn(e.options),yo(e)}),!0),i("firstLineNumber",1,yo,!0),i("lineNumberFormatter",(function(e){return e}),yo,!0),i("showCursorWhenSelecting",!1,hr,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("readOnly",!1,(function(e,t){"nocursor"==t&&(yr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),i("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),i("dragDrop",!0,bo),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,hr,!0),i("singleCursorHeightPerLine",!0,hr,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,Tn,!0),i("addModeClass",!1,Tn,!0),i("pollInterval",100),i("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),i("historyEventDelay",1250),i("viewportMargin",10,(function(e){return e.refresh()}),!0),i("maxHighlightLength",1e4,Tn,!0),i("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),i("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),i("autofocus",null),i("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0)}(wo),function(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,i){var r=this.options,n=r[e];r[e]==i&&"mode"!=e||(r[e]=i,t.hasOwnProperty(e)&&Xr(this,t[e])(this,i,n),ot(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](js(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Yr((function(t,i){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,i){for(var r=0,n=i(t);r<e.length&&i(e[r])<=n;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:i&&i.opaque,priority:i&&i.priority||0},(function(e){return e.priority})),this.state.modeGen++,Jr(this)})),removeOverlay:Yr((function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var r=t[i].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(i,1),this.state.modeGen++,void Jr(this)}})),indentLine:Yr((function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),pe(this.doc,e)&&Co(this,e,t,i)})),indentSelection:Yr((function(e){for(var t=this.doc.sel.ranges,i=-1,r=0;r<t.length;r++){var n=t[r];if(n.empty())n.head.line>i&&(Co(this,n.head.line,e,!0),i=n.head.line,r==this.doc.sel.primIndex&&Er(this));else{var s=n.from(),o=n.to(),a=Math.max(i,s.line);i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=a;l<i;++l)Co(this,l,e);var c=this.doc.sel.ranges;0==s.ch&&t.length==c.length&&c[r].from().ch>0&&Kn(this.doc,r,new xn(s,c[r].to()),z)}}})),getTokenAt:function(e,t){return Kt(this,e,t)},getLineTokens:function(e,t){return Kt(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=_e(this.doc,e);var t,i=Bt(this,ae(this.doc,e.line)),r=0,n=(i.length-1)/2,s=e.ch;if(0==s)t=i[2];else for(;;){var o=r+n>>1;if((o?i[2*o-1]:0)>=s)n=o;else{if(!(i[2*o+1]<s)){t=i[2*o+2];break}r=o+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(t).state).mode:i},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!i.hasOwnProperty(t))return r;var n=i[t],s=this.getModeAt(e);if("string"==typeof s[t])n[s[t]]&&r.push(n[s[t]]);else if(s[t])for(var o=0;o<s[t].length;o++){var a=n[s[t][o]];a&&r.push(a)}else s.helperType&&n[s.helperType]?r.push(n[s.helperType]):n[s.name]&&r.push(n[s.name]);for(var l=0;l<n._global.length;l++){var c=n._global[l];c.pred(s,this)&&-1==W(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var i=this.doc;return zt(this,(e=we(i,null==e?i.first+i.size-1:e))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary();return Xi(this,null==e?i.head:"object"==typeof e?_e(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return $i(this,_e(this.doc,e),t||"page")},coordsChar:function(e,t){return Ji(this,(e=Ki(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Ki(this,{top:e,left:0},t||"page").top,de(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,i){var r,n=!1;if("number"==typeof e){var s=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>s&&(e=s,n=!0),r=ae(this.doc,e)}else r=e;return ji(this,r,{top:0,left:0},t||"page",i||n).top+(n?this.doc.height-Ve(r):0)},defaultTextHeight:function(){return ir(this.display)},defaultCharWidth:function(){return rr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,r,n){var s,o,a,l=this.display,c=(e=Xi(this,_e(this.doc,e))).bottom,h=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var u=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=u&&(c=e.bottom),h+t.offsetWidth>d&&(h=d-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==n?(h=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?h=0:"middle"==n&&(h=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=h+"px"),i&&(s=this,o={left:h,top:c,right:h+t.offsetWidth,bottom:c+t.offsetHeight},null!=(a=kr(s,o)).scrollTop&&Rr(s,a.scrollTop),null!=a.scrollLeft&&Fr(s,a.scrollLeft))},triggerOnKeyDown:Yr(io),triggerOnKeyPress:Yr(no),triggerOnKeyUp:ro,triggerOnMouseDown:Yr(lo),execCommand:function(e){if($s.hasOwnProperty(e))return $s[e].call(null,this)},triggerElectric:Yr((function(e){To(this,e)})),findPosH:function(e,t,i,r){var n=1;t<0&&(n=-1,t=-t);for(var s=_e(this.doc,e),o=0;o<t&&!(s=Fo(this.doc,s,n,i,r)).hitSide;++o);return s},moveH:Yr((function(e,t){var i=this;this.extendSelectionsBy((function(r){return i.display.shift||i.doc.extend||r.empty()?Fo(i.doc,r.head,e,t,i.options.rtlMoveVisually):e<0?r.from():r.to()}),G)})),deleteH:Yr((function(e,t){var i=this.doc.sel,r=this.doc;i.somethingSelected()?r.replaceSelection("",null,"+delete"):Ks(this,(function(i){var n=Fo(r,i.head,e,t,!1);return e<0?{from:n,to:i.head}:{from:i.head,to:n}}))})),findPosV:function(e,t,i,r){var n=1,s=r;t<0&&(n=-1,t=-t);for(var o=_e(this.doc,e),a=0;a<t;++a){var l=Xi(this,o,"div");if(null==s?s=l.left:l.left=s,(o=No(this,l,n,i)).hitSide)break}return o},moveV:Yr((function(e,t){var i=this,r=this.doc,n=[],s=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(o){if(s)return e<0?o.from():o.to();var a=Xi(i,o.head,"div");null!=o.goalColumn&&(a.left=o.goalColumn),n.push(a.left);var l=No(i,a,e,t);return"page"==t&&o==r.sel.primary()&&Sr(i,$i(i,l,"div").top-a.top),l}),G),n.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=n[o]})),findWordAt:function(e){var t=ae(this.doc,e.line).text,i=e.ch,r=e.ch;if(t){var n=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!i?++r:--i;for(var s=t.charAt(i),o=ee(s,n)?function(e){return ee(e,n)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};i>0&&o(t.charAt(i-1));)--i;for(;r<t.length&&o(t.charAt(r));)++r}return new xn(ge(e.line,i),ge(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?N(this.display.cursorDiv,"CodeMirror-overwrite"):E(this.display.cursorDiv,"CodeMirror-overwrite"),ot(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==F()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Yr((function(e,t){Lr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Mi(this)-this.display.barHeight,width:e.scrollWidth-Mi(this)-this.display.barWidth,clientHeight:Ai(this),clientWidth:Ri(this)}},scrollIntoView:Yr((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Tr(e),e.curOp.scrollToPos=t}(this,e):Mr(this,e.from,e.to,e.margin)})),setSize:Yr((function(e,t){var i=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&zi(this);var n=this.display.viewFrom;this.doc.iter(n,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Qr(i,n,"widget");break}++n})),this.curOp.forceUpdate=!0,ot(this,"refresh",this)})),operation:function(e){return $r(this,e)},startOperation:function(){return Br(this)},endOperation:function(){return zr(this)},refresh:Yr((function(){var e=this.display.cachedTextHeight;Jr(this),this.curOp.forceUpdate=!0,Ui(this),Lr(this,this.doc.scrollLeft,this.doc.scrollTop),hn(this),(null==e||Math.abs(e-ir(this.display))>.5)&&ar(this),ot(this,"refresh",this)})),swapDoc:Yr((function(e){var t=this.doc;return t.cm=null,Fn(this,e),Ui(this),this.display.input.reset(),Lr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ui(this,"swapDoc",this,t),t})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ht(e),e.registerHelper=function(t,r,n){i.hasOwnProperty(t)||(i[t]=e[t]={_global:[]}),i[t][r]=n},e.registerGlobalHelper=function(t,r,n,s){e.registerHelper(t,r,s),i[t]._global.push({pred:n,val:s})}}(wo);var Wo="iter insert remove copy getEditor constructor".split(" ");for(var Bo in Ls.prototype)Ls.prototype.hasOwnProperty(Bo)&&W(Wo,Bo)<0&&(wo.prototype[Bo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ls.prototype[Bo]));return ht(Ls),wo.inputStyles={textarea:qo,contenteditable:Io},wo.defineMode=function(e){wo.defaults.mode||"null"==e||(wo.defaults.mode=e),Mt.apply(this,arguments)},wo.defineMIME=function(e,t){Tt[e]=t},wo.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),wo.defineMIME("text/plain","null"),wo.defineExtension=function(e,t){wo.prototype[e]=t},wo.defineDocExtension=function(e,t){Ls.prototype[e]=t},wo.fromTextArea=function(e,t){if((t=t?D(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var i=F();t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}function r(){e.value=a.getValue()}var n;if(e.form&&(rt(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var s=e.form;n=s.submit;try{var o=s.submit=function(){r(),s.submit=n,s.submit(),s.submit=o}}catch(e){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(st(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=n))}},e.style.display="none";var a=wo((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a},function(e){e.off=st,e.on=rt,e.wheelEventPixels=vn,e.Doc=Ls,e.splitLines=Ct,e.countColumn=H,e.findColumn=V,e.isWordChar=Q,e.Pass=B,e.signal=ot,e.Line=Yt,e.changeEnd=Cn,e.scrollbarModel=Hr,e.Pos=ge,e.cmpPos=me,e.modes=Lt,e.mimeModes=Tt,e.resolveMode=Rt,e.getMode=At,e.modeExtensions=Ft,e.extendMode=Nt,e.copyState=It,e.startState=Pt,e.innerMode=Ot,e.commands=$s,e.keyMap=qs,e.keyName=Vs,e.isModifierKey=Us,e.lookupKey=zs,e.normalizeKeyMap=Bs,e.StringStream=Dt,e.SharedTextMarker=Cs,e.TextMarker=ws,e.LineWidget=ys,e.e_preventDefault=ut,e.e_stopPropagation=dt,e.e_stop=ft,e.addClass=N,e.contains=A,e.rmClass=E,e.keyNames=Os}(wo),wo.version="5.28.0",wo})),
/*!
   * clipboard.js v1.7.1
   * https://zenorocha.github.io/clipboard.js
   *
   * Licensed MIT Â© Zeno Rocha
   */
function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=e()}}((function(){return function e(t,i,r){function n(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[o]={exports:{}};t[o][0].call(h.exports,(function(e){var i=t[o][1][e];return n(i||e)}),h,h.exports,e,t,i,r)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,t,i){if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},{}],2:[function(e,t,i){var r=e("./closest");function n(e,t,i,n){return function(i){i.delegateTarget=r(i.target,t),i.delegateTarget&&n.call(e,i)}}t.exports=function(e,t,i,r,s){var o=n.apply(this,arguments);return e.addEventListener(i,o,s),{destroy:function(){e.removeEventListener(i,o,s)}}}},{"./closest":1}],3:[function(e,t,i){i.node=function(e){return void 0!==e&&(e instanceof HTMLElement||e instanceof SVGElement)&&1===e.nodeType},i.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||i.node(e[0]))},i.string=function(e){return"string"==typeof e||e instanceof String},i.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,i){var r=e("./is"),n=e("delegate");t.exports=function(e,t,i){if(!e&&!t&&!i)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(i))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,i){return e.addEventListener(t,i),{destroy:function(){e.removeEventListener(t,i)}}}(e,t,i);if(r.nodeList(e))return function(e,t,i){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,i)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,i)}))}}}(e,t,i);if(r.string(e))return function(e,t,i){return n(document.body,e,t,i)}(e,t,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(e,t,i){t.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var i=e.hasAttribute("readonly");i||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),i||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),n=document.createRange();n.selectNodeContents(e),r.removeAllRanges(),r.addRange(n),t=r.toString()}return t}},{}],6:[function(e,t,i){function r(){}r.prototype={on:function(e,t,i){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){var r=this;function n(){r.off(e,n),t.apply(i,arguments)}return n._=t,this.on(e,n,i)},emit:function(e){for(var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),r=0,n=i.length;r<n;r++)i[r].fn.apply(i[r].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),r=i[e],n=[];if(r&&t)for(var s=0,o=r.length;s<o;s++)r[s].fn!==t&&r[s].fn._!==t&&n.push(r[s]);return n.length?i[e]=n:delete i[e],this}},t.exports=r},{}],7:[function(e,t,i){!function(r,n){if(void 0!==i)n(t,e("select"));else{var s={exports:{}};n(s,r.select),r.clipboardAction=s.exports}}(this,(function(e,t){var i,r=(i=t)&&i.__esModule?i:{default:i};var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return s(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":n(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=o}))},{select:5}],8:[function(e,t,i){!function(r,n){if(void 0!==i)n(t,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var s={exports:{}};n(s,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=s.exports}}(this,(function(e,t,i,r){var n=a(t),s=a(i),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var c=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var h=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(i),r.listenClick(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===l(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,o.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new n.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,i=!!document.queryCommandSupported;return t.forEach((function(e){i=i&&!!document.queryCommandSupported(e)})),i}}]),t}(s.default);function u(e,t){var i="data-clipboard-"+e;if(t.hasAttribute(i))return t.getAttribute(i)}e.exports=h}))},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)})),window._native=(e={},{carbon:function(e){var t=document.createElement("script");return t.src="//cdn.carbonads.com/carbon.js?serve="+e.carbonZoneKey+"&placement="+e.placement,t.id="_carbonads_js",t},init:function(t,i){var r,n;n={carbonZoneKey:"",fallback:"",ignore:"false",placement:"",prefix:"native",targetClass:"native-ad"};var s="https://srv.buysellads.com/ads/"+t+".json?callback=_native_go";""!==(e=void 0===(r=i)?n:(Object.keys(n).forEach((function(e,t){void 0===r[e]&&(r[e]=n[e])})),r)).placement&&(s+="&segment=placement:"+e.placement),"true"===e.ignore&&(s+="&ignore=yes");var o=document.createElement("script");o.src=s,document.getElementsByTagName("head")[0].appendChild(o)},options:function(){return e},pixel:function(e,t){var i="";return e&&e.split("||").forEach((function(e,r){i+='<img src="'+e.replace("[timestamp]",t)+'" style="display:none;" height="0" width="0" />'})),i},sanitize:function(e){return e.filter((function(e){return Object.keys(e).length>0})).filter((function(e){return e.hasOwnProperty("statlink")}))}}),window._native_go=function(e){var t=_native.options(),i=_native.sanitize(e.ads),r=document.querySelectorAll("."+t.targetClass);i.length<1?r.forEach((function(e,i){var r=document.getElementsByClassName(t.targetClass)[i];""===t.fallback&&""===t.carbonZoneKey||r.setAttribute("data-state","visible"),r.innerHTML=t.fallback,""!==t.carbonZoneKey&&r.appendChild(_native.carbon(t))})):r.forEach((function(e,r){var n=document.getElementsByClassName(t.targetClass)[r],s=n.innerHTML||"",o=t.prefix,a=i[r];if(a&&e){var l=s.replace(new RegExp("#"+o+"_bg_color#","g"),a.backgroundColor).replace(new RegExp("#"+o+"_bg_color_hover#","g"),a.backgroundHoverColor).replace(new RegExp("#"+o+"_company#","g"),a.company).replace(new RegExp("#"+o+"_cta#","g"),a.callToAction).replace(new RegExp("#"+o+"_cta_bg_color#","g"),a.ctaBackgroundColor).replace(new RegExp("#"+o+"_cta_bg_color_hover#","g"),a.ctaBackgroundHoverColor).replace(new RegExp("#"+o+"_cta_color#","g"),a.ctaTextColor).replace(new RegExp("#"+o+"_cta_color_hover#","g"),a.ctaTextColorHover).replace(new RegExp("#"+o+"_desc#","g"),a.description).replace(new RegExp("#"+o+"_index#","g"),o+"-"+a.i).replace(new RegExp("#"+o+"_img#","g"),a.image).replace(new RegExp("#"+o+"_small_img#","g"),a.smallImage).replace(new RegExp("#"+o+"_link#","g"),a.statlink).replace(new RegExp("#"+o+"_logo#","g"),a.logo).replace(new RegExp("#"+o+"_color#","g"),a.textColor).replace(new RegExp("#"+o+"_color_hover#","g"),a.textColorHover).replace(new RegExp("#"+o+"_title#","g"),a.title);n.innerHTML=l+_native.pixel(a.pixel,a.timestamp),n.setAttribute("data-state","visible")}else n.innerHTML=""}))};class t{constructor(e,t,i){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}preventDefault(){this.defaultPrevented=this.cancelable&&!0}stopPropagation(){this.propagationStopped=!0}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}remove(){this.removed=!0}clone(){return new t(this.type,this.bubbles,this.cancelable)}set(e){for(let t in e)this[t]=e[t];return this}toString(){return"[Event (type="+this.type+")]"}}class i{constructor(){this._listeners=null,this._captureListeners=null,this.off=this.removeEventListener}static EventDispatcher(e){e.addEventListener=p.addEventListener,e.on=p.on,e.removeEventListener=e.off=p.removeEventListener,e.removeAllEventListeners=p.removeAllEventListeners,e.hasEventListener=p.hasEventListener,e.dispatchEvent=p.dispatchEvent,e._dispatchEvent=p._dispatchEvent,e.willTrigger=p.willTrigger}addEventListener(e,t,i){let r;r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};let n=r[e];return n&&this.removeEventListener(e,t,i),n=r[e],n?n.push(t):r[e]=[t],t}on(e,t,i,r,n,s){return t.handleEvent&&(i=i||t,t=t.handleEvent),i=i||this,this.addEventListener(e,(function(e){t.call(i,e,n),r&&e.remove()}),s)}removeEventListener(e,t,i){let r=i?this._captureListeners:this._listeners;if(!r)return;let n=r[e];if(n)for(let i=0,s=n.length;i<s;i++)if(n[i]===t){1==s?delete r[e]:n.splice(i,1);break}}removeAllEventListeners(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null}dispatchEvent(e,i,r){if("string"==typeof e){let n=this._listeners;if(!(i||n&&n[e]))return!0;e=new t(e,i,r)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){let t=this,i=[t];for(;t.parent;)i.push(t=t.parent);let r,n=i.length;for(r=n-1;r>=0&&!e.propagationStopped;r--)i[r]._dispatchEvent(e,1+(0==r));for(r=1;r<n&&!e.propagationStopped;r++)i[r]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented}hasEventListener(e){let t=this._listeners,i=this._captureListeners;return!!(t&&t[e]||i&&i[e])}willTrigger(e){let t=this;for(;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1}toString(){return"[EventDispatcher]"}_dispatchEvent(e,t){let i,r,n=t<=2?this._captureListeners:this._listeners;if(e&&n&&(r=n[e.type])&&(i=r.length)){try{e.currentTarget=this}catch(e){}try{e.eventPhase=0|t}catch(e){}e.removed=!1,r=r.slice();for(let n=0;n<i&&!e.immediatePropagationStopped;n++){let i=r[n];i.handleEvent?i.handleEvent(e):i(e),e.removed&&(this.off(e.type,i,1==t),e.removed=!1)}}2===t&&this._dispatchEvent(e,2.1)}}let r={},n=r;n.query=function(e,t=document.body){return">"===e[0]?n._childQuery(e,t,n.query):t.querySelector(e)},n.queryAll=function(e,t=document.body){return">"===e[0]?n._childQuery(e,t,n.queryAll):t.querySelectorAll(e)},n.removeClass=function(e,t){if(n._runOnNodeList(n.removeClass,e,t))return e;if(t instanceof RegExp){let i=(e.getAttribute("class")||"").split(" "),r=t;e.setAttribute("class",i.filter(e=>!r.test(e)).join(" "))}else{let i=e.classList;i.remove.apply(i,t.split(" "))}return e},n.addClass=function(e,t){if(n._runOnNodeList(n.addClass,e,t))return e;n.removeClass(e,t);let i=t.split(" ");for(let t=0;t<i.length;t++)e.classList.add(i[t]);return e},n.toggleClass=function(e,t,i){if(n._runOnNodeList(n.toggleClass,e,t,i))return e;let r=n.hasClass(e,t);if(null==i)i=!r;else if(i===r)return;i?n.addClass(e,t):n.removeClass(e,t)},n.hasClass=function(e,t){return!!(e.getAttribute("class")||"").match(new RegExp("\\b\\s?"+t+"\\b","g"))},n.swapClass=function(e,t,i){return n.removeClass(e,t),n.addClass(e,i),e},n.remove=function(e){return n._runOnNodeList(n.remove,e)||(e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)),e},n.on=function(e,t,i){if(n._runOnNodeList(n.on,e,t,i))return e;e.addEventListener(t,i)},n.off=function(e,t,i){if(n._runOnNodeList(n.off,e,t,i))return e;e.removeEventListener(t,i)},n.empty=function(e){if(n._runOnNodeList(n.empty,e))return e;for(;e.firstChild;)e.removeChild(e.firstChild);return e},n.create=function(e,t,i,r){let n=document.createElement(e||"div");return t&&(n.className=t),i&&(i instanceof HTMLElement?n.appendChild(i):n.innerHTML=i),r&&r.appendChild(n),n},n.getEl=function(e,t){return e instanceof HTMLElement||!e?e:n.query(e,t)},n.togglePanel=function(e,t,i,r){let s,o=n.getEl(t,e),a=n.getEl(i,e),l=!n.hasClass(e,"closed");if((r=void 0===r?!l:!!r)!==l&&(r?(n.removeClass(e,"closed"),s=a,a=o,o=s):n.addClass(e,"closed"),o&&(o.style.display="none"),a)){let t=function t(i){i.target===e&&(a.style.display="flex",e.removeEventListener("transitionend",t))};e.addEventListener("transitionend",t)}},n.transition=function(e,t,i){let r=t=>{t.target===e&&(e.removeEventListener("transition",r),i())};e.addEventListener("transitionend",r),n.addClass(e,t)},n.template=function(e,...t){return i=>{let r=e[0];for(let n=0,s=t.length;n<s;n++)r+=i[t[n]]+e[n+1];return r}},n.getCSSValue=function(e,t){let i=n.create("div",e);i.style.display="none",i.id="export",document.body.appendChild(i);let r=window.getComputedStyle(i).getPropertyValue(t);return n.remove(i),r},n._runOnNodeList=function(e,t,...i){if(!t)return!0;if(void 0===t.length)return!1;for(let n=0,s=t.length;n<s;n++)e.call(r,t[n],...i);return!0},n._childQuery=function(e,t,i){t.id||(t.id="___tmp_id");let r=i("#"+t.id+" "+e,t.parentNode);return"___tmp_id"===t.id&&(t.id=""),r};let s={prepMenuContent:function(e,t){t.__next_id||(t.__next_id=1);let i=e.kids;for(let r=0,n=i.length;r<n;r++){let n=i[r];n.id||(n.id="__id_"+t.__next_id++),t[n.id]=n,n.parent=e,n.kids&&s.prepMenuContent(n,t)}return e},find:function(e,t){for(let i=0,r=e.length;i<r;i++)if(t(e[i]))return e[i]},findIndex:function(e,t){for(let i=0,r=e.length;i<r;i++)if(t(e[i]))return i;return-1},copy:function(e,t){for(let i in t)e[i]=t[i];return e},clone:function(e){return JSON.parse(JSON.stringify(e))},searchRank:function(e,t){let i=s.searchTest;return t=t.toLowerCase(),e.access?i((e.keywords||"")+" "+(e.name||""),t,16)+i((e.description||"")+" "+(e.author||""),t,8):i(e.token,t,16)+i((e.id||"")+" "+(e.label||""),t,8)+i((e.desc||"")+" "+(e.ext||""),t,4)},searchTest:function(e,t,i=1){return e&&-1!==e.toLowerCase().indexOf(t)?i:0},htmlSafe:function(e){return null==e?"":(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},shorten:function(e,t,i,r=""){if(!e)return e;let n=t>0&&e.length>t;return n&&(e=e.substr(0,t-1)),i&&(e=s.htmlSafe(e)),n?e+(r&&"<"+r+">")+"â€¦"+(r&&"</"+r+">"):e},unescSubstStr:function(e){return e?e.replace(s.SUBST_ESC_RE,(e,t,i)=>s.SUBST_ESC_CHARS[t]||String.fromCharCode(parseInt(i,16))):""},getRegExp:function(e){let t=e.match(/^\/(.+)\/([a-z]+)?$/),i=null;try{i=t?new RegExp(t[1],t[2]||""):new RegExp(e,"g")}catch(e){}return i},decomposeRegEx:function(e,t="/"){let i=new RegExp("^"+t+"(.*)"+t+"([igmsuUxy]*)$").exec(e);return i?{source:i[1],flags:i[2]}:{source:e,flags:"g"}},isMac:function(){return!!navigator.userAgent.match(/Mac\sOS/i)},getCtrlKey:function(){return s.isMac()?"cmd":"ctrl"},now:function(){return window.performance?performance.now():Date.now()},getUrlParams:function(){let e,t=/([^&=]+)=?([^&]*)/g,i={},r=window.location.search.substr(1).replace(/\+/g," ");for(;e=t.exec(r);)i[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return i}},o={};s.defer=function(e,t,i=1){clearTimeout(o[t]),null!==e?o[t]=setTimeout(()=>{delete o[t],e()},i):delete o[t]},s.getHashCode=function(e){let t,i=0,r=e.length;for(t=0;t<r;t++)i=(i<<5)-i+e.charCodeAt(t)|0;return i},s.getPatternURL=function(e){let t=s.isLocal?"?id=":"/";return window.location.origin+t+(e&&e.id||"")},s.isLocal="localhost"===window.location.hostname,s.getPatternURLStr=function(e){if(!e||!e.id)return null;let t=s.isLocal?"?id=":"/";return window.location.host+t+e.id},s.getForkName=function(e){let t=/ ?\(fork ?(\d*)\)$/.exec(e);if(t){let i=1*(t[1]||1)+1;return e.substr(0,t.index)+" (fork "+i+")"}return e+" (fork)"},s.SUBST_ESC_CHARS={n:"\n",r:"\r",t:"\t","\\":"\\"},s.SUBST_ESC_RE=/\\([nrt\\]|u([A-Z0-9]{4}))/gi;class a{constructor(e,t=!1){this.el=r.remove(e),this.transition=t,this.contentEl=r.query(".content",e),this.tipEl=r.query(".tip",e),this.hideF=e=>Date.now()>this._showT&&this.handleBodyClick(e),this.curId=null}toggle(e,t,i,r,n,s){if(e===this.curId)return this.hide(e);this.show(e,t,i,r,n,s)}toggleOn(e,t,i,n,s){if(e===this.curId)return this.hide(e);this.showOn(e,t,i,n,s),this.toggleEl=i,r.addClass(i,"selected")}hide(e){if(e&&this.curId!==e)return;let t=this.el,i=t.style;r.empty(r.query(".content",r.remove(t))),r.removeClass(t,"flipped"),document.body.removeEventListener("mousedown",this.hideF),this.toggleEl&&(r.removeClass(this.toggleEl,"selected"),this.toggleEl=null),i.left=i.top="0",i.width="",this.transition&&(i.opacity=0,i.marginTop="-0.25em"),this.curId=null}show(e,t,i,n,s=!1,o=0){if(this.hide(),!t)return;let a=this.el,l=a.style,c=this.contentEl,h=document.body;t instanceof HTMLElement?c.appendChild(t):c.innerHTML=t,s&&(this._showT=Date.now()+30,h.addEventListener("mousedown",this.hideF)),h.appendChild(a);let u=window.innerHeight,d=window.innerWidth,p=a.getBoundingClientRect(),f=p.right-p.left,g=0;n+(p.bottom-p.top)>u-8&&(r.addClass(a,"flipped"),n-=o),i-f/2<8?g=8-i+f/2:i+f/2>d-8&&(g=d-8-i-f/2),this.tipEl.style.marginRight=2*Math.max(-f/2+10,Math.min(f/2-10,g))+"px",l.width=2*Math.ceil(f/2)+"px",l.top=Math.round(n)+"px",l.left=Math.round(i+g)+"px",this.transition&&(l.opacity=1,l.marginTop=0),this.curId=e}showOn(e,t,i,r,n=0){let s=i.getBoundingClientRect(),o=Math.round((s.left+s.right)/2),a=s.bottom+n,l=s.bottom-s.top;this.show(e,t,o,a,r,l)}handleBodyClick(e){let t=this.curId;this.el.contains(e.target)||this.toggleEl&&this.toggleEl.contains(e.target)||this.hide(t)}}class l{static solve(e){return l._getRequest("regex/solve",{data:JSON.stringify(e)})}static version(e){return l._getRequest("regex/version",{flavor:e})}static communitySearch(e){return l._getRequest("patterns/search",{query:e||"",startIndex:0,limit:100},e=>{this._processPatternList(e)})}static load(e){return l._getRequest("patterns/load",{patternId:e},e=>this._processPattern(e))}static save(e,t,i){let r=this._prepPattern(e,t,i);return l._getRequest("patterns/save",r,e=>this._processPattern(e))}static rate(e,t){return l._getRequest("patterns/rate",{patternId:e,userRating:t},e=>e.rating=Number(e.rating))}static delete(e){return l._getRequest("patterns/delete",{patternId:e})}static favorite(e,t){return l._getRequest("patterns/favorite",{patternId:e,favorite:!!t})}static private(e,t){return l.setAccess(e,t?"private":"protected")}static setAccess(e,t){return l._getRequest("patterns/setAccess",{patternId:e,access:t})}static multiFavorite(e){return l._getRequest("patterns/multiFavorite",{patternIds:JSON.stringify(e)})}static login(e){window.location=l.url+"?action=account/login&type="+e}static logout(){return l._getRequest("account/logout",{})}static verify(){return l._getRequest("account/verify",{})}static patterns(){return l._getRequest("account/patterns",{},e=>{this._processPatternList(e),e.results.sort((e,t)=>t.favorite-e.favorite||t.dateAdded-e.dateAdded||1-2*(e.id>t.id))})}static _processPatternList(e){e.results.forEach(this._processPattern)}static _processPattern(e){e.rating=Number(e.rating),e.userRating=Number(e.userRating),e.flavor=e.flavor||"js",e.mode=e.mode||"text",e.text=e.text||null,e.tool&&e.tool.id&&(e.tool.id=e.tool.id.toLowerCase())}static _prepPattern(e,t,i){return e=s.clone(e),t&&(e.parentId=e.id,delete e.id,i||(e.name=s.getForkName(e.name))),e.id||delete e.id,e.parentId||delete e.parentId,delete e.userId,e.tool=e.tool&&JSON.stringify(e.tool),e.tests=e.tests&&JSON.stringify(e.tests),e}static _getRequest(e,t={},i){let r=new XMLHttpRequest,n=new c(r,i),s=[];r.open("POST",l.url),r.setRequestHeader("Content-type","application/x-www-form-urlencoded",!0),r.timeout=5e3,t.action=e,l.isLocal&&l.useBeta&&(t.userId=111);for(let e in t)s.push(e+"="+encodeURIComponent(t[e]));return l.isLocal&&console.log(t),r.send(s.join("&")),n}}class c{constructor(e,t){this._req=e,this._postprocess=t,e.addEventListener("load",()=>this._load()),e.addEventListener("timeout",e=>this._error("servercomm")),e.addEventListener("error",e=>this._error("servercomm"))}then(e,t,i){return this._loadF=e,t&&this.catch(t),this._data&&e(this._data),i&&this.finally(i),this}catch(e){return this._errorF=e,this._err&&e(this._err),this}finally(e){return this._finallyF=e,this._complete&&e(),this}abort(){this._complete||(this._complete=!0,this._req.abort(),this._finallyF&&this._finallyF(),this._loadF=this._errorF=this._finallyF=null)}_load(){let e;this._complete=!0,l.isLocal&&console.log(this._req.response||this._req.responseText);try{e=JSON.parse(this._req.response||this._req.responseText)}catch(e){return this._error(e)}if(!e.success)return this._error(e.data);this._postprocess&&this._postprocess(e.data),this._data=e.data,this._loadF&&this._loadF(this._data),this._finallyF&&this._finallyF()}_error(e){this._err=e.data&&e.data.error||e.message||e.detail||e.type||String(e),this._errorF&&this._errorF(this._err),this._finallyF&&this._finallyF()}}l.isLocal=s.isLocal,l.useBeta=l.isLocal||"beta.regexr.com"===window.location.hostname,l.host="https://"+(l.useBeta?"beta.":"")+"regexr.com",l.url=l.host+"/server/api.php";let h={create:function(e,t={},i="100%",n="100%"){s.getCtrlKey();let o=s.copy({lineNumbers:!1,tabSize:3,indentWithTabs:!0,extraKeys:{},specialChars:/[ \u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/,specialCharPlaceholder:e=>r.create("span"," "===e?"cm-space":"cm-special"," ")},t),a=CodeMirror(e,o);return a.setSize(i,n),a.getOption("maxLength")&&a.on("beforeChange",h.enforceMaxLength),a.getOption("singleLine")&&a.on("beforeChange",h.enforceSingleLine),a},getCharIndexAt:function(e,t,i){let r=e.coordsChar({left:t,top:i},"page");for(let n=0;n<=1;n++){let n=e.charCoords(r,"page");if(t>=n.left&&t<=n.right&&i>=n.top&&i<=n.bottom)return e.indexFromPos(r);if(r.ch--<=0)break}return null},getCharRect:function(e,t){if(null==t)return null;let i=e.posFromIndex(t),r=e.charCoords(i);return r.x=r.left,r.y=r.top,r.width=r.right-r.left,r.height=r.bottom-r.top,r},enforceMaxLength:function(e,t){let i=e.getOption("maxLength");if(i&&t.update){let r=t.text.join("\n"),n=r.length-(e.indexFromPos(t.to)-e.indexFromPos(t.from));if(n<=0)return!0;n=e.getValue().length+n-i,n>0&&(r=r.substr(0,r.length-n),t.update(t.from,t.to,r.split("\n")))}return!0},enforceSingleLine:function(e,t){if(t.update){let e=t.text.join("").replace(/(\n|\r)/g,"");t.update(t.from,t.to,[e])}return!0},selectAll:function(e){e.focus(),e.setSelection({ch:0,line:0},{ch:0,line:e.lineCount()})},calcRangePos:function(e,t,i=0,r={}){let n=e.getDoc();return r.startPos=n.posFromIndex(t),r.endPos=n.posFromIndex(t+i),r}},u={GA_ID:"UA-3579542-6",page:function(e){},event:function(e,t,i){let r={};t&&(r.event_category=t),i&&(r.event_label=i),gtag("event",e,r)}};class d extends i{constructor(e,t){super(),this.el=e,this.multi=t.multi,this.template=t.template,this.data=t.data,t.selected&&(this.selected=t.selected)}set data(e){if(r.empty(this.el),this._data=e,e&&e.length)for(let t=0,i=e.length;t<i;t++)this.addItem(e[t])}get data(){return this._data}set selected(e){r.removeClass(r.queryAll(".selected",this.el),"selected"),e instanceof Array||(e=[e]),e.forEach(e=>r.addClass(r.query("[data-id='"+e+"']",this.el),"selected")),this.multi||this.scrollTo(e[0])}get selected(){let e=r.queryAll("li.selected",this.el);if(!e[0])return null;if(!this.multi)return e[0].dataset.id;let t=[];for(let i=0,r=e.length;i<r;i++)t.push(e[i].dataset.id);return t}set selectedIndex(e){let t=this.data;this.selected=t&&t[e]&&t[e].id}get selectedIndex(){let e=this.selectedEl,t=e&&e.dataset.id;return null===t?-1:this.data.findIndex(e=>e.id===t)}get selectedItem(){let e=this.selectedEl;return e&&e.item}get selectedEl(){return r.query("li.selected",this.el)}refresh(){let e=this.selected;this.data=this._data,this.selected=e}addItem(e,t=null){let i,n,s,o=e=>this.handleClick(e),a=this.template;if("string"==typeof e)n=e,i=a?a(e):e;else{if(e.hide)return;n=e.id||e.label,i=a?a(e):e.label,null===t&&(s=e.selected)}let l=r.create("li",s?"selected":null,i,this.el);l.dataset.id=n,l.item=e,l.addEventListener("click",o),l.addEventListener("dblclick",o),t&&(this.selected=e.id)}removeItem(e){let t=r.query("[data-id='"+e+"']",this.el);t&&t.remove()}handleClick(e){let t=e.currentTarget.dataset.id,i=this.selected;if(this.getEl(t))if("dblclick"!==e.type){if(this.multi)r.toggleClass(e.currentTarget,"selected");else{if(i===t)return void(null!=t&&this.dispatchEvent("selclick"));this.selected=t}this.dispatchEvent("change",!1,!0)||(this.selected=i)}else null!=t&&this.dispatchEvent("dblclick")}scrollTo(e=this.selected){let t=this.getEl(e);if(!t)return;let i=this.scrollEl||this.el,r=t.offsetTop-i.offsetTop;r+t.offsetHeight>i.scrollTop+i.offsetHeight?i.scrollTop=r+t.offsetHeight-i.offsetHeight+10:r<i.scrollTop&&(i.scrollTop=r-10)}getEl(e){return r.query("[data-id='"+e+"']",this.el)}}class f{constructor(){this.profile=null}set profile(e){this._profile=e,this.string=this.token=this.errors=this.captureGroups=this.namedGroups=null}parse(e){if(!this._profile)return null;if(e===this.string)return this.token;this.token=null,this._modes={},this.string=e,this.errors=[];let t,i,r,n=this.captureGroups=[],s=this.namedGroups={},o=this.branchResetGroups=[],a=[],l=[],c=0,h=e.length,u=null,d=null,p=null,f=this._profile,g=f.unquantifiable,m=f.charTypes,v=e.lastIndexOf("/");for(let t=v+1;t<h;t++)this._modes[e[t]]=!0;for(;c<h;){i=e[c],r={i:c,l:1,prev:d,prv:p,modes:this._modes},d?d.next=r:this.token=r,0===c||c>=v?this.parseFlag(e,r):"("!==i||u?")"!==i||u?"["===i?u=this.parseSquareBracket(e,r,u):"]"===i&&u?(r.type="setclose",r.open=u,u.close=r,u=null):"+"===i&&p&&"quant"===p.clss&&f.tokens.possessive?(r.type="possessive",r.related=[p]):"+"!==i&&"*"!==i||u?"{"!==i||u||-1===e.substr(c).search(/^{\d+,?\d*}/)?"\\"===i?this.parseBackSlash(e,r,u,v):"?"!==i||u?"-"===i&&u&&void 0!==p.code&&p.prv&&"range"!==p.prv.type?r.type="range":(this.parseChar(e,r,u),!u&&this._modes.x&&/\s/.test(i)&&(r.ignore=!0,r.type="ignorews")):p&&"quant"===p.clss?(r.type="lazy",r.related=[p]):(r.type=m[i],r.clss="quant",r.min=0,r.max=1):this.parseQuant(e,r):(r.type=m[i],r.clss="quant",r.min="+"===i?1:0,r.max=-1):(r.type="groupclose",a.length?(t=r.open=a.pop(),t.close=r,"branchreset"===t.type&&o.pop()):r.error={id:"groupclose"}):(this.parseParen(e,r),null===r.close&&(r.depth=a.length,a.push(r)),r.capture&&this.addCaptureGroup(r,a)),"quant"===r.clss&&(!p||void 0!==p.close||g[p.type]||p.open&&g[p.open.type]?r.error={id:"quanttarg"}:r.related=[p.open||p]),!0===r.group&&l.push(r);let n=a.length?a[a.length-1]:null;!n||"conditional"!==n.type&&"conditionalgroup"!==n.type||"alt"!==r.type?n&&"branchreset"===n.type&&(n.curGroupNum=n.inGroupNum):(n.alt?r.error={id:"extraelse"}:n.alt=r,r.related=[n],r.type="conditionalelse",r.clss="special"),p&&"range"===p.type&&1===p.l&&this.validateRange(e,r),"js"===f.id&&this.addJSWarnings(r),r.open&&!r.clss&&(r.clss=r.open.clss),r.error&&this.addError(r),c+=r.l,d=r,r.ignore||(p=r)}for(;a.length;)this.addError(a.pop(),{id:"groupopen"});return this.matchRefs(l,n,s),u&&this.addError(u,{id:"setopen"}),this.token}addError(e,t=e.error){e.error=t,this.errors.push(e)}addJSWarnings(e){e.error||"neglookbehind"!==e.type&&"poslookbehind"!==e.type&&"sticky"!==e.type&&"unicode"!==e.type&&"dotall"!=e.type&&"unicodecat"!==e.type&&"unicodescript"!==e.type&&"namedgroup"!==e.type||(e.error={id:"jsfuture",warning:!0})}addCaptureGroup(e,t){let i=this.captureGroups,r=this.branchResetGroups,n=this.namedGroups;t.length&&t[t.length-1];if(r.length){let t=r[r.length-1];e.num=++t.curGroupNum}else e.num=i.length+1;i[e.num-1]||i.push(e),e.name&&!e.error&&(/\d/.test(e.name[0])?e.error={id:"badname"}:n[e.name]?(e.error={id:"dupname"},e.related=[n[e.name]]):n[e.name]=e)}getRef(e,t){e.clss="ref",e.group=!0,e.relIndex=this.captureGroups.length,e.name=t}matchRefs(e,t,i){for(;e.length;){let r=e.pop(),n=r.name,s=i[n];if(!s&&!isNaN(n)){let e=n[0],i=parseInt(n)+("+"===e||"-"===e?r.relIndex:0);"-"===e&&i++,s=t[i-1]}s?(r.group=s,r.related=[s],r.dir=r.i<s.i?1:!s.close||r.i<s.close.i?0:-1):(delete r.group,delete r.relIndex,this.refToOctal(r),r.error&&this.errors.push(r.error))}}refToOctal(e){let t=e.name,i=this._profile;if("numref"!==e.type)e.error={id:"unmatchedref"};else if(/^[0-7]{2}$/.test(t)||i.config.reftooctalalways&&/^[0-7]$/.test(t)){let i=e.next,r=String.fromCharCode(i.code);"char"===i.type&&r>="0"&&r<="7"&&parseInt(t+r,8)<=255&&(t+=r,this.mergeNext(e)),e.code=parseInt(t,8),e.clss="esc",e.type="escoctal",delete e.name}else"8"===t||"9"===t?(this.parseEscChar(e,t),delete e.name):e.error={id:"unmatchedref"}}mergeNext(e){let t=e.next;e.next=t.next,e.next.prev=e,e.l++}parseFlag(e,t){let i=t.i,r=e[i];"/"===e[i]?(t.type=0===i?"open":"close",0!==i&&(t.related=[this.token],this.token.related=[t])):t.type=this._profile.flags[r]}parseChar(e,t,i){let r=e[t.i];return t.type=!i&&this._profile.charTypes[r]||"char",i||"/"!==r||(t.error={id:"fwdslash"}),"char"===t.type?t.code=r.charCodeAt(0):f.ANCHOR_TYPES[t.type]?t.clss="anchor":"dot"===t.type&&(t.clss="charclass"),t}parseSquareBracket(e,t,i){let r;return this._profile.tokens.posixcharclass&&(r=e.substr(t.i).match(/^\[(:|\.)([^\]]*?)\1]/))?(t.l=r[0].length,t.value=r[2],t.clss="charclass",":"===r[1]?(t.type="posixcharclass",this._profile.posixCharClasses[r[2]]?i||(t.error={id:"posixcharclassnoset"}):t.error={id:"posixcharclassbad"}):(t.type="posixcollseq",t.error={id:"notsupported"})):i?this.parseChar(e,t,i):(t.type=t.clss="set","^"===e[t.i+1]&&(t.l++,t.type+="not"),i=t),i}parseParen(e,t){if(t.clss=t.type="group","?"!==e[t.i+1])return t.close=null,t.capture=!0,t;let i,r=e.substr(t.i+2),n=r[0];if(":"===n)t.type="noncapgroup",t.close=null,t.l=3;else if(">"===n)t.type="atomic",t.close=null,t.l=3;else if("|"===n)t.type="branchreset",t.close=null,t.l=3,t.inGroupNum=t.curGroupNum=this.captureGroups.length,this.branchResetGroups.push(t);else if("#"===n&&(i=r.match(/[^)]*\)/)))t.clss=t.type="comment",t.ignore=!0,t.l=2+i[0].length;else if(/^(R|0)\)/.test(r))t.clss="ref",t.type="recursion",t.l=4;else if(i=r.match(/^P=(\w+)\)/i))t.type="namedref",this.getRef(t,i[1]),t.l=i[0].length+2;else if(/^\(DEFINE\)/.test(r))t.type="define",t.close=null,t.l=10;else if(i=r.match(/^<?[=!]/)){let e="conditional"===t.prv.type;t.clss=e?"special":"lookaround",t.close=null,n=i[0],t.behind="<"===n[0],t.negative="!"===n[+t.behind],t.type=e?"condition":(t.negative?"neg":"pos")+"look"+(t.behind?"behind":"ahead"),e&&(t.prv.related=[t],t.prv.condition=t,t.related=[t.prv]),t.l=n.length+2}else(i=r.match(/^<(\w+)>/))||this._profile.config.namedgroupalt&&((i=r.match(/^'(\w+)'/))||(i=r.match(/^P<(\w+)>/)))?(t.type="namedgroup",t.close=null,t.name=i[1],t.capture=!0,t.l=i[0].length+2):(i=r.match(/^([-+]?\d\d?)\)/))||(i=r.match(/^(?:&|P>)(\w+)\)/))?(t.type=(isNaN(i[1])?"named":"num")+"subroutine",this.getRef(t,i[1]),t.l=i[0].length+2):(i=r.match(/^\(([-+]?\d\d?)\)/))||(i=r.match(/^\((\w+)\)/))?(this.getRef(t,i[1]),t.clss="special",t.type="conditionalgroup",t.close=null,t.l=i[0].length+2):/^\(\?<?[=!]/.test(r)?(t.clss="special",t.type="conditional",t.close=null,t.l=2):this.parseMode(t,r)||(t.close=null,t.capture=!0);return this._profile.tokens[t.type]||(t.error={id:"notsupported"}),t}parseBackSlash(e,t,i,r){let n,s,o=t.i,a=this._profile,l=e.substr(o+1),c=l[0];if(o+1!==(r||e.length)){if(!i&&(n=l.match(/^\d\d?/)))return t.type="numref",this.getRef(t,n[0]),t.l+=n[0].length,t;if(a.tokens.namedref&&!i&&("g"===c||"k"===c))return this.parseRef(t,l);if(!(!a.tokens.unicodecat||a.flags.u&&!this._modes.u||"p"!==c&&"P"!==c))return this.parseUnicode(t,l);if(a.tokens.escsequence&&"Q"===c){t.type="escsequence";let i=2;-1!==(o=l.indexOf("\\E"))?(t.l+=o+2,i+=2):t.l+=r-t.i-1,t.value=e.substr(t.i+2,t.l-i)}else if(a.tokens.escunicodeub&&this._modes.u&&(n=l.match(/^u\{(\d+)}/)))t.type="escunicodeub",t.l+=n[0].length,t.code=parseInt(n[1],16);else if(a.tokens.escunicodeu&&(n=l.match(/^u([\da-fA-F]{4})/)))t.type="escunicodeu",t.l+=n[0].length,t.code=parseInt(n[1],16);else if(a.tokens.escunicodexb&&(n=l.match(/^x\{(.*?)}/)))t.type="escunicodexb",t.l+=n[0].length,s=parseInt(n[1],16),isNaN(s)||s>255||/[^\da-f]/i.test(n[1])?t.error={id:"esccharbad"}:t.code=s;else if(n=l.match(/^x([\da-fA-F]{0,2})/))t.type="eschexadecimal",t.l+=n[0].length,t.code=parseInt(n[1]||0,16);else if(n=l.match(/^c([a-zA-Z])?/))if(t.type="esccontrolchar",n[1])t.code=n[1].toUpperCase().charCodeAt(0)-64,t.l+=2;else{if(!a.config.ctrlcodeerr)return this.parseChar(e,t,i);t.l++,t.error={id:"esccharbad"}}else if(n=l.match(/^[0-7]{1,3}/))t.type="escoctal",l=n[0],parseInt(l,8)>255&&(l=l.substr(0,2)),t.l+=l.length,t.code=parseInt(l,8);else if(a.tokens.escoctalo&&(n=l.match(/^o\{(.*?)}/i)))t.type="escoctal",t.l+=n[0].length,s=parseInt(n[1],8),isNaN(s)||s>255||/[^0-7]/.test(n[1])?t.error={id:"esccharbad"}:t.code=s;else{if(t.type=a.escCharTypes[c])return t.l++,t.clss=f.ANCHOR_TYPES[t.type]?"anchor":"charclass",t;if(t.code=a.escCharCodes[c],void 0===t.code||!1===t.code)return this.parseEscChar(t,c);t.l++,t.type="esc_"+t.code}return t.clss="esc",t}t.error={id:"esccharopen"}}parseEscChar(e,t){let i=this._profile;e.l=2,!i.badEscChars[t]&&i.tokens.escchar&&!this._modes.u||i.escChars[t]?(e.type="escchar",e.code=t.charCodeAt(0),e.clss="esc"):e.error={id:"esccharbad"}}parseRef(e,t){let i,r=t[0],n="";(i=t.match(/^[gk](?:'\w*'|<\w*>|{\w*})/))?(n=i[0].substr(2,i[0].length-3),"k"!==r||isNaN(n)||(n="")):(i=t.match(/^g(?:({[-+]?\d+}|<[-+]?\d+>|'[-+]?\d+')|([-+]?\d+))/))&&(n=void 0!==i[2]?i[2]:i[1].substr(1,i[1].length-2));let s="k"===r||!("'"===t[1]||"<"===t[1]);s||0!=n?(e.type=(isNaN(n)?"named":(s?"ext":"")+"num")+(s?"ref":"subroutine"),this.getRef(e,n)):(e.type="recursion",e.clss="ref"),e.l+=i?i[0].length:1}parseUnicode(e,t){let i=t.match(/p\{\^?([^}]*)}/i),r=i&&i[1],n="P"===t[0];return!i&&(i=t.match(/[pP]([LMZSNPC])/))?r=i[1]:n=n!==("^"===t[2]),e.l+=i?i[0].length:1,e.type="unicodecat",this._profile.unicodeScripts[r]?e.type="unicodescript":this._profile.unicodeCategories[r]||(r=null),n&&(e.type="not"+e.type),(this._profile.config.unicodenegated||"^"!==t[2])&&r||(e.error={id:"unicodebad"}),e.value=r,e.clss="charclass",e}parseMode(e,t){let i=t.match(/^[-a-z]+\)/i);if(!i)return;let r,n=this._profile.modes,o=s.copy({},this._modes),a=!1,l=!1,c=i[0];e.on=e.off="";for(let t=0,i=c.length-1;t<i;t++)if(r=c[t],"-"!==r){if(!n[r]){a=!0;break}o[r]=!l,e.on=e.on.replace(r,""),l?(e.off=e.off.replace(r,""),e.off+=r):e.on+=r}else l=!0;return e.clss="special",e.type="mode",e.l=i[0].length+2,a?(e.error={id:"modebad"},e.errmode=r):this._modes=o,e}parseQuant(e,t){t.type=t.clss="quant";let i=t.i,r=e.indexOf("}",i+1);t.l+=r-i;let n=e.substring(i+1,r).split(",");return t.min=parseInt(n[0]),t.max=void 0===n[1]?t.min:""===n[1]?-1:parseInt(n[1]),-1!==t.max&&t.min>t.max&&(t.error={id:"quantrev"}),t}validateRange(e,t){let i=t,r=t.prv,n=r.prv;void 0===n.code||void 0===i.code?this.parseChar(e,r):(r.clss="set",n.code>i.code&&this.errors.push(r.error={id:"rangerev"}),i.proxy=n.proxy=r,r.set=[n,r,i])}}f.ANCHOR_TYPES={bof:!0,eof:!0,bos:!0,eos:!0,abseos:!0,wordboundary:!0,notwordboundary:!0,prevmatchend:!0};class g extends i{constructor(e){super(),this.cm=e,this._activeMarks=[],this._hoverMarks=[],this._hoverToken=null}clear(){this.cm.operation(()=>{let e=this._activeMarks;for(var t=0,i=e.length;t<i;t++)e[t].clear();e.length=0})}draw(e){let t=this.cm,i=g.CSS_PREFIX;this.clear(),t.operation(()=>{let r,n=g.GROUP_CLASS_BY_TYPE,s=t.getDoc(),o=this._activeMarks;for(;e;)if(e.clear)e=e.next;else{e=this._calcTokenPos(e);var a=i+(e.clss||e.type);e.error&&(a+=" "+i+(e.error.warning?"warning":"error")),a&&o.push(s.markText(e.startPos,e.endPos,{className:a})),e.close&&(r=this._calcTokenPos(e.close),(a=n[e.clss||e.type])&&(a=a.replace("%depth%",e.depth),o.push(s.markText(e.startPos,r.endPos,{className:a})))),e=e.next}})}set hoverToken(e){if(!(e===this._hoverToken||e&&e.set&&-1!==e.set.indexOf(this._hoverToken))){for(;this._hoverMarks.length;)this._hoverMarks.pop().clear();if(this._hoverToken=e,e&&(e.open?this._drawSelect(e.open):this._drawSelect(e),e.related))for(let t=0,i=e.related.length;t<i;t++)this._drawSelect(e.related[t],g.CSS_PREFIX+"related");this.dispatchEvent("hover")}}get hoverToken(){return this._hoverToken}_drawSelect(e,t=g.CSS_PREFIX+"selected"){let i=this.cm.getDoc(),r=e.close||e;e.set&&(r=e.set[e.set.length-1],e=e.set[0]),this._calcTokenPos(r),this._calcTokenPos(e),this._hoverMarks.push(i.markText(e.startPos,r.endPos,{className:t,startStyle:t+"-left",endStyle:t+"-right"}))}_calcTokenPos(e){return e.startPos||null==e||h.calcRangePos(this.cm,e.i,e.l,e),e}}g.CSS_PREFIX="exp-",g.GROUP_CLASS_BY_TYPE={set:g.CSS_PREFIX+"group-set",setnot:g.CSS_PREFIX+"group-set",group:g.CSS_PREFIX+"group-%depth%",lookaround:g.CSS_PREFIX+"group-%depth%"};class m{constructor(e,t){this.editor=e,this.highlighter=t,this.isMouseDown=!1,this.token=null;let i=e.display.lineDiv;i.addEventListener("mousemove",e=>this._handleMouseMove(e)),i.addEventListener("mouseout",e=>this._handleMouseOut(e)),i.addEventListener("mousedown",e=>this._handleMouseDown(e))}_handleMouseMove(e){if(this.isMouseDown)return;let t,i=this.editor,r=this.token,n=null;if(e&&r&&null!=(t=h.getCharIndexAt(i,e.clientX,e.clientY+window.pageYOffset)))for(;r;){if(t>=r.i&&t<r.i+r.l){n=r;break}r=r.next}for(;n;)if(n.open)n=n.open;else{if(!n.proxy)break;n=n.proxy}this.highlighter.hoverToken=n;let s=null!=t&&h.getCharRect(i,t);s&&(s.right=s.left=e.clientX),ne.tooltip.hover.show("ExpressionHover",ne.reference.tipForToken(n),e.clientX,s.bottom,!0,0)}_handleMouseOut(e){this.highlighter.hoverToken=null,ne.tooltip.hover.hide("ExpressionHover")}_handleMouseDown(e){if(1!==e.which&&1!==e.button)return;this.isMouseDown=!0;let t,i=window.addEventListener?window:document;i.addEventListener("mouseup",t=()=>{i.removeEventListener("mouseup",t),this.isMouseDown=!1})}}let v=!0,y={id:"core",flags:{g:"global",i:"caseinsensitive",m:"multiline",s:"dotall",u:"unicode",y:"sticky",x:"extended",U:"ungreedy"},escChars:"+*?^$\\.[]{}()|/".split("").reduce((e,t)=>(e[t]=v,e),{}),badEscChars:!1,escCharCodes:{0:0,a:7,t:9,n:10,v:11,f:12,r:13,e:27},escCharTypes:{A:"bos",b:"wordboundary",B:"notwordboundary",d:"digit",D:"notdigit",G:"prevmatchend",h:"hwhitespace",H:"nothwhitespace",K:"keepout",N:"notlinebreak",R:"linebreak",s:"whitespace",S:"notwhitespace",v:"vwhitespace",V:"notvwhitespace",w:"word",W:"notword",X:"unicodegrapheme",Z:"eos",z:"abseos"},charTypes:{".":"dot","|":"alt",$:"eof","^":"bof","?":"opt","+":"plus","*":"star"},unquantifiable:{quant:v,plus:v,star:v,opt:v,lazy:v,possessive:v,eof:v,bof:v,eos:v,abseos:v,alt:v,open:v,mode:v,comment:v,condition:v},unicodeScripts:{Arabic:v,Armenian:v,Avestan:v,Balinese:v,Bamum:v,Bassa_Vah:v,Batak:v,Bengali:v,Bopomofo:v,Brahmi:v,Braille:v,Buginese:v,Buhid:v,Canadian_Aboriginal:v,Carian:v,Caucasian_Albanian:v,Chakma:v,Cham:v,Cherokee:v,Common:v,Coptic:v,Cuneiform:v,Cypriot:v,Cyrillic:v,Deseret:v,Devanagari:v,Duployan:v,Egyptian_Hieroglyphs:v,Elbasan:v,Ethiopic:v,Georgian:v,Glagolitic:v,Gothic:v,Grantha:v,Greek:v,Gujarati:v,Gurmukhi:v,Han:v,Hangul:v,Hanunoo:v,Hebrew:v,Hiragana:v,Imperial_Aramaic:v,Inherited:v,Inscriptional_Pahlavi:v,Inscriptional_Parthian:v,Javanese:v,Kaithi:v,Kannada:v,Katakana:v,Kayah_Li:v,Kharoshthi:v,Khmer:v,Khojki:v,Khudawadi:v,Lao:v,Latin:v,Lepcha:v,Limbu:v,Linear_A:v,Linear_B:v,Lisu:v,Lycian:v,Lydian:v,Mahajani:v,Malayalam:v,Mandaic:v,Manichaean:v,Meetei_Mayek:v,Mende_Kikakui:v,Meroitic_Cursive:v,Meroitic_Hieroglyphs:v,Miao:v,Modi:v,Mongolian:v,Mro:v,Myanmar:v,Nabataean:v,New_Tai_Lue:v,Nko:v,Ogham:v,Ol_Chiki:v,Old_Italic:v,Old_North_Arabian:v,Old_Permic:v,Old_Persian:v,Old_South_Arabian:v,Old_Turkic:v,Oriya:v,Osmanya:v,Pahawh_Hmong:v,Palmyrene:v,Pau_Cin_Hau:v,Phags_Pa:v,Phoenician:v,Psalter_Pahlavi:v,Rejang:v,Runic:v,Samaritan:v,Saurashtra:v,Sharada:v,Shavian:v,Siddham:v,Sinhala:v,Sora_Sompeng:v,Sundanese:v,Syloti_Nagri:v,Syriac:v,Tagalog:v,Tagbanwa:v,Tai_Le:v,Tai_Tham:v,Tai_Viet:v,Takri:v,Tamil:v,Telugu:v,Thaana:v,Thai:v,Tibetan:v,Tifinagh:v,Tirhuta:v,Ugaritic:v,Vai:v,Warang_Citi:v,Yi:v},unicodeCategories:{C:v,Cc:v,Cf:v,Cn:v,Co:v,Cs:v,L:v,"L&":v,Ll:v,Lm:v,Lo:v,Lt:v,Lu:v,M:v,Mc:v,Me:v,Mn:v,N:v,Nd:v,Nl:v,No:v,P:v,Pc:v,Pd:v,Pe:v,Pf:v,Pi:v,Po:v,Ps:v,S:v,Sc:v,Sk:v,Sm:v,So:v,Z:v,Zl:v,Zp:v,Zs:v},posixCharClasses:{alnum:v,alpha:v,ascii:v,blank:v,cntrl:v,digit:v,graph:v,lower:v,print:v,punct:v,space:v,upper:v,word:v,xdigit:v},modes:{i:"caseinsensitive",s:"dotall",m:"multiline",x:"freespacing",J:"samename",U:"switchlazy"},tokens:{open:v,close:v,char:v,set:v,setnot:v,setclose:v,range:v,unicodecat:v,notunicodecat:v,unicodescript:v,notunicodescript:v,posixcharclass:v,escoctal:v,escunicodeu:v,escunicodeub:v,escunicodexb:v,escsequence:v,eschexadecimal:v,esccontrolchar:v,escoctalo:v,escchar:v,group:v,groupclose:v,noncapgroup:v,namedgroup:v,atomic:v,define:v,branchreset:v,poslookbehind:v,neglookbehind:v,poslookahead:v,neglookahead:v,namedref:v,numref:v,extnumref:v,recursion:v,numsubroutine:v,namedsubroutine:v,quant:v,possessive:v,lazy:v,conditional:v,condition:v,conditionalelse:v,conditionalgroup:v,mode:v,comment:v,matchanyset:v},substTokens:{subst_$esc:v,"subst_$&match":v,subst_$before:v,subst_$after:v,subst_$group:v,subst_$bgroup:v,subst_bsgroup:v,subst_group:v,subst_0match:v,subst_esc:v},config:{forwardref:v,nestedref:v,ctrlcodeerr:v,reftooctalalways:v,substdecomposeref:v,looseesc:v,unicodenegated:v,namedgroupalt:v},docs:{}},b={id:"pcre",label:"PCRE",browser:!1,flags:{u:!1,y:!1},badEscChars:"uUlLN".split("").reduce((e,t)=>(e[t]=!0,e),{}),escCharCodes:{v:!1},tokens:{escunicodeu:!1,escunicodeub:!1},substTokens:{subst_$esc:!1,"subst_$&match":!1,subst_$before:!1,subst_$after:!1},config:{reftooctalalways:!1,substdecomposeref:!1,looseesc:!1},docs:{escoctal:{ext:"+<p>The syntax <code>\\o{FFF}</code> is also supported.</p>"},numref:{ext:"<p>There are multiple syntaxes for this feature: <code>\\1</code> <code>\\g1</code> <code>\\g{1}</code>.</p><p>The latter syntaxes support relative values preceded by <code>+</code> or <code>-</code>. For example <code>\\g-1</code> would match the group preceding the reference.</p>"},lazy:{ext:"+<p>This behaviour is reversed by the ungreedy (<code>U</code>) flag/modifier.</p>"}}};function x(e,t){try{return new RegExp(e,t)&&void 0}catch(e){return!1}}function w(e){return x(".",e)}let _=w("u"),C=w("y"),k=w("s"),S=x("(?<=A)"),E=x("(?<A>B)"),L=x("\\p{Ll}","u"),T={id:"js",label:"JavaScript",browser:!0,flags:{s:k,x:!1,u:_,y:C,U:!1},escCharCodes:{a:!1,e:!1},escCharTypes:{A:!1,G:!1,h:!1,H:!1,K:!1,N:!1,R:!1,v:!1,V:!1,X:!1,Z:!1,z:!1},unicodeScripts:L,unicodeCategories:L,posixCharClasses:!1,modes:!1,tokens:{unicodecat:L,notunicodecat:L,unicodescript:L,notunicodescript:L,posixcharclass:!1,escunicodeub:_,escunicodexb:!1,escsequence:!1,escoctalo:!1,namedgroup:E,atomic:!1,define:!1,branchreset:!1,poslookbehind:S,neglookbehind:S,namedref:!1,extnumref:!1,recursion:!1,numsubroutine:!1,namedsubroutine:!1,possessive:!1,conditional:!1,conditionalif:!1,conditionalelse:!1,conditionalgroup:!1,mode:!1,comment:!1},config:{forwardref:!1,nestedref:!1,ctrlcodeerr:!1,unicodenegated:!1,namedgroupalt:!1},substTokens:{subst_0match:!1,subst_$bgroup:!1,subst_bsgroup:!1},docs:{subst_group:{ext:""},namedgroup:{ext:""},unicodecat:{ext:"<p>Requires the <code>u</code> flag.</p><p>For a list of values, see this <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes'>MDN page</a>.</p>"}}};T.docs.notunicodecat=T.docs.unicodescript=T.docs.notunicodescript=T.docs.unicodecat;let M={core:y};function R(e,t){for(let i in e)!1!==t[i]&&("object"==typeof e[i]?t[i]=R(e[i],t[i]||{}):void 0===t[i]&&(t[i]=e[i]));return t}M.pcre=R(y,b),M.js=R(y,T);class A extends i{constructor(e){super(),this.el=e,this.delim="/",this.lexer=new f,this._initUI(e),ne.flavor.on("change",()=>this._onFlavorChange()),this._onFlavorChange()}set value(e){let t=s.decomposeRegEx(e||A.DEFAULT_EXPRESSION,this.delim);this.pattern=t.source,this.flags=t.flags}get value(){return this.editor.getValue()}set pattern(e){let t=this.editor.getValue().lastIndexOf(this.delim);this.editor.replaceRange(e,{line:0,ch:1},{line:0,ch:t}),this._deferUpdate()}get pattern(){return s.decomposeRegEx(this.editor.getValue(),this.delim).source}set flags(e){e=ne.flavor.validateFlagsStr(e);let t=this.editor.getValue(),i=t.lastIndexOf(this.delim);this.editor.replaceRange(e,{line:0,ch:i+1},{line:0,ch:t.length})}get flags(){return s.decomposeRegEx(this.editor.getValue(),this.delim).flags}get token(){return this.lexer.token}showFlags(){this.flagsList.selected=this.flags.split(""),ne.tooltip.toggle.toggleOn("flags",this.flagsEl,this.flagsBtn,!0,-2)}toggleFlag(e){let t=this.flags,i=t.indexOf(e);this.flags=i>=0?t.replace(e,""):t+e}showFlavors(){ne.tooltip.toggle.toggleOn("flavor",this.flavorEl,this.flavorBtn,!0,-2)}insert(e){this.editor.replaceSelection(e,"end")}selectAll(){h.selectAll(this.editor)}_initUI(e){this.editorEl=r.query("> .editor",e);let t=this.editor=h.create(this.editorEl,{autofocus:!0,maxLength:2500,singleLine:!0},"100%","100%");t.on("mousedown",(e,t)=>this._onEditorMouseDown(e,t)),t.on("change",(e,t)=>this._onEditorChange(e,t)),t.on("keydown",(e,t)=>this._onEditorKeyDown(e,t)),t.toggleOverwrite=()=>{},this.errorEl=r.query(".icon.alert",this.editorEl),this.errorEl.addEventListener("mouseenter",e=>this._onMouseError(e)),this.errorEl.addEventListener("mouseleave",e=>this._onMouseError(e)),this.highlighter=new g(t),this.hover=new m(t,this.highlighter),this._setInitialExpression(),this._initTooltips(e),this.value=A.DEFAULT_EXPRESSION}_setInitialExpression(){let e=this.editor;e.setValue("/./g"),e.getDoc().markText({line:0,ch:0},{line:0,ch:1},{className:"exp-decorator",readOnly:!0,atomic:!0,inclusiveLeft:!0}),e.getDoc().markText({line:0,ch:2},{line:0,ch:4},{className:"exp-decorator",readOnly:!1,atomic:!0,inclusiveRight:!0}),this._deferUpdate()}_deferUpdate(){s.defer(()=>this._update(),"Expression._update")}_update(){let e=this.editor.getValue();this.lexer.profile=ne.flavor.profile;let t=this.lexer.parse(e);r.toggleClass(this.editorEl,"error",!!this.lexer.errors.length),this.hover.token=t,this.highlighter.draw(t),this.dispatchEvent("change")}_initTooltips(e){const t=r.template`<svg class="inline check icon"><use xlink:href="#check"></use></svg> ${"label"}`;let i=ne.flavor.profiles.map(e=>({id:e.id,label:e.label+" ("+(e.browser?"Browser":"Server")+")"}));this.flavorBtn=r.query("section.expression .button.flavor",e),this.flavorEl=r.query("#library #tooltip-flavor"),this.flavorList=new d(r.query("ul.list",this.flavorEl),{data:i,template:t}),this.flavorList.on("change",()=>this._onFlavorListChange()),this.flavorBtn.addEventListener("click",e=>this.showFlavors()),r.query(".icon.help",this.flavorEl).addEventListener("click",()=>ne.sidebar.goto("engine")),this.flagsBtn=r.query("section.expression .button.flags",e),this.flagsEl=r.query("#library #tooltip-flags"),this.flagsList=new d(r.query("ul.list",this.flagsEl),{data:[],multi:!0,template:t}),this.flagsList.on("change",()=>this._onFlagListChange()),this.flagsBtn.addEventListener("click",e=>this.showFlags()),r.query(".icon.help",this.flagsEl).addEventListener("click",()=>ne.sidebar.goto("flags"))}_onFlavorListChange(){ne.tooltip.toggle.hide("flavor"),ne.flavor.value=this.flavorList.selected,u.page("flavor/"+this.flavorList.selected)}_onFlagListChange(){let e=this.flagsList.selected;this.flags=e?e.join(""):"",u.event("set_flags","engagement",this.flags)}_onFlavorChange(){let e=ne.flavor.profile;this.flavorList.selected=e.id,r.query("> .label",this.flavorBtn).innerText=e.label;let t=A.FLAGS.split("").filter(t=>!!e.flags[t]),i=A.FLAG_LABELS;this.flagsList.data=t.map(e=>({id:e,label:i[e]})),this.flags=this.flags.split("").filter(t=>!!e.flags[t]).join("")}_onEditorMouseDown(e,t){h.getCharIndexAt(e,t.clientX-.6*e.defaultCharWidth(),t.clientY)>=e.getValue().lastIndexOf(this.delim)&&this.showFlags()}_onEditorChange(e,t){this._deferUpdate();let i=t.text[0];i.length<3||!i.match(/^\/.+[^\\]\/[a-z]*$/gi)||1!==t.from.ch||t.to.ch!=1+t.removed[0].length||(this.value=i)}_onEditorKeyDown(e,t){(t.ctrlKey||t.metaKey)&&68==t.keyCode&&(t.preventDefault(),this.pattern="")}_onMouseError(e){let t=ne.tooltip.hover,i=this.lexer.errors;if("mouseleave"===e.type)return t.hide("error");if(0===i.length)return;let r=1===i.length&&i[0].error,n=r?ne.reference.getError(r,i[0]):"Problems in the Expression are underlined in <span class='exp-error'>red</span>. Roll over them for details.",s=r&&r.warning?"WARNING":"PARSE ERROR";t.showOn("error","<span class='error'>"+s+":</span> "+n,this.errorEl)}}A.DEFAULT_EXPRESSION="/([A-Z])\\w+/g",A.FLAGS="gimsuxyU",A.FLAG_LABELS={g:"<em>g</em>lobal",i:"case <em>i</em>nsensitive",m:"<em>m</em>ultiline",s:"<em>s</em>ingle line (dotall)",u:"<em>u</em>nicode",x:"e<em>x</em>tended",y:"stick<em>y</em>",U:"<em>U</em>ngreedy"};let F={_next:0,get id(){return Date.now()+"_"+this._next++},assign(e,t=!1){e.forEach(e=>e.id=null==e.id||t?this.id:e.id)}};class N{constructor(e,t,i="#6CF",r="#888"){this.lineSpacing=2,this.capWidth=4,this.lastBottom=-1,this.lastRight=-1,this.editor=e,this.canvas=t,this.fill=i,this.stroke=r}set matches(e){this._matches=e,this._deferUpdate()}set hoverMatch(e){this._hoverMatch=e,this._deferUpdate()}set selectedMatch(e){this._selectedMatch=e,this._deferUpdate()}redraw(){this._update()}_deferUpdate(){s.defer(()=>this._update(),"TextHighlighter._update")}_update(){this.clear();let e=this._matches,t=this._hoverMatch,i=this._selectedMatch;if(!e||!e.length)return;let r=this.editor,n=r.getDoc(),s=this.canvas.getContext("2d");s.fillStyle=this.fill,s.strokeStyle=this.stroke,s.lineWidth=2;let o=r.getScrollInfo(),a=r.indexFromPos(r.coordsChar({left:0,top:o.top},"local")),l=r.indexFromPos(r.coordsChar({left:o.clientWidth,top:o.top+o.clientHeight},"local"));for(let c=0,h=e.length;c<h;c++){let h=e[c],u=h.i,d=h.i+h.l-1;if(u>l)break;if(d<a||d<u)continue;let p=h.startPos||(h.startPos=n.posFromIndex(u)),f=h.endPos||(h.endPos=n.posFromIndex(d)),g=h===t||h===i,m=r.charCoords(p,"local"),v=r.charCoords(f,"local");if(m.bottom===v.bottom)this.drawHighlight(s,m.left,m.top,v.right,v.bottom,o.top,!1,!1,g);else{let e=r.getScrollInfo().width,t=r.defaultTextHeight();this.drawHighlight(s,m.left,m.top,e-2,m.bottom,o.top,!1,!0,g);let i=m.top;for(;(i+=t)<v.top-1;)this.drawHighlight(s,0,i,e-2,i+m.bottom-m.top,o.top,!0,!0,g);this.drawHighlight(s,0,v.top,v.right,v.bottom,o.top,!0,!1,g)}}}drawHighlight(e,t,i,r,n,s,o,a,l){let c=this.capWidth;if(r<0||t+1>=r)return;t=t+.5|0,r=r+.5|0,n=n+.5|0,(i=(i+.5|0)+this.lineSpacing)+1>this.lastBottom?this.lastBottom=n:t<this.lastRight&&(t=this.lastRight),this.lastRight=r;let h=e.globalAlpha;o&&(e.globalAlpha=.5*h,e.fillRect(t+1|0,i-s,c+1,n-i),t+=c),a&&(e.globalAlpha=.5*h,e.fillRect(r-c-1|0,i-s,c+1,n-i),r-=c),e.globalAlpha=h,e.fillRect(t+1,i-s,r-t-1,n-i),l&&e.strokeRect(t+1,i-s,r-t-1,n-i)}clear(){this.canvas.width=this.canvas.width,this.lastBottom=-1}}class I{constructor(e,t){this.editor=e,this.highlighter=t,this._matches=this._x=null;let i=e.display.lineDiv;i.addEventListener("mousemove",e=>this._handleMouseMove(e)),i.addEventListener("mouseout",e=>this._handleMouseOut(e))}set matches(e){this._matches=e,this._update()}_handleMouseMove(e){this._x=e.clientX,this._y=e.clientY+window.pageYOffset,this._update()}_handleMouseOut(e){this._x=null,this._update()}_update(){if(null===this._x)return this.highlighter.hoverMatch=null,void ne.tooltip.hover.hide("TextHover");let e,t,i=this.editor,n=this._matches,s=this._x,o=this._y;n&&n.length&&null!=(e=h.getCharIndexAt(i,s,o))&&(t=this.highlighter.hoverMatch=ne.text.getMatchAt(e));let a=null!=e&&h.getCharRect(i,e);a&&(a.right=a.left=s);let l=ne.reference.tipForMatch(t,i.getValue());if(l){let e=r.create("div","texthover",l);ne.tooltip.hover.show("TextHover",e,s,a.bottom,!0,0)}}}class O extends i{constructor(e){super(),this.el=e,this._initUI(e),this._initTestUI(e),ne.on("result",()=>this._setResult(ne.result)),ne.theme.on("change",()=>this._handleThemeChange())}set value(e){this.editor.setValue(e||this.defaultText)}get value(){return this.editor.getValue()}set tests(e){e instanceof Array||(e=[],r.removeClass(this.testsEl,"tests-added")),this._tests=this.testList.data=e,this._testMatches=null,this._reselectTest()}get tests(){return this._tests}set mode(e){e!==this.mode&&(this.modeList.selected=e||"text",this._handleModeChange())}get mode(){return this.modeList.selected}get selectedMatch(){let e=this.editor;return this.getMatchAt(e.indexFromPos(e.getCursor()),!0)}getMatchValue(e){return e?this.value.substr(e.i,e.l):null}getMatchAt(e,t){let i,r=t?-1:0,n=this._result&&this._result.matches;if(!n)return null;for(let t=0,s=n.length;t<s;t++)if(i=n[t],!(i.l+i.i-1<e+r)){if(i.i>e)break;return i}return null}getEmptyTest(){return{id:F.id,name:"",text:"Enter your test text here.",type:"any"}}_initUI(e){this.resultEl=r.query("> header .result",e),this.resultEl.addEventListener("mouseenter",e=>this._mouseResult(e)),this.resultEl.addEventListener("mouseleave",e=>this._mouseResult(e)),this.modeListEl=r.query("> header .modelist",e);let t=["Text","Tests"].map(e=>({label:e,id:e.toLowerCase()}));this.modeList=new d(this.modeListEl,{data:t}),this.modeList.on("change",()=>this._handleModeChange()),this.modeList.selected="text";let i=r.query(".editor > .pad",e);this.defaultText=r.query("textarea",i).value;let n=this.editor=h.create(r.empty(i),{lineWrapping:!0},"100%","100%");n.setValue(this.defaultText),n.on("change",()=>this._change()),n.on("scroll",()=>this._update()),n.on("cursorActivity",()=>this._updateSelected());let o=r.create("iframe","resizedetector",null,i).contentWindow,a=this.canvas=r.create("canvas","highlights",null,i);i.appendChild(n.display.wrapper),o.onresize=()=>{let e=0|o.innerWidth,t=0|o.innerHeight;this._startResize(),s.defer(()=>this._handleResize(e,t),"text_resize",250)},o.onresize(),this.highlighter=new N(n,a,r.getCSSValue("match","color"),r.getCSSValue("selected-stroke","color")),this.hover=new I(n,this.highlighter)}_handleThemeChange(){this.highlighter.fill=r.getCSSValue("match","color"),this.highlighter.stroke=r.getCSSValue("selected-stroke","color"),this.highlighter.redraw()}_handleModeChange(e){this.dispatchEvent("modechange"),"text"===this.mode?this.editor.refresh():r.addClass(this.el,"tests-viewed"),u.page("mode/"+this.mode)}_setResult(e){this._result=e,this._testMatches=null,this.mode===e.mode&&("tests"===e.mode?this._updateTests():(this._updateEmptyCount(),this._updateResult(),this._updateSelected(),this._deferUpdate()))}_deferUpdate(){s.defer(()=>this._update(),"Text._update")}_update(){let e=this._result,t=e&&e.matches;e&&"tests"===e.mode?this._updateTests():this.hover.matches=this.highlighter.matches=t}_updateResult(){let e,t=this._result,i=t&&t.matches,r=i&&i.length;r&&t&&!t.error?e=r+" match"+(r>1?"es":"")+(this._emptyCount?"*":""):t&&t.error||(e="No match"),this._showResult(e)}_showResult(e,t){let i=this._result,n=this.resultEl;r.removeClass(n,"error warning matches pass fail"),i&&i.error&&(e||(e=i.error.warning?"WARNING":"ERROR"),r.addClass(n,"error"),i.error.warning&&r.addClass(n,"warning")),t&&r.addClass(n,t),n.innerHTML=e,null!=i.time&&(n.innerHTML+="<em> ("+parseFloat(i.time).toFixed(1)+"ms)</em>")}_updateSelected(){let e=this.selectedMatch;this.highlighter.selectedMatch!==e&&(this.highlighter.selectedMatch=e,this.dispatchEvent("select"))}_change(){this.dispatchEvent("change")}_startResize(){let e=this.canvas,t=e.style;t.visibility="hidden",t.opacity=0,e.width=e.height=1}_mouseResult(e){let t=ne.tooltip.hover,i=this._result,r=i&&i.error,n="";if("mouseleave"===e.type)return t.hide("result");if(r&&!r.warning)n="<span class='error'>EXEC ERROR:</span> "+this._errorText(r);else{r&&r.warning&&(n="<span class='error warning'>WARNING:</span> "+this._errorText(r)+"<hr>");let e=this._tests.length;if("tests"===this.mode)0===this._tests.length?n+="Use the 'Add Test' button to create a new test.":this._testFails?n+=this._testFails+" out of "+e+" tests failed.":n+="All "+e+" tests passed.";else{n+=(e||"No")+" match"+(e>1?"es":"")+" found in "+this.value.length+" characters",n+=this._emptyCount?", including "+this._emptyCount+" empty matches (* not displayed).":".";let t=this.editor,i=t.listSelections()[0],r=i.head,s=t.indexFromPos(r),o=t.indexFromPos(i.anchor),a=Math.abs(s-o);n+="<hr>Insertion point: line "+r.line+", col "+r.ch+", index "+s,n+=a>0?" ("+a+" character"+(1===a?"":"s")+" selected)":""}}t.showOn("result",n,this.resultEl,!1,-2)}_updateEmptyCount(){let e=this._result,t=e&&e.matches;this._emptyCount=t?t.reduce((e,t)=>e+(t.l?0:1),0):0}_errorText(e){return e.message||ne.reference.getError(e)}_handleResize(e,t){let i=this.canvas,r=i.style;r.visibility=r.opacity="",i.width=e,i.height=t,this.editor.refresh(),this._deferUpdate()}_initTestUI(e){const t=[{id:"all",label:"Match Full"},{id:"any",label:"Match Any"},{id:"none",label:"Match None"}];this.typeLabels=t.reduce((e,t)=>(e[t.id]=t.label,e),{}),this.testsEl=r.query(".tests",e),this.testItemEl=r.query("#library > #tests_item"),this.testListEl=r.query(".list",this.testsEl),this.testList=new d(this.testListEl,{template:e=>this._testItemTemplate(e)}),this.testList.scrollEl=this.testsEl,this.testList.on("change",e=>this._handleTestChange(e)),r.on(r.queryAll(".button.add",e),"click",()=>this._addTest());const i=r.template`<svg class="inline check icon"><use xlink:href="#check"></use></svg> ${"label"}`;this.typesEl=r.query("#library #tooltip-testtypes"),this.typesList=new d(r.query("ul.list",this.typesEl),{data:t,template:i}),this.typesList.on("change",()=>this._handleTypesChange()),this.tests=null}_updateTests(){let e=this._result;if(e.error)return this._showResult();let t=this._tests,i=t.length;if(!t||!i)return this._showResult("No tests.");let n=e.matches.reduce((e,t)=>(e[t.id]=t,e),{}),s=0;for(let e=0;e<i;e++){let i=t[e],o=n[i.id],a=!1,l=this.testList.getEl(i.id);a="none"===i.type?null==o.i:"all"===i.type?o.l===i.text.length:"start"===i.type?0===o.i:null!=o.i,r.toggleClass(l,"fail",!a),a||s++}this._testFails=s,this._testMatches=n,s?this._showResult(s+" FAILED","fail"):this._showResult("PASSED","pass"),this._updateSelTest()}_updateSelTest(){this._testMark&&this._testMark.clear();let e=this._testMatches;if(!this.testList.selectedEl||!e)return;let t=e[this.testList.selected],i=this.testEditor;if(t&&null!=t.i){let e=h.calcRangePos(i,t.i,t.l);this._testMark=this.testEditor.getDoc().markText(e.startPos,e.endPos,{className:"match"})}}_testItemTemplate(e){let t=this.testItemEl.cloneNode(!0),i=r.query("header .button.type",t);i.addEventListener("click",t=>this._showTypes(i,e)),r.query("header .delete",t).addEventListener("click",t=>this._deleteTest(e));let n=r.query("header .name",t);return n.addEventListener("input",()=>this._handleTestNameChange(n,e)),this._updateTestHeader(e,t,!1),t}_updateTestHeader(e,t,i){let n=r.query("header .name",t);n.value=e.name||"",n.placeholder=e.text&&!i?e.text.substr(0,100):"Untitled Test",r.query("header .button.type .label",t).innerText=this.typeLabels[e.type]}_addTest(){const e=this.getEmptyTest();this._tests.push(e),this.testList.addItem(e,!0),this._handleTestChange(),this.testEditor.execCommand("selectAll"),r.addClass(this.testsEl,"tests-added"),this._change()}_reselectTest(){this._selTest&&(this.testList.selected=this._selTest.id),this._selTest&&null!=this.testList.selected||(this.testList.selectedIndex=0),this._selTest=null,this._handleTestChange()}_handleTestChange(){let e,t;this._selTest&&(t=this._selTest,e=this.testList.getEl(t.id),this._updateTestHeader(t,e,!1)),e=this.testList.selectedEl,t=this._selTest=this.testList.selectedItem,t&&(this._getTestEditor(r.query("article .editor .pad",e),t),this._updateTestHeader(t,e,!0),this._updateSelTest(),this.testEditor.focus(),this.testEditor.setCursor(this.testEditor.lineCount(),0))}_handleTestNameChange(e,t){t.name=e.value,this._change()}_handleTypesChange(){let e=this.testList.selectedEl,t=this.testList.selectedItem;t.type=this.typesList.selectedItem.id,ne.tooltip.toggle.hide("testtypes"),this._updateTestHeader(t,e,!0),this._change()}_handleTestTextChange(e){this._selTest.text=this.testEditor.getValue(),"setValue"!==e.origin&&this._change()}_showTypes(e,t){this.typesList.selected=t.type,ne.tooltip.toggle.toggleOn("testtypes",this.typesEl,e,!0,-2)}_deleteTest(e){let t=this._tests,i=t.indexOf(e);t.splice(i,1),this._selTest=null,this.testList.removeItem(e.id),t.length&&(this.testList.selected=t[Math.min(i,t.length-1)].id),this._updateTests(),this._handleTestChange(),this._change()}_getTestEditor(e,t){let i=this.testEditor;i?e.appendChild(i.getWrapperElement()):(i=this.testEditor=h.create(r.empty(e),{lineWrapping:!0},"100%","100%"),i.on("change",(e,t)=>this._handleTestTextChange(t))),i.setValue(t.text)}}class P{constructor(e){this.el=e,r.addClass(e,"explain"),this._update(),this._bound_handleEvent=e=>this._handleEvent(e),ne.expression.addEventListener("change",this._bound_handleEvent),ne.expression.highlighter.addEventListener("hover",this._bound_handleEvent)}cleanup(){r.empty(this.el),r.removeClass(this.el,"explain"),ne.expression.removeEventListener("change",this._bound_handleEvent),ne.expression.highlighter.removeEventListener("hover",this._bound_handleEvent)}_update(){let e=r.empty(this.el),t=ne.expression.token,i=ne.expression.value;if(this._divs=[],t&&"close"!==t.next.type)for(e.innerHTML="<span class='desc'>Roll-over elements below to highlight in the Expression above. Click to open in Reference.</span>";(t=t.next)&&"close"!==t.type;){if(t.proxy||t.open&&t.open.proxy)continue;let n=g.GROUP_CLASS_BY_TYPE,s=g.CSS_PREFIX,o=t.i,a=t.i+t.l,l=i.substring(o,a).replace("<","&lt;");if(t.set){let e=t.set[0],r=t.set[2];l="<span class='"+s+(e.clss||e.type)+"'>"+i.substring(e.i,e.i+e.l)+"</span>",l+=i.substring(o,a),l+="<span class='"+s+(r.clss||r.type)+"'>"+i.substring(r.i,r.i+r.l)+"</span>"}let c=s+(t.clss||t.type);l="<code class='token "+c+"'>"+l+"</code> ",t.open?l+="&nbsp;":l+=ne.reference.tipForToken(t);let h=r.create("div",null,l,e);if(t.close){if(c=n[t.clss||t.type],c&&(c=c.replace("%depth%",Math.min(4,t.depth)),r.addClass(h,c)),t.depth>3){h.innerHTML="So... you wanted to see what would happen if you just kept nesting groups, eh? Well, this is it. I was going to reward your curiosity with a RegEx joke, but a quick search on google reveals that not even the collective wisdom of the internet can make regular expressions funny. Well, except the whole 'now you've got two problems' shtick, but you've probably heard that one already. Wasn't really worth the effort, was it?",t=t.close.prv,this._divs.push(h),e=h;continue}e=h}h.token=t,t.open&&(r.addClass(h,"close"),h.proxy=e,e=e.parentNode),t.error&&(r.addClass(h,"error"),t.error.warning&&r.addClass(h,"warning")),t.open||(h.addEventListener("mouseover",this._handleMouseEvent),h.addEventListener("mouseout",this._handleMouseEvent),h.addEventListener("click",this._handleMouseEvent)),"quant"===t.clss||"lazy"===t.type||"possessive"===t.type?this._insertApplied(h):this._divs.push(h)}else e.innerHTML="<span class='desc'>Enter an Expression above and it will be explained here.</span>"}_insertApplied(e){let t,i=this._divs,n=e.token.prv,s=i.length;for(;(t=i[--s])&&t.token!==n;);t=t.proxy||t,i.splice(s,0,e),t.insertAdjacentElement("afterend",e),r.addClass(e,"applied")}_handleHoverChange(){let e=ne.expression.highlighter.hoverToken;if(r.removeClass(r.queryAll("div.selected",this.el),"selected"),r.removeClass(r.queryAll("div.related",this.el),"related"),!e)return;let t=this._findDiv(e);if(r.addClass(t,"selected"),e.related)for(let t=0,i=e.related.length;t<i;t++)r.addClass(this._findDiv(e.related[t]),"related")}_findDiv(e){return s.find(this._divs,t=>t.token===e)}_handleMouseEvent(e){let t=e.type,i=e.currentTarget.token;"click"==t?ne.sidebar.showToken(i):ne.expression.highlighter.hoverToken="mouseout"===t?null:i,e.stopPropagation()}_handleEvent(e){"change"===e.type?this._update():"hover"===e.type&&this._handleHoverChange()}}class D{constructor(e){this.el=e,r.addClass(e,"details"),this._update(),this._bound_handleEvent=e=>this._handleEvent(e),ne.addEventListener("result",this._bound_handleEvent),ne.text.addEventListener("select",this._bound_handleEvent)}cleanup(){r.empty(this.el),r.removeClass(this.el,"details"),ne.removeEventListener("result",this._bound_handleEvent),ne.text.removeEventListener("select",this._bound_handleEvent),s.defer(null,"Details._update")}_update(){r.empty(this.el),r.create("div","desc","Click a <span class='match'>match</span> above to display match &amp; group details. Mouse over a <code>Group</code> row to highlight it in the Expression.",this.el),this._addMatch(ne.text.selectedMatch,ne.text.value)}_addMatch(e,t){if(!e)return;let i=e.groups,n=i&&i.length,o=n&&null!=i[0].i,a=this._getMatchVal(e,t),l="",c=e.i+e.l,h=ne.expression.lexer.captureGroups,u=r.create("table",null,null,this.el),d=r.create("tr","match","<td>Match "+e.num+"</td><td>"+this._getRangeStr(e)+"</td><td></td>",u);if(n){let a=[],d=e.i;for(let e=0;e<=n;e++){let n=i[e],p=n?n.i:c,f=e+1,g=h[e];if(o)for(let e=a.length-1;e>=0;e--){let i=a[e],r=i.i+i.l;if(r>p)break;a.pop(),l+=s.htmlSafe(t.substring(d,r))+"</span>",d=r}if(!n)break;n.l&&(l+=s.htmlSafe(t.substring(d,p))+"<span class='group-"+f%6+" num-"+f+"'>",a.push(n),d=p);let m="<span"+(o?" class='group-"+f%6+"'":"")+">"+this._getMatchVal(n,t)+"</span>",v=g.name?"'"+g.name+"'":"Group "+f,y=r.create("tr","group","<td>"+v+"</td><td>"+this._getRangeStr(n)+"</td><td>"+m+"</td>",u);y.token=g,y.addEventListener("mouseover",this._handleMouseEvent),y.addEventListener("mouseout",this._handleMouseEvent)}o&&(l+=s.htmlSafe(t.substring(d,c)))}else r.create("tr","nogroup","<td colspan='3'>No groups.</td>",u);r.query("td:last-child",d).innerHTML=l||a}_getMatchVal(e,t){let i=e.s||(void 0===e.i?"":t.substr(e.i,e.l));return i?s.htmlSafe(i):"<em>&lt;empty&gt;</em>"}_getRangeStr(e){return null!=e.i?e.i+"-"+(e.i+e.l-1):"n/a"}_handleEvent(e){s.defer(()=>this._update(),"Details._update")}_handleMouseEvent(e){let t=e.type,i=e.currentTarget.token;ne.expression.highlighter.hoverToken="mouseout"===t?null:i,"mouseover"===t?r.addClass(r.query("span.num-"+i.num,this.el),"hover"):r.removeClass(r.query("span.hover",this.el),"hover"),e.stopPropagation()}}class H{constructor(e,t){this.el=e,this.editor=t,this._bound_handleEvent=e=>this._handleEvent(e),ne.addEventListener("result",this._bound_handleEvent),this._initUI(),this._update()}cleanup(){r.empty(this.el),this.output.value="",r.removeClass(this.el,"details"),ne.removeEventListener("result",this._bound_handleEvent),s.defer(null,"Replace._update")}_initUI(){this.output=r.create("textarea",null,null,this.el),this.output.readOnly=!0}_update(){let e=ne.result&&ne.result.tool,t=e&&e.result;this.output.value=t||"no result"}_handleEvent(e){s.defer(()=>this._update(),"Replace._update")}}class q{constructor(){this.profile=null}set profile(e){this._profile=e,this.string=this.token=this.errors=null}parse(e){if(!this._profile)return null;this.token=null,this.string=e,this.errors=[];let t,i,r=ne.expression.lexer.captureGroups,n=null;for(let s=0,o=e.length;s<o;s+=t.l)i=e[s],t={prev:n,i:s,l:1,subst:!0},"$"===i&&s+1<o?this.parseDollar(e,t,r):"\\"==i&&s+1<o&&this.parseBackSlash(e,t,r),t.type||(t.type="char",t.code=i.charCodeAt(0)),n&&(n.next=t),this.token||(this.token=t),t.error&&this.errors.push(t.error),n=t;return this.token}parseBackSlash(e,t,i){let r,n=e.substr(t.i),s=this._profile;s.substTokens.subst_bsgroup&&(r=n.match(/^\\(\d\d?)/))?this._getRef(r[1],t,i,"subst_bsgroup"):(r=n.match(q.SUBST_ESC_RE))&&("u"===r[1][0]?(t.type="escunicode",t.code=parseInt(r[2],16)):(t.code=s.escCharCodes[r[1]],t.type="esc_"+t.code),t.type&&(t.clss="esc",t.l+=r[1].length))}parseDollar(e,t,i){let r=e.substr(t.i+1).match(/^([$&`']|\d\d?|{\d\d?})/);if(!r)return;let n=r[1],s=q.$_TYPES[n],o=this._profile;if(s){if(!o.substTokens[s])return;t.type=s,t.clss="subst",t.l+=n.length}else this._getRef(n,t,i,"{"===n[0]?"subst_$bgroup":"subst_$group")}_getRef(e,t,i,r){if(!this._profile.substTokens[r])return;let n=parseInt(e.match(/\d\d?/)[0]),s=0;!this._profile.config.substdecomposeref||i[n-1]?s=e.length:n>=10&&i[(n=n/10|0)-1]&&(s=e.length-1),s&&(t.l+=s,t.type=n>0?"subst_group":"subst_0match",t.clss="subst",n>0&&(t.group=i[n-1]))}}q.$_TYPES={$:"subst_$esc","&":"subst_$&match","`":"subst_$before","'":"subst_$after",0:"subst_0match"},q.SUBST_ESC_RE=new RegExp("^"+s.SUBST_ESC_RE.source,"i");class W extends i{constructor(e){super(),this.el=e,this._initUI(),this.value=null}set value(e){e?(this.show(e.id),null!=e.input&&this.editor.setValue(e.input)):(this.show("explain"),this._toolValues=s.copy({},W.DEFAULT_VALUES))}get value(){return{id:this._toolId,input:this.input}}get input(){return this.hasInput?this.editor.getValue():null}get hasInput(){let e=this._toolId;return"replace"===e||"list"===e}show(e){if(!e||e===this._toolId)return;this.toolList.selected=this._toolId=e;let t="replace"===e||"list"===e;this._tool&&this._tool.cleanup(),r.toggleClass(r.query("> article",this.el),"showinput",t),t&&(this.editor.setValue(this._toolValues[e]),this.editor.refresh(),this.editor.focus()),"explain"===e?this._tool=new P(this.contentEl):"details"===e?this._tool=new D(this.contentEl):"replace"!==e&&"list"!==e||(this._tool=new H(this.resultEl,this.editor)),this._toolId=e,this._updateHighlights()}_initUI(){let e=this.el;this.headerEl=r.query("header",this.el),this.headerEl.addEventListener("click",e=>this._handleHeaderClick(e)),this.contentEl=r.query("> article > .content",e),this.resultEl=r.query("> article > .inputtool > .result",e),this.toolListEl=r.query(".toollist",this.headerEl);let t=["Replace","List","Details","Explain"].map(e=>({label:e,id:e.toLowerCase()}));this.toolList=new d(this.toolListEl,{data:t}),this.toolList.on("change",()=>this._handleListChange());let i=this.editor=h.create(r.query(".inputtool .editor",e),{maxLength:2500,singleLine:!0},"100%","100%");r.query(".help.icon",e).addEventListener("click",()=>ne.sidebar.goto(this._toolId)),i.on("change",()=>this._handleEditorChange()),ne.flavor.on("change",()=>this._updateHighlights()),ne.expression.on("change",()=>this._updateHighlights()),this.lexer=new q,this.highlighter=new g(i),this.hover=new m(i,this.highlighter)}_handleEditorChange(){this._updateHighlights(),this._toolValues[this._toolId]=this.editor.getValue(),this.dispatchEvent("change")}_updateHighlights(){if(!this.hasInput)return;this.lexer.profile=ne.flavor.profile;let e=this.lexer.parse(this.editor.getValue());this.highlighter.draw(e),this.hover.token=e}_handleListChange(){this.show(this.toolList.selected),u.page("tool/"+this.toolList.selected)}_handleHeaderClick(e){!r.hasClass(this.el,"closed")&&this.toolListEl.contains(e.target)||r.togglePanel(this.el,"article")}}W.DEFAULT_VALUES={replace:"<< $& >>",list:"$&\\n"};let B={id:"home",label:"Menu",desc:"[from HTML]",kids:[{label:"Pattern Settings",id:"share",el:"#share_main",list:!1,kids:[{label:"Save to my Favorites",id:"share_favorites",el:"#share_favorites"},{label:"Share with the Community",id:"share_community",el:"#share_community"}]},{label:"My Patterns",id:"favorites",desc:"The list above will display any patterns that you create or favorite.<p>To edit a pattern you created, click its URL or double-click it in the list to load it, then open Save / Share to edit and save.</p>",search:!0,kids:[]},{label:"Cheatsheet",id:"cheatsheet",el:"#cheatsheet"},{id:"reference"},{label:"Community Patterns",id:"community",desc:"Welcome to Community Patterns, a searchable database of patterns submitted by users like you.<p>After selecting a pattern, click its URL or double-click it in the list to load the full pattern. Or use the right arrow icon to load just the expression or text.</p><p>Help make the Community better by rating patterns, and submitting your own via <b>Search & Share</b> in the menu.</p>",search:!0,kids:[]},{label:"Help",id:"help",desc:"Help for the RegExr application. See the <b>RegEx Reference</b> for help with Regular Expressions.",kids:[{label:"About",desc:"RegExr v3.8.0 (Jun 1, 2020).<p>Created by <a href='http://twitter.com/gskinner/' target='_blank'>Grant Skinner</a> and the <a href='http://gskinner.com/' target='_blank'>gskinner</a> team, using the <a href='http://createjs.com/' target='_blank'>CreateJS</a> & <a href='http://codemirror.net/' target='_blank'>CodeMirror</a> libraries.</p><p>You can provide feedback or log bugs on <a href='http://github.com/gskinner/regexr/' target='_blank'>GitHub</a>.</p>"},{label:"Getting started",desc:"RegExr provides real-time visual results, syntax highlighting, tooltips, and undo/redo ({{getCtrlKey()}}-Z / Y) so it's easy and fun to explore Regular Expressions.<p>Browse through the <b>RegEx Reference</b> and test different tokens to see what they do, then check out <b>Community Patterns</b> to see examples.</p><p>You can also <b>Save</b> your patterns for later reference, or to share with others. <b>Sign In</b> to ensure you don't lose your patterns.</p><p>Modify your pattern's details, share it with the <b>Community</b>, or make it private, or delete it in <b>Pattern Settings</b></p>",kids:[{label:"Expression panel",desc:"This is where you enter a regular expression to test. The results in the <b>Text</b> and <b>Tools</b> panel will update as you type.Roll over the expression for information on each token.<p>The buttons to the right allow you to switch RegEx engines, or edit the expression flags.</p>"},{label:"Text panel",desc:"This is where you enter text to test your expression against. Drag & drop a text file to load its contents.<p>Matches will be highlighted as you type. Roll over a match for information on the match and its capture groups. The match count and execution time are shown in the title bar.</p><p>Lighter colored caps at the start or end of a line indicate the match continues between lines.</p>"},{label:"Tests panel",desc:"This allows you to create a suite of tests that you can use to validate your <b>Expression</b> in real time.<p>A test can check if the pattern matches anything, matches everything, or matches nothing in the test text.</p><p>Access this panel with the toggle at the top of the <b>Text</b> panel. When you save, both your Text and Tests will be saved.</p>"},{label:"Tools panel",desc:"Click the <b>Tools</b> title bar below the <b>Text</b> panel to show or hide the <b>Tools</b> panel.<p>Tools provide different ways of working with or exploring your results.</p>",kids:[{label:"Replace",id:"replace",desc:"The <b>Replace</b> tool replaces matches with a specified string or pattern.<p>Matches in the <b>Text</b> panel are replaced by the substitution string & displayed as you type.</p><p>Substitution tokens and escaped characters are supported, such as <code>\\n</code>, <code>\\t</code> & <code>\\u0009</code>.</p><p>Roll over tokens for information, and check out the <b>RegEx Reference</b> for more information.</p>"},{label:"List",id:"list",desc:"The <b>List</b> tool lists all found matches.<p>You can specify either a simple delimiter (ex. <code>,</code> or <code>\\n</code>), or use substitution tokens to generate more advanced reports. For example, <code>$1\\n</code> would list all group 1 results (in the JavaScript engine).</p><p>Escaped characters are supported, such as <code>\\n</code>, <code>\\t</code> & <code>\\u0009</code>.</p><p>Roll over tokens for information.</p>"},{label:"Details",id:"details",desc:"The <b>Details</b> tool displays the full text of a match and its capture groups.<p>Click on a highlighted match in the <b>Text</b> panel to display the details for that match.</p><p>Roll over a group row to highlight that group in your <b>Expression</b>.</p>"},{label:"Explain",id:"explain",desc:"The <b>Explain</b> tool displays a detailed breakdown of the <b>Expression</b>.<p>Mouse over the explanation to highlight the related tokens in the <b>Expression</b> panel and vice versa.</p><p>Click an item in the explanation to show more info in the <b>RegEx Reference</b>.</p>"}]},{label:"Menu",desc:"The <b>Menu</b> (this panel) includes <b>Help</b>, a full <b>RegEx Reference</b>, a <b>Cheatsheet</b>, and <b>Pattern Settings</b> features.<p>Double-click a selected item in the <b>RegEx Reference</b> to insert it into your <b>Expression</b>. Click the arrow beside an example to load it.</p><p>The menu also includes searchable <b>Community Patterns</b>, and patterns you've created or favorited in <b>My Patterns</b>.</p>"}]},{label:"Signing in",id:"signin",desc:"Before you sign in, RegExr creates a temporary account which relies on a browser cookie. This means you can't access your patterns on other computers, and that you could lose your patterns if your cookies are deleted or expire.<p>Signing in creates a permanent account, so you can access your patterns anywhere, anytime.</p><p>Your existing patterns &amp; favorites will automatically be assigned to the new account.</p><p>We don't use your info for anything other than signing you into your RegExr account.</p>"},{id:"engine",label:"RegEx engines",desc:"While the core feature set of regular expressions is fairly consistent, different implementations (ex. Perl vs Java) may have different features or behaviours.<p>RegExr currently supports JavaScript RegExp executed in your browser and PCRE via PHP.</p><p>You can switch engines using the dropdown in Expression.</p>",kids:[{label:"JavaScript",desc:"Your browser's JavaScript engine is used to execute RegEx in an asynchronous worker using <code>RegExp.exec()</code>.<p>Note that while implementations are mostly consistent, there are small variations between browsers. Here is a short list of known differences:<ul><li>Older browsers don't support the u or y flags</li><li>Differences in handling of certain ambiguous escapes: \\8 \\9</li><li>Chrome handles \\x & \\u escapes slightly differently than other browsers</li><li>Chrome supports lookbehind, but it isn't yet in the JS spec</li><li>Safari ignores leading zeros in octal escapes (ex. \\00020)</li></ul></p>"},{label:"PCRE (PHP)",desc:"PHP {{getPHPVersion()}} and PCRE {{getPCREVersion()}} are used to execute your pattern on our server."}]},{label:"Query string support",desc:"In addition to the built in <b>Save</b> mechanism which creates a shareable link, RegExr also supports the ability to pre-populate a pattern via the query string.<p>The following query string params are recognized:<ul><li><code>engine</code> - the RegEx engine to use (<code>js</code> or <code>pcre</code>)</li><li><code>expression</code> - populates the Expression area. It is recommended to pass a full expression with flags (<code>/.*/ig</code>) not just the pattern (<code>.*</code>)</li><li><code>text</code> - populates the Text area</li><li><code>tool</code> - sets the tool (replace, list, details, or explain)</li><li><code>input</code> - populates the tool input field</li></ul></p>Ex. <a href='http://regexr.com/?expression=/./g&text=test'>regexr.com/?expression=/./g&text=test</a>"}]}]};class z{constructor(e){this.el=e,this._initUI(),this.url=null}set pattern(e){let t=s.getPatternURLStr(e);this._pattern=e,r.query(".url",this.el).innerText=t||"",r.toggleClass(this.el,"disabled",!t),r.toggleClass(this.el,"active",!!t)}showMessage(e){setTimeout(()=>ne.tooltip.toggle.showOn("linkrow",e,r.query(".copy.icon",this.el),!0,0),1)}_initUI(){this.el.onclick=e=>this._onClick(e);let e=r.query(".url",this.el),t=r.query(".copy",this.el),i=new Clipboard(t,{target:()=>e});i.on("success",()=>ne.tooltip.toggle.toggleOn("copy","Copied to clipboard.",t,!0,3)),i.on("error",e=>ne.tooltip.toggle.toggleOn("copy",s.getCtrlKey()+"-C to copy.",t,!0,3))}_onClick(e){r.query(".copy",this.el).contains(e.target)||(2===e.which||e.metaKey||e.ctrlKey?window.open(s.getPatternURL(this._pattern)):ne.load(this._pattern))}}class U{constructor(e,t){this.el=r.create("div","example"),this.title=e,this.example=t}set example(e){if(e===this._example)return;this._example=e;let t,i,n,o="";if(e&&(i=e[0],t=e[1],n=s.getRegExp(i,"g"),this.title&&(o+="<h1>"+this.title+"</h1><hr>"),o+="<code class='expression'><svg class='icon load'><use xlink:href='#load'><title>Load expression</title></use></svg>"+s.htmlSafe(i)+"</code>",t&&n)){let e=Math.max(0,t.length-160),i=t;e&&(i=s.htmlSafe(i.substr(0,159))),n&&(i=i.replace(n,"<em>$&</em>")),o+="<hr><code class='text'><svg class='icon load'><use xlink:href='#load'><title>Load text</title></use></svg>"+i+(e?"<i>â€¦</i>":"")+"</code>"}this.el.innerHTML=o,i&&r.query("code.expression > .load",this.el).addEventListener("click",()=>{ne.expression.value="/"===i[0]?i:"/"+i+"/g"}),t&&r.query("code.text > .load",this.el).addEventListener("click",()=>ne.text.value=t)}}class G{constructor(e){this.el=e,this.example=new U,e.appendChild(this.example.el),r.query(".icon.thumbup",e).addEventListener("click",()=>this._rate(1)),r.query(".icon.thumbdown",e).addEventListener("click",()=>this._rate(-1)),r.query(".icon.favorites",e).addEventListener("click",()=>this._favorite()),this.linkRow=new z(r.query(".row.link",e)),r.query(".icon.share",e).addEventListener("click",()=>this._share())}set item(e){let t=this.el;this._pattern=e,r.query(".author",t).innerText=e.author?"by "+e.author:"",r.query(".name.label",t).innerText=e.name,r.query(".desc",t).innerText=e.description||"No description available.",this._updateRating(),this._updateFavorite(),this.example.example=[e.expression,e.text],this.linkRow.pattern=e}_updateRating(){let e=this._pattern,t=this.el;r.query(".rating",t).innerText=e.rating.toFixed(1),r.removeClass(r.query(".icon.rate.selected",t),"selected"),1===e.userRating?r.addClass(r.query(".icon.thumbup",t),"selected"):-1===e.userRating&&r.addClass(r.query(".icon.thumbdown",t),"selected")}_updateFavorite(){let e=this._pattern,t=this.el;r.toggleClass(r.query(".icon.favorites",t),"selected",!!e.favorite)}_rate(e){let t=this._pattern;t.userRating=e===t.userRating?0:e,this._updateRating(),l.rate(t.id,t.userRating).then(e=>this._handleRate(e))}_share(){ne.load(this._pattern),ne.share.show()}_handleRate(e){e.id===this._pattern.id&&(this._pattern.rating=e.rating,this._updateRating())}_favorite(){let e=this._pattern;l.favorite(e.id,!e.favorite).then(e=>this._handleFavorite(e))}_handleFavorite(e){e.id===this._pattern.id&&(this._pattern.favorite=e.favorite,this._updateFavorite())}}class V{constructor(e){e||(e=document.createElement("div")),this.el=e,r.addClass(e,"status"),e.addEventListener("mouseover",()=>this._showTooltip()),e.addEventListener("mouseout",()=>this._hideTooltip())}distract(){return this.el.innerHTML='<svg class="icon distractor anim-spin"><use xlink:href="#distractor"></use></svg>',this._show(),this}hide(e=0){return this._clearTimeout(),e?this._timeoutId=setTimeout(()=>this._hide(),1e3*e):this._hide(),this}success(){return this.el.innerHTML='<svg class="icon success"><use xlink:href="#check"></use></svg>',this._show(),this}error(e){return this.el.innerHTML='<svg class="icon alert"><use xlink:href="#alert"></use></svg>',this._show(),this._ttMsg=e,this}_showTooltip(){this._ttMsg&&ne.tooltip.hover.showOn("status",this._ttMsg,this.el,!0,0)}_hideTooltip(){ne.tooltip.hover.hide("status")}_show(){this.el.style.display=null,this._ttMsg=null,this._hideTooltip(),this._clearTimeout()}_hide(){this.el.style.display="none",this._hideTooltip(),this._clearTimeout()}_clearTimeout(){null!=this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)}}class j extends i{constructor(){super(),this._value={},this._initUI()}get value(){return this._value}set value(e={}){this._value=e,this._updateUI(),this.dispatchEvent("change")}get userId(){return this._value.userId}get author(){return this._value.author||this._value.username||""}get username(){return this._value.username||""}get authenticated(){return!!this._value.username}get type(){return this._value.type}showTooltip(){ne.tooltip.toggle.toggleOn("signin",this.tooltipEl,this.signinBtn,!0,20)}_initUI(){this.signinBtn=r.query(".header .signin"),this.tooltipEl=r.query("#library > #tooltip-signin"),this.signinEl=r.query(".signin",this.tooltipEl),this.signoutEl=r.query(".signout",this.tooltipEl),r.query(".signoutbtn",this.signoutEl).addEventListener("click",e=>this._doSignout()),this.signinBtn.addEventListener("click",e=>this.showTooltip()),r.query(".icon.help",this.signinEl).addEventListener("click",()=>ne.sidebar.goto("signin")),this.signinList=new d(r.query("ul.list",this.signinEl),{data:["GitHub","Facebook","Google"],template:e=>'<svg class="icon inline"><use xlink:href="#'+e.toLowerCase()+'"></use></svg>'+e}),this.signinList.on("change",()=>this._signinListChange())}_updateUI(){let e=this.authenticated;r.toggleClass(this.tooltipEl,"authenticated",e),r.query(".label",this.signinBtn).innerText=e?"Sign Out":"Sign In",e&&(r.query(".username",this.signoutEl).innerText=this.username,r.query(".type",this.signoutEl).innerText=this.type)}_doSignout(){r.addClass(this.tooltipEl,"wait"),l.logout().then(e=>{this._handleSignout(e)}).finally(()=>this._cleanSignout())}_handleSignout(e){this.value=e}_cleanSignout(e){r.removeClass(this.tooltipEl,"wait")}_signinListChange(){let e=this.signinList.selected.toLowerCase();r.addClass(this.tooltipEl,"wait"),u.event("login","access",e),setTimeout(()=>l.login(e),100)}}class K extends i{constructor(e){super(),this.el=e,this._pattern=!1,this._initUI(),ne.on("change",()=>this._handleAppChange()),ne.on("load",()=>this._handleAppLoad()),ne.account.on("change",()=>this._handleAccountChange())}get value(){return{id:this._pattern?this._pattern.id:null,name:this.name,author:this.author,description:this.description,keywords:this.keywords}}set pattern(e){this._pattern=e,this.name=e.name,this.description=e.description,this.keywords=e.keywords,this._updateUI(),this._pushHistory(e)}get name(){return this.nameFld.value}set name(e){this.nameFld.value=e||"",this.hNameFld.innerText=e||"Untitled Pattern"}get author(){return this.authorFld.value}set author(e){this.authorFld.value=e||""}get description(){return this.descriptionFld.value}set description(e){this.descriptionFld.value=e||""}get keywords(){return this.keywordsFld.value}set keywords(e){this.keywordsFld.value=e||""}show(){ne.sidebar.goto("share")}_initUI(){let e=this.el,t=this.mainEl=r.query("> #share_main",e),i=this.communityEl=r.query("> #share_community",e),n=r.query(".header");this.hNewBtn=r.query(".new",n),this.hForkBtn=r.query(".fork",n),this.hSaveBtn=r.query(".save",n),this.hNameFld=r.query(".name",n),r.query(".settings",n).addEventListener("click",()=>this.show()),r.query(".savekey",this.hSaveBtn).innerText="("+s.getCtrlKey()+"-s)",this.hSaveBtn.addEventListener("click",()=>this._doSave()),this.hNewBtn.addEventListener("click",()=>this._doNew()),this._defaultName=this.hNameFld.innerText,this._privateRow=r.query(".row.private",this.mainEl),this._privateRow.addEventListener("click",()=>this._doPrivate()),this._privateStatus=new V(r.query(".status",this._privateRow)),this._favoritesRow=r.query(".row.favorites",this.mainEl),this._favoritesRow.addEventListener("click",()=>this._doFavorite()),this._favoritesStatus=new V(r.query(".status",this._favoritesRow)),this._communityRow=r.query(".row.community",this.mainEl),this._communityRow.addEventListener("click",()=>this._showCommunity()),this._deleteRow=r.query(".row.delete",this.mainEl),this._deleteRow.addEventListener("click",()=>this._doDelete()),this._deleteStatus=new V(r.query(".status",this._deleteRow)),r.query(".row.signin a",this.mainEl).addEventListener("click",()=>this._doSignin()),this._linkRow=new z(r.query(".link.row",t));let o=this.saveEl=r.query("> .save",t);this.saveBtn=r.query(".button.save",o),this.forkBtn=r.query(".button.fork",o),this.saveBtn.addEventListener("click",()=>this._doSave()),this.forkBtn.addEventListener("click",()=>this._doSave(!0)),this.saveStatus=new V(r.query(".status",o)),this.saveMessage=r.query(".message",o);let a=this.infoEl=r.query("> .info",t);this.nameFld=r.query(".name",a),this.authorFld=r.query(".author",a),this.descriptionFld=r.query(".description",a),this.keywordsFld=r.query(".keywords",a),this.nameFld.addEventListener("input",()=>this._handleChange()),this.authorFld.addEventListener("input",()=>this._handleChange()),this.descriptionFld.addEventListener("input",()=>this._handleChange()),this.keywordsFld.addEventListener("input",()=>this._handleChange());let l=r.query(".inputs",i);r.query(".button.cancel",i).addEventListener("click",()=>ne.sidebar.goto("share")),r.query(".button.share",i).addEventListener("click",()=>this._doComSave()),this.comSaveStatus=new V(r.query(".status",i)),this._comNameFld=r.query(".name",l),this._comAuthorFld=r.query(".author",l),this._comDescriptionFld=r.query(".description",l),this._comKeywordsFld=r.query(".keywords",l),window.document.addEventListener("keydown",e=>this._handleKey(e))}_updateUI(){let e,t=this._pattern,i=this._isChanged(),n=this._isNew(),s=this._isOwned();r.toggleClass([this.forkBtn,this.hForkBtn],"disabled",!this._canFork()),r.toggleClass(this.saveBtn,"disabled",!this._canSave()),r.toggleClass(this.hSaveBtn,"disabled",!this._canSave()&&s),r.query(".action",this.hSaveBtn).innerText=s?"Save":"Fork",e=s?i?n?"Save will create a shareable public link.":"Save will update the current link.":"No unsaved changes.":"This pattern was created by '"+(t.author||"[anonymous]")+"'.",s||i?n||(e+=" Fork will create a new copy"+(i?" with your changes.":".")):e+=" Fork to create your own copy.",this._setSaveText(e),this._linkRow.pattern=this._pattern.id&&this._pattern,r.toggleClass(this._privateRow,"disabled",n||!s),r.toggleClass(this._favoritesRow,"disabled",n||!s),r.toggleClass(this._communityRow,"disabled",n||!s),r.toggleClass(this._deleteRow,"disabled",n||!s),r.toggleClass(this._privateRow,"active","private"===t.access),r.toggleClass(this._favoritesRow,"active",!!t.favorite)}_isNew(){return!this._pattern.id}_isOwned(){let e=this._pattern;return this._isNew()||e.userId===ne.account.userId}_isChanged(){return ne.unsaved}_canSave(){return this._isChanged()&&this._isOwned()}_canFork(){return!this._isNew()}_pushHistory(e){let t=window.history,i=s.getPatternURL(e),r="RegExr: "+(e.name||"Learn, Build, & Test RegEx");t.state&&e.id===t.state.id?t.replaceState(e,r,i):t.pushState(e,r,i),window.document.title=r}_handleKey(e){let t=s.isMac();"s"===e.key&&(t&&e.metaKey||!t&&e.ctrlKey)&&(this._doSave(!1),e.preventDefault())}_doSave(e){if(!e&&!this._canSave())return void ne.sidebar.goto("share");if(e&&!this._canFork())return;let t=ne.state;r.addClass(r.query(".buttons",this.saveEl),"wait"),this.saveStatus.distract(),l.save(t,e).then(e=>this._handleSave(e)).catch(e=>this._handleSaveErr(e))}_handleSave(e){let t=null==this._pattern.id,i=!t&&e.id!==this._pattern.id;r.removeClass(r.query(".buttons",this.saveEl),"wait"),this.saveStatus.hide(),ne.state=e,(i||t)&&(this.show(),!i&&this.name||(this.nameFld.focus(),this.nameFld.select()),this._linkRow.showMessage("<b>Saved.</b> New share link created. Click to copy to clipboard."))}_handleSaveErr(e){r.removeClass(r.query(".buttons",this.saveEl),"wait"),this.saveStatus.error(this._getErrMsg(e))}_doNew(){ne.newDoc()}_doPrivate(){let e=this._pattern;this._privateStatus.distract(),l.private(e.id,"private"!==e.access).then(e=>this._handlePrivate(e)).catch(e=>this._handleErr(e,this._privateStatus))}_handlePrivate(e){e.id===this._pattern.id&&(this._pattern.access=e.access,this._privateStatus.hide(),this._updateUI())}_doFavorite(){let e=this._pattern;this._favoritesStatus.distract(),l.favorite(e.id,!e.favorite).then(e=>this._handleFavorite(e)).catch(e=>this._handleErr(e,this._favoritesStatus))}_handleFavorite(e){e.id===this._pattern.id&&(this._pattern.favorite=e.favorite,this._favoritesStatus.hide(),this._updateUI())}_doDelete(){let e=this._pattern;confirm("Are you sure you want to permanently delete this pattern?")&&(this._deleteStatus.distract(),l.delete(e.id).then(e=>this._handleDelete(e)).catch(e=>this._handleErr(e,this._deleteStatus)))}_handleDelete(e){this._deleteStatus.hide(),ne.state={flavor:ne.flavor.value},setTimeout(()=>ne.tooltip.toggle.showOn("delete","Pattern was permanently deleted.",this._deleteRow,!0,0),1)}_handleErr(e,t){t.error(this._getErrMsg(e)).hide(6)}_showCommunity(){ne.sidebar.goto("share_community"),this._comNameFld.value=this.name,this._comAuthorFld.value=this.author,this._comDescriptionFld.value=this.description,this._comKeywordsFld.value=this.keywords}_doComSave(){if(!this._comNameFld.value)return void this._comNameFld.focus();let e=ne.state;this.name=e.name=this._comNameFld.value,this.author=e.author=this._comAuthorFld.value,this.description=e.description=this._comDescriptionFld.value,this.keywords=e.keywords=this._comKeywordsFld.value,e.access="public",r.addClass(r.query(".buttons",this.communityEl),"wait"),this.comSaveStatus.distract(),l.save(e,!0,!0).then(e=>this._handleComSave(e)).catch(e=>this._handleComSaveErr(e))}_handleComSave(e){r.removeClass(r.query(".buttons",this.communityEl),"wait"),this.comSaveStatus.hide(),this.show()}_handleComSaveErr(e){r.removeClass(r.query(".buttons",this.communityEl),"wait"),this.comSaveStatus.error(this._getErrMsg(e))}_handleChange(){this.dispatchEvent("change")}_handleAppChange(){this._updateUI()}_handleAccountChange(){let e=ne.account,t=r.query(".signin.row",this.mainEl);this.authorFld.value||(this.authorFld.value=e.author||e.username),r.toggleClass(t,"authenticated",e.authenticated),r.query(".username",t).innerText=e.username}_handleAppLoad(){r.toggleClass(r.query(".save .actions",this.mainEl),"disabled")}_doSignin(){ne.account.showTooltip()}_setSaveText(e){this.saveMessage.innerText=e}_getErrMsg(e){return"<span class='error'>ERROR:</span> "+ne.reference.getError("servercomm")}}class ${constructor(e){this.el=e,this.itemEl=null,this.openReq=null,this._initUI(e),this._content=this._prepContent(B),this.minList.data=[{id:"menu",label:"Menu"}].concat(B.kids),ne.flavor.on("change",()=>this._onFlavorChange());let t=ne.prefs.read("side");t&&this._idMap[t]&&"share"!==t||(t="home"),this.goto(t),ne.isNarrow&&setTimeout(()=>this.minimize(!0,!1),1500)}minimize(e=!0,t=!0){e!==this._minimized&&(e&&t&&u.event("minimize_menu","engagement"),r.togglePanel(this.el,".full",".min",!e),this._minimized=e,this._updateUI())}goto(e){this.show(this._idMap[e])}showToken(e){this.goto(ne.reference.idForToken(e))}show(e){if(e){if(e.hide)return this.show(e.parent);if(e&&"menu"!==e.id){if(this.minimize(!1),e.id&&("home"===e.id||e.parent&&"home"===e.parent.id||this._isInReference(e))&&ne.prefs.write("side",e.id),!e.el&&!e.kids){if(this.searchMode||!e.parent||e.parent===this.curItem)return this.selItem=e,this.menuList.selected=e.id,this._showContent(e);if(e.parent!==this.curItem)return this.show(e.parent),this.show(e)}this._resetFull(),this.curItem=e,r.query("h1",this.titleEl).innerText=e.label,r.query("svg.back.icon use",this.titleEl).setAttribute("xlink:href","#"+(e.parent?"arrowleft":"menu")),e.el?this._showEl(r.query("#library "+e.el)):this._showContent(e),e.kids&&!1!==e.list&&(r.removeClass(this.fullEl,"no-list"),this.menuList.data=e.kids||e.parent.kids),e.search&&r.removeClass(this.fullEl,"no-search"),"community"===e.id?(this.menuList.template=this.communityListTemplate,this._onSearchSubmit()):"favorites"===e.id&&(this.menuList.template=this.communityListTemplate,this._loadFavorites())}}}back(){this.curItem.parent?this.show(this.curItem.parent):this.minimize(!0)}menuListTemplate(e){return(e.parent&&"home"===e.parent.id?'<svg class="icon"><use xlink:href="#'+e.id+'"></use></svg>':"")+'<span class="label">'+(e.label||e.id)+"</span>"+(e.token?'<span class="token">'+e.token.replace("<","&lt;")+"</span>":"")+(e.kids||e.el?'<svg class="small icon"><use xlink:href="#arrowright"></use></svg>':"")}communityListTemplate(e){return'<span class="label">'+s.htmlSafe(e.name)+'</span><span class="rating">'+(e.favorite?'<svg class="small icon favorites"><use xlink:href="#favorites"></use></svg>':"")+'<svg class="small icon thumb"><use xlink:href="#thumb"></use></svg>'+e.rating.toFixed(1)+"</span>"}_initUI(e){this.fullEl=r.query("> .full",e),this.titleEl=r.query("> header",this.fullEl),r.query("> .close.icon",this.titleEl).addEventListener("click",()=>this.minimize(!0)),r.query("> .backrow",this.titleEl).addEventListener("click",()=>this.back()),this.searchEl=r.query("> .search",this.fullEl),this.searchFld=r.query("> .search > input",this.fullEl),this.searchFld.addEventListener("input",()=>this._onSearchChange()),this.searchFld.addEventListener("keyup",e=>13===e.keyCode&&this._onSearchSubmit()),r.query("> svg.icon.search",this.searchEl).addEventListener("click",()=>this._onSearchSubmit()),this.listEl=r.query("> .list",this.fullEl),this.menuList=new d(this.listEl,{data:B.kids,template:this.menuListTemplate}),this.menuList.on("change",()=>{const e=this.curItem.id;this.show(this.menuList.selectedItem),e!==this.curItem.id&&u.page("sidebar/"+this.curItem.id)}),this.menuList.on("dblclick",()=>this._onDblClick(this.menuList.selectedItem)),this.contentEl=r.query("> .content",this.fullEl),this.minEl=r.query("> .min",e),this.minEl.addEventListener("click",()=>this.minimize(!1));let t=r.template`<svg class="icon"><use xlink:href="#${"id"}"></use></svg>`;this.minList=new d(r.query("> .list",this.minEl),{template:t}),this.minList.on("change",e=>{this.show(this.minList.selectedItem),e.preventDefault(),u.page("sidebar/"+this.curItem.id)}),this.community=new G(r.query("#library > #community")),this.share=new K(r.query("#library > #share")),this._prepCheatsheet(),r.query(".doc > .blocker").addEventListener("mousedown",e=>{this.minimize(!0)})}_updateUI(){let e=r.query(".doc");r.toggleClass(e,"fadeback",!this._minimized)}_resetFull(){this.itemEl&&(r.query("#library").appendChild(this.itemEl),this.itemEl=null),this._abortReq(),r.addClass(this.fullEl,"no-search no-list"),this.searchFld.value="",this.searchMode=!1,this.menuList.template=this.menuListTemplate,r.removeClass(this.searchEl,"wait")}_showContent(e){if("community"!==this.curItem.id&&"favorites"!==this.curItem.id||e===this.curItem){let t=ne.reference;this.contentEl.innerHTML=this._isInReference(e)?t.getContent(e.id):t.fillTags((e.desc||"")+(e.ext||""),e,t),e.example&&this.contentEl.appendChild(new U("Example",e.example).el)}else this._showEl(this.community.el),this.community.item=e}_isInReference(e){return this._isIn(e,"reference")}_isIn(e,t){do{if(e.id===t)return!0}while(e=e.parent);return!1}_onDblClick(e){if(e.token){let t=ne.expression;"flags"===e.parent.id?t.toggleFlag(e.token):t.insert(e.token)}else"community"!==this.curItem.id&&"favorites"!==this.curItem.id||ne.load(e)}_showEl(e){this.itemEl!==e&&(this.itemEl=e,r.empty(this.contentEl).appendChild(e))}_prepContent(e){let t=s.findIndex(e.kids,e=>"reference"===e.id);return e.kids.splice(t,1,ne.reference.content),e.desc=this.contentEl.innerHTML,this._idMap={home:e},s.prepMenuContent(e,this._idMap)}_prepCheatsheet(){let e=r.queryAll("#cheatsheet *[data-id]"),t=e=>this.goto(e.target.dataset.id);for(let i=0,r=e.length;i<r;i++)e[i].addEventListener("click",t);e=r.queryAll("#cheatsheet tr td:first-child"),t=e=>ne.expression.insert(e.target.innerText);for(let i=0,n=e.length;i<n;i++){let n=e[i],s=n.innerText.split(" ");r.empty(n);for(let e=0;e<s.length;e++){r.create("a",null,s[e],n).addEventListener("click",t)}}}_onSearchChange(){let e=this.curItem.id,t=this.searchFld.value;if("reference"===e)this._searchReference(t);else{if("favorites"!==e)return;this._searchFavorites(t)}this.contentEl.innerHTML=this.curItem.desc,this.itemEl=null}_searchReference(e){let t=ne.reference.search(e);this.searchMode=!!e,this.menuList.data=e?t:this.curItem.kids}_searchFavorites(e){let t=this.menuList.data,i=s.searchRank;t.forEach(t=>t.hide=!i(t,e)),this.menuList.data=t}_onFlavorChange(){let e=this.selItem||this.curItem;this._isInReference(e)&&(this.selItem=this.curItem=null,this.show(e))}_onSearchSubmit(){this._abortReq();let e=this.searchFld.value;"community"===this.curItem.id&&(e&&u.event("search","engagement",{search_term:e,target:"community"}),r.addClass(this.searchEl,"wait"),this._showListMsg(),this.openReq=l.communitySearch(e).then(e=>this._showServerResults(e)).catch(e=>this._showListMsg(e)).finally(()=>this._reqCleanup())),this.searchFld.select()}_loadFavorites(){this._abortReq();this.searchFld.value;this.openReq=l.patterns().then(e=>this._showServerResults(e)).catch(e=>this._showListMsg(e)).finally(()=>this._reqCleanup()),this._showListMsg()}_showListMsg(e="Loading..."){this.listEl.innerHTML="<li class='loading'>"+e+"</li>"}_abortReq(){this.openReq&&this.openReq.abort(),this.openReq=null}_showServerResults(e){this.menuList.data=e.results,0===e.results.length&&this._showListMsg("community"===this.curItem.id?"No matches.":"No patterns created or favorited.")}_reqCleanup(e){r.removeClass(this.searchEl,"wait")}}class X extends i{constructor(e){super(),this.el=e,this.urlTemplate="./assets/themes/%name%.css",this.targetNode=this._node=null,this._dark=!1,this._initUI(),this.dark=!!ne.prefs.read("dark")}set dark(e){e=!!e,this._dark!==e&&(this._dark=e,this._load(e?"dark":null),r.toggleClass(this.themeBtn,"selected",e),ne.prefs.write("dark",e))}get dark(){return this._dark}_initUI(){this.themeBtn=r.query(".header .button.theme",this.el),this.themeBtn.addEventListener("click",e=>this._toggleTheme())}_load(e){if(e===this._id)return;if(this._id=e,this._node&&this._node.remove(),!e)return void this._change();let t=this.urlTemplate,i=r.create("link");i.addEventListener("load",()=>this._change()),i.rel="stylesheet",i.type="text/css",i.href=t?t.replace(/%name%/g,e):e,this._node=(this.targetNode||document.head).appendChild(i)}_change(){this.dispatchEvent("change")}_toggleTheme(){this.dark=!this.dark}}class Y{constructor(e,t,i){this._config=i,this._flavor=t,this._flavor.on("change",()=>this._flavorChange()),this._injectEscChars(e),this._idMap={reference:e},this._content=s.prepMenuContent(e,this._idMap),this._misc=s.prepMenuContent(e.misc,this._idMap),this._flavorChange()}get content(){return this._content}search(e){return function t(i,r){for(let n=0,o=i.length;n<o;n++){let o=i[n],a=0;o.kids?t(o.kids,r):(a=s.searchRank(o,e))&&(o.__searchPoints=a,r.push(o))}return r}(this.content.kids,[]).sort((e,t)=>t.__searchPoints-e.__searchPoints)}idForToken(e){let t=e.error&&e.error.id;return this._idMap[t]?t:this._idMap[e.type]?e.type:this._idMap[e.clss]?e.clss:t||e.type||e.clss}getChar(e){let t=Y.NONPRINTING_CHARS[e.code];return t||'"'+String.fromCharCode(e.code)+'"'}getQuant(e){let t=e.min,i=e.max;return t===i?t:-1===i?t+" or more":"between "+t+" and "+i}getUniCat(e){return Y.UNICODE_CATEGORIES[e.value]||"[Unrecognized]"}getModes(e){let t=e.on?' Enable "<code>'+e.on+'</code>".':"";return e.off&&(t+=' Disable "<code>'+e.off+'</code>".'),t}getInsensitive(e){if(e.code){let t=String.fromCharCode(e.code);if(t.toLowerCase()===t.toUpperCase())return""}return e.modes?`Case ${e.modes.i?"in":""}sensitive.`:""}getDotAll(e){return(e.modes.s?"including":"except")+" line breaks"}getLabel(e){let t=this.getNodeForToken(e);return t?t.label||t.id||"":e.type}getDesc(e){return this.getVal(this.getNodeForToken(e),"desc")}getLazy(e){return e.modes.U?"greedy":"lazy"}getLazyFew(e){return e.modes.U?"many":"few"}getPHPVersion(){return this._config.PHPVersion}getPCREVersion(){return this._config.PCREVersion}getCtrlKey(){return s.getCtrlKey()}getEscChars(){let e=this._flavor.profile.escChars,t="";for(let i in e)t+=i;return t}fillTags(e,t,i,r=20,n=!0){let o;for(;o=e.match(/{{~?[\w.()]+}}/);){let a,l,c=!1;a=o[0].substring(2,o[0].length-2),"~"===a[0]&&(a=a.substr(1),c=!0);let h=a.match(/\([\w.]*\)/);h?(l=a.substr(0,h.index),a=h[0].substring(1,h[0].length-1)):l=null;let u=t,d=a.split(".");for(let e=0;e<d.length;e++){let t=d[e];t&&u&&(u=u[t])}a=u,l&&(a=i[l]?i[l](a):" <b class='exp-error'>["+l+"]</b> "),c||!r&&!n||(a=s.shorten(a,r,n,"i")),e=e.replace(o[0],a)}return e}getVal(e,t){if(!e)return"";let i=this._flavor.getDocs(e.id),r=i&&i[t];if(null!=r&&"+"!==r[0])return r;let n=e&&e[t]||"";return null!=r?n+r.substr(1):n}getNodeForToken(e){let t=this.idForToken(e),i=e.clss;return"quant"===i&&(t=i),"esc"===i&&"escsequence"!==e.type&&(t="escchar"),this.getNode(t)}getNode(e){let t=this._idMap,i=t[e];for(;i&&i.proxy;)i=t[i.proxy];return i}getError(e,t){let i=e&&e.id,r=this._content.errors[i]||"no docs for error='"+i+"'";return t&&(r=this.fillTags(r,t,this,20)),r}tipForToken(e){if(!e)return null;let t,i,r=this.getNodeForToken(e);return e.error&&!e.error.warning?(t="<span class='error'>ERROR: </span>",i=this.getError(e.error,e)):(t=r?r.label||r.id||"":e.type,i=this.getVal(r,"tip")||this.getVal(r,"desc"),i=this.fillTags(i,e,this,20),"group"===e.type&&(t+=" #"+e.num),t="<b>"+t[0].toUpperCase()+t.substr(1)+".</b> ",e.error&&(i+="<span class='warningtext'><span class='error warning'>WARNING: </span>"+this.getError(e.error,e)+"</span>")),i?t+i:"no docs for id='"+this.idForToken(e)+"'"}getContent(e){let t=this.getNode(e);return this.fillTags(this.getVal(t,"desc")+this.getVal(t,"ext"),t,this)}tipForMatch(e,t){if(!e)return null;let i=e.l>150,r="<b>match: </b>"+s.shorten(t.substr(e.i,e.l),150,!0,"i")+"<br/><b>range: </b><code>"+e.i+"-"+(e.i+e.l-1)+"</code>",n=e.groups,o=n&&n.length;for(let e=0;e<o;e++){if(e>3&&o>5){i=!1,r+="<br><span class='more'>see Details for "+(o-e)+" more</span>";break}let a,l=n[e];a=void 0!==l.i?t.substr(l.i,l.l):l.s,i=i||a&&a.length>50,r+=e>0?"<br>":"<hr>",r+="<b>group #"+(e+1)+": </b>"+s.shorten(a,50,!0,"i")}return i&&(r+="<br><span class='more'>see Details for full matches</span>"),r}_flavorChange(){this._updateHide(this.content)}_updateHide(e,t){let i=e.kids,r=!0;if(i)for(let e=0,n=i.length;e<n;e++)r=this._updateHide(i[e],t)&&r;else r=!1===e.show||!0!==e.show&&e.id&&!this._flavor.isTokenSupported(e.id);return t&&r&&t.push(e.id),e.hide=r}_injectEscChars(e){let t=s.find(e.kids,e=>"escchars"===e.id).kids,i=s.find(e.misc.kids,e=>"escchar"===e.id).tip;for(let e=0,r="\t\n\v\f\r\0".length;e<r;e++)t.push(this._getEscCharDocs("\t\n\v\f\r\0"[e],"tnvfr0ae"[e],i))}_getEscCharDocs(e,t,i){let r=e.charCodeAt(0);return{id:"esc_"+r,token:"\\"+(t||e),label:(Y.NONPRINTING_CHARS[r]||e).toLowerCase(),desc:this.fillTags(i,{code:r},this)}}}Y.NONPRINTING_CHARS={0:"NULL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BELL",8:"BS",9:"TAB",10:"LINE FEED",11:"VERTICAL TAB",12:"FORM FEED",13:"CARRIAGE RETURN",14:"SO",15:"SI",16:"DLE",17:"DC1",18:"DC2",19:"DC3",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",32:"SPACE",127:"DEL"},Y.UNICODE_CATEGORIES={C:"Other",Cc:"Control",Cf:"Format",Cn:"Unassigned",Co:"Private use",Cs:"Surrogate",L:"Letter","L&":"Any letter ",Ll:"Lower case letter",Lm:"Modifier letter",Lo:"Other letter",Lt:"Title case letter",Lu:"Upper case letter",M:"Mark",Mc:"Spacing mark",Me:"Enclosing mark",Mn:"Non-spacing mark",N:"Number",Nd:"Decimal number",Nl:"Letter number",No:"Other number",P:"Punctuation",Pc:"Connector punctuation",Pd:"Dash punctuation",Pe:"Close punctuation",Pf:"Final punctuation",Pi:"Initial punctuation",Po:"Other punctuation",Ps:"Open punctuation",S:"Symbol",Sc:"Currency symbol",Sk:"Modifier symbol",Sm:"Mathematical symbol",So:"Other symbol",Z:"Separator",Zl:"Line separator",Zp:"Paragraph separator",Zs:"Space separator"};let Z={},J=Z;J.label="RegEx Reference",J.id="reference",J.search=!0,J.desc="Information on all of the tokens available to create regular expressions.\n\t<p>Double-click an item in the list to insert it into your Expression.</p>\n\t<p>Click the arrow beside an example to load it.</p>",J.kids=[{label:"Character classes",id:"charclasses",desc:"Character classes match a character from a specific set. There are a number of predefined character classes and you can also define your own sets.",kids:[{id:"set",label:"character set",desc:"Match any character in the set.",example:["[aeiou]","glib jocks vex dwarves!"],token:"[ABC]"},{id:"setnot",label:"negated set",desc:"Match any character that is not in the set.",example:["[^aeiou]","glib jocks vex dwarves!"],token:"[^ABC]"},{id:"range",tip:"Matches a character in the range {{getChar(prev)}} to {{getChar(next)}} (char code {{prev.code}} to {{next.code}}). {{getInsensitive()}}",example:["[g-s]","abcdefghijklmnopqrstuvwxyz"],desc:"Matches a character having a character code between the two specified characters inclusive.",token:"[A-Z]"},{id:"posixcharclass",tip:"Matches any character in the '{{value}}' POSIX class.",label:"POSIX class",desc:"Matches any character in the specified POSIX class. Must be in a character set. For example, <code>[[:alnum:]$]</code> will match alphanumeric characters and <code>$</code>.",ext:"<p>For a list of classes, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p>",token:"[:alnum:]"},{id:"dot",tip:"Matches any character {{getDotAll()}}.",desc:"Matches any character except linebreaks.",ext:" Equivalent to <code>[^\\n\\r]</code>.",example:[".","glib jocks vex dwarves!"],token:"."},{id:"matchanyset",label:"match any",desc:"A character set that can be used to match any character, including line breaks, without the dotall flag (<code>s</code>).<p>An alternative is <code>[^]</code>, but it is not supported in all browsers.</p>",example:["[\\s\\S]","glib jocks vex dwarves!"],token:"[\\s\\S]"},{id:"unicodegrapheme",label:"unicode grapheme",desc:"Matches any single unicode grapheme (ie. character).",ext:" This includes line breaks (regardless of the dotall mode) and graphemes encoded as multiple code points.",token:"\\X"},{id:"word",desc:"Matches any word character (alphanumeric & underscore).",ext:" Only matches low-ascii characters (no accented or non-roman characters). Equivalent to <code>[A-Za-z0-9_]</code>",example:["\\w","bonjour, mon frÃ¨re"],token:"\\w"},{id:"notword",label:"not word",desc:"Matches any character that is not a word character (alphanumeric & underscore).",ext:" Equivalent to <code>[^A-Za-z0-9_]</code>",example:["\\W","bonjour, mon frÃ¨re"],token:"\\W"},{id:"digit",desc:"Matches any digit character (0-9).",ext:" Equivalent to <code>[0-9]</code>.",example:["\\d","+1-(444)-555-1234"],token:"\\d"},{id:"notdigit",label:"not digit",desc:"Matches any character that is not a digit character (0-9).",ext:" Equivalent to <code>[^0-9]</code>.",example:["\\D","+1-(444)-555-1234"],token:"\\D"},{id:"whitespace",desc:"Matches any whitespace character (spaces, tabs, line breaks).",example:["\\s","glib jocks vex dwarves!"],token:"\\s"},{id:"notwhitespace",label:"not whitespace",desc:"Matches any character that is not a whitespace character (spaces, tabs, line breaks).",example:["\\S","glib jocks vex dwarves!"],token:"\\S"},{id:"hwhitespace",label:"horizontal whitespace",desc:"Matches any horizontal whitespace character (spaces, tabs).",token:"\\h"},{id:"nothwhitespace",label:"not horizontal whitespace",desc:"Matches any character that is not a horizontal whitespace character (spaces, tabs).",token:"\\H"},{id:"vwhitespace",label:"vertical whitespace",desc:"Matches any vertical whitespace character (line breaks).",token:"\\v"},{id:"notvwhitespace",label:"not vertical whitespace",desc:"Matches any character that is not a vertical whitespace character (line breaks).",token:"\\V"},{id:"linebreak",label:"line break",desc:"Matches any line break character, including the CRLF pair, and CR / LF individually.",token:"\\R"},{id:"notlinebreak",label:"not line break",desc:"Matches any character that is not a line break.",ext:" Similar to dot (<code>.</code>) but is unaffected by the dotall flag (<code>s</code>).",token:"\\N"},{id:"unicodecat",tip:"Matches any character in the '{{getUniCat()}}' unicode category.",label:"unicode category",desc:"Matches a character in the specified unicode category. For example, <code>\\p{Ll}</code> will match any lowercase letter.",ext:"<p>For a list of categories, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p><p>There are multiple syntaxes for this feature:</p><p><code>\\p{L}</code> <code>\\pL</code></p>",token:"\\p{L}"},{id:"notunicodecat",tip:"Matches any character that is not in the '{{getUniCat()}}' unicode category.",label:"not unicode category",desc:"Matches any character that is not in the specified unicode category.",ext:"<p>For a list of categories, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p><p>There are multiple syntaxes for this feature:</p><p><code>\\P{L}</code> <code>\\p{^L}</code> <code>\\PL</code></p>",token:"\\P{L}"},{id:"unicodescript",tip:"Matches any character in the '{{value}}' unicode script.",label:"unicode script",desc:"Matches any character in the specified unicode script. For example, <code>\\p{Arabic}</code> will match characters in the Arabic script.",ext:"<p>For a list of scripts, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p>",token:"\\p{Han}"},{id:"notunicodescript",tip:"Matches any character that is not in the '{{value}}' unicode script.",label:"not unicode script",desc:"Matches any character that is not in the specified unicode script.",ext:"<p>For a list of scripts, see the <a href='http://www.pcre.org/original/doc/html/pcrepattern.html'>PCRE spec</a>.</p><p>There are multiple syntaxes for this feature:</p><p><code>\\P{Han}</code> <code>\\p{^Han}</code>",token:"\\P{Han}"}]},{label:"Anchors",id:"anchors",desc:"Anchors are unique in that they match a position within a string, not a character.",kids:[{id:"bos",label:"beginning of string",desc:"Matches the beginning of the string.",ext:" Unlike <code>^</code>, this is unaffected by the multiline flag (<code>m</code>). This matches a position, not a character.",token:"\\A"},{id:"eos",label:"end of string",desc:"Matches the end of the string.",ext:" Unlike <code>$</code>, this is unaffected by the multiline flag (<code>m</code>). This matches a position, not a character.",token:"\\Z"},{id:"abseos",label:"strict end of string",desc:"Matches the end of the string. Unlike <code>$</code> or <code>\\Z</code>, it does not allow for a trailing newline.",ext:" This is unaffected by the multiline flag (<code>m</code>). This matches a position, not a character.",token:"\\z"},{id:"bof",label:"beginning",desc:"Matches the beginning of the string, or the beginning of a line if the multiline flag (<code>m</code>) is enabled.",ext:" This matches a position, not a character.",example:["^\\w+","she sells seashells"],token:"^"},{id:"eof",label:"end",desc:"Matches the end of the string, or the end of a line if the multiline flag (<code>m</code>) is enabled.",ext:" This matches a position, not a character.",example:["\\w+$","she sells seashells"],token:"$"},{id:"wordboundary",label:"word boundary",desc:"Matches a word boundary position between a word character and non-word character or position (start / end of string).",ext:" See the word character class (<code>w</code>) for more info.",example:["s\\b","she sells seashells"],token:"\\b"},{id:"notwordboundary",label:"not word boundary",desc:"Matches any position that is not a word boundary.",ext:" This matches a position, not a character.",example:["s\\B","she sells seashells"],token:"\\B"},{id:"prevmatchend",label:"previous match end",desc:"Matches the end position of the previous match.",ext:" This matches a position, not a character.",token:"\\G"}]},{label:"Escaped characters",id:"escchars",desc:"Escape sequences can be used to insert reserved, special, and unicode characters. All escaped characters begin with the <code>\\</code> character.",kids:[{id:"reservedchar",label:"reserved characters",desc:"The following character have special meaning, and should be preceded by a <code>\\</code> (backslash) to represent a literal character:<p><code>{{getEscChars()}}</code></p><p>Within a character set, only <code>\\</code>, <code>-</code>, and <code>]</code> need to be escaped.</p>",example:["\\+","1 + 1 = 2"],token:"\\+",show:!0},{id:"escoctal",label:"octal escape",desc:"Octal escaped character in the form <code>\\000</code>.",ext:" Value must be less than 255 (<code>\\377</code>).",example:["\\251","RegExr is Â©2014"],token:"\\000"},{id:"eschexadecimal",label:"hexadecimal escape",desc:"Hexadecimal escaped character in the form <code>\\xFF</code>.",example:["\\xA9","RegExr is Â©2014"],token:"\\xFF"},{id:"escunicodeu",label:"unicode escape",desc:"Unicode escaped character in the form <code>\\uFFFF</code>",example:["\\u00A9","RegExr is Â©2014"],token:"\\uFFFF"},{id:"escunicodeub",label:"extended unicode escape",desc:"Unicode escaped character in the form <code>\\u{FFFF}</code>.",ext:" Supports a full range of unicode point escapes with any number of hex digits. <p>Requires the unicode flag (<code>u</code>).</p>",token:"\\u{FFFF}"},{id:"escunicodexb",label:"unicode escape",desc:"Unicode escaped character in the form <code>\\x{FF}</code>.",token:"\\x{FF}"},{id:"esccontrolchar",label:"control character escape",desc:"Escaped control character in the form <code>\\cZ</code>.",ext:" This can range from <code>\\cA</code> (SOH, char code 1) to <code>\\cZ</code> (SUB, char code 26). <h1>Example:</h1><code>\\cI</code> matches TAB (char code 9).",token:"\\cI"},{id:"escsequence",label:"escape sequence",tip:"Matches the literal string '{{value}}'.",desc:"All characters between the <code>\\Q</code> and the <code>\\E</code> are interpreted as a literal string. If <code>\\E</code> is omitted, it continues to the end of the expression.",ext:" For example, the expression <code>/\\Q(?.)\\E/</code> will match the string <code>(?.)</code>.",token:"\\Q...\\E"}]},{label:"Groups & References",id:"groups",desc:"Groups allow you to combine a sequence of tokens to operate on them together. Capture groups can be referenced by a backreference and accessed separately in the results.",kids:[{id:"group",label:"capturing group",desc:"Groups multiple tokens together and creates a capture group for extracting a substring or using a backreference.",example:["(ha)+","hahaha haa hah!"],token:"(ABC)"},{id:"namedgroup",label:"named capturing group",tip:"Creates a capturing group named '{{name}}'.",desc:"Creates a capturing group that can be referenced via the specified name.",ext:"<p>There are multiple syntaxes for this feature:</p><p><code>(?'name'ABC)</code> <code>(?P&lt;name>ABC)</code> <code>(?&lt;name>ABC)</code></p>",token:"(?<name>ABC)"},{id:"namedref",label:"named reference",tip:"Matches the results of the capture group named '{{group.name}}'.",desc:"Matches the results of a named capture group.",ext:"<p>There are multiple syntaxes for this feature:</p><p><code>\\k'name'</code> <code>\\k&lt;name></code> <code>\\k{name}</code> <code>\\g{name}</code> <code>(?P=name)</code></p>",token:"\\k'name'"},{id:"numref",label:"numeric reference",tip:"Matches the results of capture group #{{group.num}}.",desc:"Matches the results of a capture group. For example <code>\\1</code> matches the results of the first capture group & <code>\\3</code> matches the third.",example:["(\\w)a\\1","hah dad bad dab gag gab"],token:"\\1"},{id:"branchreset",label:"branch reset group",desc:"Define alternative groups that share the same group numbers.",ext:"<p>For example, in <code>(?|(a)|(b))</code> both groups (a and b) would be counted as group #1.",token:"(?|(a)|(b))"},{id:"noncapgroup",label:"non-capturing group",desc:"Groups multiple tokens together without creating a capture group.",example:["(?:ha)+","hahaha haa hah!"],token:"(?:ABC)"},{id:"atomic",label:"atomic group",desc:"Non-capturing group that discards backtracking positions once matched.",ext:"<p>For example, <code>/(?>ab|a)b/</code> will match <code>abb</code> but not <code>ab</code> because once the <code>ab</code> option has matched, the atomic group prevents backtracking to retry with the <code>a</code> option.</p>",token:"(?>ABC)"},{id:"define",desc:"Used to define named groups for use as subroutines without including them in the match.",ext:"<p>For example, <code>/A(?(DEFINE)(?'foo'Z))B\\g'foo'/</code> will match <code>ABZ</code>, because the define group is ignored in the match except to define the <code>foo</code> subroutine that is referenced later with <code>\\g'foo'</code>.</p>",token:"(?(DEFINE)(?'foo'ABC))"},{id:"numsubroutine",label:"numeric subroutine",tip:"Matches the expression in capture group #{{group.num}}.",desc:"Matches the expression in a capture group. Compare this to a reference, that matches the result. For example <code>/(a|b)\\g'1'/</code> can match <code>ab</code>, because the expression <code>a|b</code> is evaluated again.",ext:"<p>There are multiple syntaxes for this feature: <code>\\g&lt;1></code> <code>\\g'1'</code> <code>(?1)</code>.</p><p>Relative values preceded by <code>+</code> or <code>-</code> are also supported. For example <code>\\g<-1></code> would match the group preceding the reference.</p>",token:"\\g'1'"},{id:"namedsubroutine",label:"named subroutine",tip:"Matches the expression in the capture group named '{{group.name}}'.",desc:"Matches the expression in a capture group. Compare this to a reference, that matches the result.",ext:"<p>There are multiple syntaxes for this feature: <code>\\g&lt;name></code> <code>\\g'name'</code> <code>(?&name)</code> <code>(?P>name)</code>.</p>",token:"\\g'name'"}]},{label:"Lookaround",id:"lookaround",desc:"Lookaround lets you match a group before (lookbehind) or after (lookahead) your main pattern without including it in the result.<p>Negative lookarounds specify a group that can NOT match before or after the pattern.</p>",kids:[{id:"poslookahead",label:"positive lookahead",desc:"Matches a group after the main expression without including it in the result.",example:["\\d(?=px)","1pt 2px 3em 4px"],token:"(?=ABC)"},{id:"neglookahead",label:"negative lookahead",desc:"Specifies a group that can not match after the main expression (if it matches, the result is discarded).",example:["\\d(?!px)","1pt 2px 3em 4px"],token:"(?!ABC)"},{id:"poslookbehind",label:"positive lookbehind",desc:"Matches a group before the main expression without including it in the result.",token:"(?<=ABC)"},{id:"neglookbehind",label:"negative lookbehind",desc:"Specifies a group that can not match before the main expression (if it matches, the result is discarded).",token:"(?<!ABC)"},{id:"keepout",label:"keep out",desc:"Keep text matched so far out of the returned match, essentially discarding the match up to this point.",ext:"For example <code>/o\\Kbar/</code> will match <code>bar</code> within the string <code>foobar</code>",token:"\\K"}]},{label:"Quantifiers & Alternation",id:"quants",desc:"Quantifiers indicate that the preceding token must be matched a certain number of times. By default, quantifiers are greedy, and will match as many characters as possible.<hr/>Alternation acts like a boolean OR, matching one sequence or another.",kids:[{id:"plus",desc:"Matches 1 or more of the preceding token.",example:["b\\w+","b be bee beer beers"],token:"+"},{id:"star",desc:"Matches 0 or more of the preceding token.",example:["b\\w*","b be bee beer beers"],token:"*"},{id:"quant",label:"quantifier",tip:"Match {{getQuant()}} of the preceding token.",desc:"Matches the specified quantity of the previous token. <code>{1,3}</code> will match 1 to 3. <code>{3}</code> will match exactly 3. <code>{3,}</code> will match 3 or more. ",example:["b\\w{2,3}","b be bee beer beers"],token:"{1,3}"},{id:"opt",label:"optional",desc:"Matches 0 or 1 of the preceding token, effectively making it optional.",example:["colou?r","color colour"],token:"?"},{id:"lazy",tip:"Makes the preceding quantifier {{getLazy()}}, causing it to match as {{getLazyFew()}} characters as possible.",desc:"Makes the preceding quantifier lazy, causing it to match as few characters as possible.",ext:" By default, quantifiers are greedy, and will match as many characters as possible.",example:["b\\w+?","b be bee beer beers"],token:"?"},{id:"possessive",desc:"Makes the preceding quantifier possessive. It will match as many characters as possible, and will not release them to match subsequent tokens.",ext:"<p>For example <code>/.*a/</code> would match <code>aaa</code>, but <code>/.*+a/</code> would not, because the repeating dot would match and not release the last character to match <code>a</code>.</p>",token:"+"},{id:"alt",label:"alternation",desc:"Acts like a boolean OR. Matches the expression before or after the <code>|</code>.",ext:"<p>It can operate within a group, or on a whole expression. The patterns will be tested in order.</p>",example:["b(a|e|i)d","bad bud bod bed bid"],token:"|"}]},{label:"Special",id:"other",desc:"Tokens that don't quite fit anywhere else.",kids:[{id:"comment",desc:"Allows you to insert a comment into your expression that is ignored when finding a match.",token:"(?#foo)"},{id:"conditional",desc:"Conditionally matches one of two options based on whether a lookaround is matched.",ext:"<p>For example, <code>/(?(?=a)ab|..)/</code> will match <code>ab</code> and <code>zx</code> but not <code>ax</code>, because if the first character matches the condition <code>a</code> then it evaluates the pattern <code>ab</code>.</p><p>Any lookaround can be used as the condition. A lookahead will start the subsequent match at the start of the condition, a lookbehind will start it after.</p>",token:"(?(?=A)B|C)"},{id:"conditionalgroup",label:"group conditional",desc:"Conditionally matches one of two options based on whether group '{{name}}' matched.",ext:"<p>For example, <code>/(z)?(?(1)a|b)/</code> will match <code>za</code> because the first capture group matches <code>z</code> successfully, which causes the conditional to match the first option <code>a</code>.</p><p>The same pattern will also match <code>b</code> on its own, because group 1 doesn't match, so it instead tries to match the second option <code>b</code>.</p><p>You can reference a group by name, number, or relative position (ex. <code>-1</code>).</p>",token:"(?(1)B|C)"},{id:"recursion",desc:"Attempts to match the full expression again at the current position.",ext:"<p>For example, <code>/a(?R)?b/</code> will match any number of <code>a</code> followed by the same number of <code>z</code>: the full text of <code>az</code> or <code>aaaazzzz</code>, but not <code>azzz</code>.</p><p>There are multiple syntaxes for this feature:</p><p><code>(?R)</code> <code>(?0)</code> <code>\\g<0></code> <code>\\g'0'</code></p>",token:"(?R)"},{id:"mode",label:"mode modifier",tip:"{{~getDesc()}}{{~getModes()}}",desc:"Enables or disables modes for the remainder of the expression.",ext:"Matching modes generally map to expression flags. For example <code>(?i)</code> would enable case insensitivity for the remainder of the expression.<p>Multiple modifiers can be specified, and any modifiers that follow <code>-</code> are disabled. For example <code>(?im-s)</code> would enable case insensitivity &amp; multiline modes, and disable dotall.</p><p>Supported modifiers are: <code>i</code> - case insensitive, <code>s</code> - dotall, <code>m</code> - multiline, <code>x</code> - free spacing, <code>J</code> - allow duplicate names, <code>U</code> - ungreedy.</p>",token:"(?i)"}]},{label:"Substitution",desc:"These tokens are used in a substitution string to insert different parts of the match.",target:"subst",id:"subst",kids:[{id:"subst_$&match",label:"match",desc:"Inserts the matched text.",token:"$&"},{id:"subst_0match",label:"match",desc:"Inserts the matched text.",ext:"<p>There are multiple syntaxes for this feature:</p><p><code>$0</code> <code>\\0</code> <code>\\{0}</code></p>",token:"$0"},{id:"subst_group",label:"capture group",tip:"Inserts the results of capture group #{{group.num}}.",desc:"Inserts the results of the specified capture group. For example, <code>$3</code> would insert the third capture group.",ext:"<p>There are multiple syntaxes for this feature:</p><p><code>$1</code> <code>\\1</code> <code>\\{1}</code></p>",token:"$1"},{id:"subst_$before",label:"before match",desc:"Inserts the portion of the source string that precedes the match.",token:"$`"},{id:"subst_$after",label:"after match",desc:"Inserts the portion of the source string that follows the match.",token:"$'"},{id:"subst_$esc",label:"escaped $",desc:"Inserts a dollar sign character ($).",token:"$$"},{id:"subst_esc",label:"escaped characters",token:"\\n",desc:"For convenience, these escaped characters are supported in the Replace string in RegExr: <code>\\n</code>, <code>\\r</code>, <code>\\t</code>, <code>\\\\</code>, and unicode escapes <code>\\uFFFF</code>. This may vary in your deploy environment."}]},{id:"flags",label:"Flags",tooltip:"Expression flags change how the expression is interpreted. Click to edit.",desc:"Expression flags change how the expression is interpreted. Flags follow the closing forward slash of the expression (ex. <code>/.+/igm</code> ).",target:"flags",kids:[{id:"caseinsensitive",label:"ignore case",desc:"Makes the whole expression case-insensitive.",ext:" For example, <code>/aBc/i</code> would match <code>AbC</code>.",token:"i"},{id:"global",label:"global search",tip:"Retain the index of the last match, allowing iterative searches.",desc:"Retain the index of the last match, allowing subsequent searches to start from the end of the previous match.<p>Without the global flag, subsequent searches will return the same match.</p><hr/>RegExr only searches for a single match when the global flag is disabled to avoid infinite match errors.",token:"g"},{id:"multiline",tip:"Beginning/end anchors (<b>^</b>/<b>$</b>) will match the start/end of a line.",desc:"When the multiline flag is enabled, beginning and end anchors (<code>^</code> and <code>$</code>) will match the start and end of a line, instead of the start and end of the whole string.<p>Note that patterns such as <code>/^[\\s\\S]+$/m</code> may return matches that span multiple lines because the anchors will match the start/end of <b>any</b> line.</p>",token:"m"},{id:"unicode",tip:"Enables <code>\\x{FFFFF}</code> unicode escapes.",desc:"When the unicode flag is enabled, you can use extended unicode escapes in the form <code>\\x{FFFFF}</code>.<p>It also makes other escapes stricter, causing unrecognized escapes (ex. <code>\\j</code>) to throw an error.</p>",token:"u"},{id:"sticky",desc:"The expression will only match from its lastIndex position and ignores the global (<code>g</code>) flag if set.",ext:" Because each search in RegExr is discrete, this flag has no further impact on the displayed results.",token:"y"},{id:"dotall",desc:"Dot (<code>.</code>) will match any character, including newline.",token:"s"},{id:"extended",desc:"Literal whitespace characters are ignored, except in character sets.",token:"x"},{id:"ungreedy",tip:"Makes quantifiers ungreedy (lazy) by default.",desc:"Makes quantifiers ungreedy (lazy) by default. Quantifiers followed by <code>?</code> will become greedy.",token:"U"}]}],J.misc={kids:[{id:"ignorews",label:"ignored whitespace",tip:"Whitespace character ignored due to the e<b>x</b>tended flag or mode."},{id:"extnumref",proxy:"numref"},{id:"char",label:"character",tip:"Matches a {{getChar()}} character (char code {{code}}). {{getInsensitive()}}"},{id:"escchar",label:"escaped character",tip:"Matches a {{getChar()}} character (char code {{code}})."},{id:"open",tip:"Indicates the start of a regular expression."},{id:"close",tip:"Indicates the end of a regular expression and the start of expression flags."},{id:"condition",tip:"The lookaround to match in resolving the enclosing conditional statement. See 'conditional' in the Reference for info."},{id:"conditionalelse",label:"conditional else",tip:"Delimits the 'else' portion of the conditional."},{id:"ERROR",tip:"Errors in the expression are underlined in red. Roll over errors for more info."},{id:"PREG_INTERNAL_ERROR",tip:"Internal PCRE error"},{id:"PREG_BACKTRACK_LIMIT_ERROR",tip:"Backtrack limit was exhausted."},{id:"PREG_RECURSION_LIMIT_ERROR",tip:"Recursion limit was exhausted"},{id:"PREG_BAD_UTF8_ERROR",tip:"Malformed UTF-8 data"},{id:"PREG_BAD_UTF8_OFFSET_ERROR",tip:"Malformed UTF-8 data"}]},J.errors={groupopen:"Unmatched opening parenthesis.",groupclose:"Unmatched closing parenthesis.",setopen:"Unmatched opening square bracket.",rangerev:"Range values reversed. Start char code is greater than end char code.",quanttarg:"Invalid target for quantifier.",quantrev:"Quantifier minimum is greater than maximum.",esccharopen:"Dangling backslash.",esccharbad:"Unrecognized or malformed escape character.",unicodebad:"Unrecognized unicode category or script.",posixcharclassbad:"Unrecognized POSIX character class.",posixcharclassnoset:"POSIX character class must be in a character set.",notsupported:'The "{{~getLabel()}}" feature is not supported in this flavor of RegEx.',fwdslash:"Unescaped forward slash. This may cause issues if copying/pasting this expression into code.",esccharbad:"Invalid escape sequence.",servercomm:"An error occurred while communicating with the server.",extraelse:"Extra else in conditional group.",unmatchedref:'Reference to non-existent group "{{name}}".',modebad:'Unrecognized mode flag "<code>{{errmode}}</code>".',badname:"Group name can not start with a digit.",dupname:"Duplicate group name.",branchreseterr:"<b>Branch Reset.</b> Results will be ok, but RegExr's parser does not number branch reset groups correctly. Coming soon!",timeout:"The expression took longer than 250ms to execute.",jsfuture:'The "{{~getLabel()}}" feature may not be supported in all browsers.',infinite:"The expression can return empty matches, and may match infinitely in some use cases."};class Q{constructor(){const e=new Blob([document.querySelector("#regexWorker").textContent],{type:"text/javascript"});this._workerObjectURL=URL.createObjectURL(e)}solve(e,t){this._callback=t,this._req=e;let i,r=e.text,n=e.tests,o=e.mode;try{this._regex=i=new RegExp(e.pattern,e.flags)}catch(e){return this._onRegExComplete({id:"regexparse",name:e.name,message:e.message},null,o)}if(window.Worker){const t=new Worker(this._workerObjectURL);t.onmessage=e=>{"onload"===e.data?(this._startTime=s.now(),this._timeoutId=setTimeout(()=>{t.terminate(),this._onRegExComplete({id:"timeout"},null,o)},250)):(clearTimeout(this._timeoutId),t.terminate(),this._onRegExComplete(e.data.error,e.data.matches,e.data.mode))},t.postMessage({pattern:e.pattern,flags:e.flags,text:r,tests:n,mode:o})}else{this._startTime=s.now();var a,l,c,h=[];if("tests"===o)for(var u=0,d=n.length;u<d;u++){let e=n[u];r=e.text,i.lastIndex=0,a=i.exec(r),h[u]=a?{i:a.index,l:a[0].length,id:e.id}:{id:e.id}}else for(;a=i.exec(r);){l===i.lastIndex&&(c={id:"infinite",warning:!0},++i.lastIndex),l=i.lastIndex;var p=a.reduce((function(e,t,i){return(0===i||e.push({s:t}))&&e}),[]);if(h.push({i:a.index,l:a[0].length,groups:p}),!i.global)break}this._onRegExComplete(c,h,o)}}_onRegExComplete(e,t,i){let r={time:e?null:s.now()-this._startTime,error:e,mode:i,matches:t},n=this._req.tool;if(n&&(r.tool={id:n.id},!e||e.warning&&null!=n.input)){let e=s.unescSubstStr(n.input);r.tool.result="replace"===n.id?this._getReplace(e):this._getList(e)}this._callback(r)}_getReplace(e){return this._req.text.replace(this._regex,e)}_getList(e){let t,i,r,n=this._req.text,s="",o=0;try{r=new RegExp(this._req.pattern,this._req.flags.replace("g",""))}catch(e){return null}-1===e.search(/\$[&1-9`']/)&&(o=e.length,e="$&"+e);do{i=n.replace(r,"\b");let o=i.indexOf("\b"),a=i.length>n.length;if(-1===o)break;t=n.replace(r,e),s+=t.substr(o,t.length-i.length+1),n=i.substr(o+(a?2:1))}while(n.length);return o&&(s=s.substr(0,s.length-o)),s}}class ee{solve(e,t){e.tool&&null!=e.tool.input&&(e.tool.input=s.unescSubstStr(e.tool.input)),this._serverPromise&&this._serverPromise.abort(),s.defer(()=>this._solve(e,t),"ServerSolver._solve",250)}_solve(e,t){this._callback=t,this._serverPromise=l.solve(e).then(e=>this._onLoad(e)).catch(e=>this._onError(e))}_onLoad(e){this._callback(e)}_onError(e){this._callback({error:{id:e}})}}class te extends i{constructor(e){super(),this.value=ne.prefs.read("flavor"),this._browserSolver=new Q,this._serverSolver=new ee}set value(e){let t=M[e&&e.toLowerCase()||"js"];t&&t!==this._profile&&(this._profile=t,this._buildSupportMap(t),ne.prefs.write("flavor",e),this.dispatchEvent("change"))}get value(){return this._profile.id}get profile(){return this._profile}get profiles(){return[M.js,M.pcre]}get solver(){return this._profile.browser?this._browserSolver:this._serverSolver}isTokenSupported(e){return!!this._profile._supportMap[e]}getDocs(e){return this._profile.docs[e]}validateFlags(e){let t=this._profile.flags,i={};return e.filter(e=>!!t[e]&&!i[e]&&(i[e]=!0))}validateFlagsStr(e){return this.validateFlags(e.split("")).join("")}isFlagSupported(e){return!!this._profile.flags[e]}_buildSupportMap(e){if(e._supportMap)return;let t,i=e._supportMap={},r=te.SUPPORT_MAP_PROPS;for(t in r)this._addToSupportMap(i,e[t],!!r[t]);let n=e.escCharCodes,s=e.escChars;for(t in n)i["esc_"+n[t]]=!0;for(t in s)i["esc_"+s[t]]=!0}_addToSupportMap(e,t,i){if(i)for(let i in t)e[t[i]]=!0;else for(let i in t)e[i]=t[i]}}te.SUPPORT_MAP_PROPS={flags:1,escCharTypes:1,charTypes:1,tokens:0,substTokens:0};class ie{constructor(){ne.flavor._buildSupportMap(y);let e=ne.reference._idMap,t=[],i=[],r=y._supportMap,n={escchar:!0,groupclose:!0,setclose:!0,condition:!0,conditionalelse:!0,subst_$group:!0,subst_$bgroup:!0,subst_bsgroup:!0,escoctalo:!0};for(let i in r)e[i]||n[i]||t.push(i);for(let t in e)r[t]||e[t].kids||i.push(t);console.log("--- UNDOCUMENTED IDS ---\n"+t.join("\n")+"\n\n--- UNUSED DOCS? ---\n"+i.join("\n"))}}class re{constructor(e){this._load()}read(e){return this._data[e]}write(e,t){this._data[e]!==t&&(this._data[e]=t,this._save())}clear(e){delete this._data[e],this._save()}_load(){let e=/(?:^|;\s*)prefs=\s*([^;]*)/.exec(document.cookie);if(e&&e[1])try{return void(this._data=JSON.parse(unescape(e[1])))}catch(e){}this._data={}}_save(){let e=escape(JSON.stringify(this._data));document.cookie="prefs="+e+"; expires=Fri, 31 Dec 9999 23:59:59 GMT;"}}let ne=new class extends i{constructor(){super()}init(e,t,i={}){this.prefs=new re,this.flavor=new te,this.reference=new Y(Z,this.flavor,i),this._migrateFavorites(),this._initUI(),this.account.value=t,!1===e?this._localInit():this.account.authenticated&&!e?this.newDoc(!1):this.state=e,this._savedHash=null;let r=s.getUrlParams();s.isLocal&&r.id&&(l.load(r.id).then(e=>this.state=e),r={}),r.engine&&(this.flavor.value=r.engine),r.expression&&(this.expression.value=r.expression),r.text&&(this.text.value=r.text),r.tool&&(this.tools.value={id:r.tool,input:r.input}),window.onbeforeunload=e=>this.unsaved?"You have unsaved changes.":null,this.resetUnsaved(),setTimeout(()=>this._initAds(),100)}_initAds(){_native&&_native.init("CK7D65QM",{carbonZoneKey:"CK7DPKQU",targetClass:"native-js"})}_localInit(){console.log("local init"),new ie}get state(){console.log(this.text.mode);let e={expression:this.expression.value,text:this.text.value,tests:this.text.tests,flavor:this.flavor.value,tool:this.tools.value,mode:this.text.mode};return s.copy(this.share.value,e)}set state(e){e&&(this.flavor.value=e.flavor,this.expression.value=e.expression,this.text.value=e.text,this.text.tests=e.tests,this.text.mode=e.mode,this.tools.value=e.tool,this.share.pattern=e,this.resetUnsaved())}get hash(){let e=this.share;return s.getHashCode(this.expression.value+"\t"+this.text.value+"\t"+this.flavor.value+"\t"+e.author+"\t"+e.name+"\t"+e.description+"\t"+e.keywords+"\t"+JSON.stringify(this.text.tests)+"\t")}get unsaved(){return this.hash!==this._savedHash}get isNarrow(){return this._matchList.matches}resetUnsaved(){this._savedHash=this.hash}newDoc(e=!0){this.load({flavor:this.flavor.value,expression:".",text:"Text"},e),this.expression.selectAll()}load(e,t=!0){!0===t&&(t="You have unsaved changes. Continue without saving?"),t&&this.unsaved&&!confirm(t)||(this.state=s.clone(e))}_initUI(){screen.width<500&&document.getElementById("viewport").setAttribute("content","width=500, user-scalable=0"),this._matchList=window.matchMedia("(max-width: 900px)"),this._matchList.addListener(e=>this.dispatchEvent("narrow")),this.el=r.query(".container"),this.tooltip={hover:new a(r.query("#library #tooltip").cloneNode(!0)),toggle:new a(r.query("#library #tooltip"),!0)},this.theme=new X(this.el);let e=this.docEl=r.query(".app > .doc",this.el);this.expression=new A(r.query("> section.expression",e)),this.text=new O(r.query("> section.text",e)),this.tools=new W(r.query("> section.tools",e)),this.account=new j,this.sidebar=new $(r.query(".app > .sidebar",this.el)),this.share=this.sidebar.share,this.expression.on("change",()=>this._change()),this.text.on("change",()=>this._change()),this.text.on("modechange",()=>this._modeChange()),this.flavor.on("change",()=>this._change()),this.tools.on("change",()=>this._change()),this.share.on("change",()=>this._change())}_migrateFavorites(){let e=window.localStorage,t=e.length;if(!t||e.getItem("f_v3")>="1")return;let i=[];for(let r=0;r<t;r++){let t=e.key(r),n=e.getItem(t);"f"===t[0]&&"1"===n&&i.push(t.substr(1))}i.length?l.multiFavorite(i).then(()=>e.setItem("f_v3","1")):e.setItem("f_v3","1")}_change(){this.dispatchEvent("change");let e=this.flavor.solver,t=this.expression,i={pattern:t.pattern,flags:t.flags,mode:this.text.mode};"tests"===i.mode?i.tests=this.text.tests:(i.text=this.text.value,i.tool=this.tools.value),e.solve(i,e=>this._handleResult(e))}_modeChange(){r.toggleClass(this.docEl,"tests-mode","tests"===this.text.mode),this._change()}_handleResult(e){this.result=this._processResult(e),this.dispatchEvent("result")}_processResult(e){return"text"===e.mode&&e.matches&&e.matches.forEach((e,t)=>e.num=t),e}};return ne}();
</script> 

<script id="phpinject">regexr.init(null,{"userId":44703364,"authenticate":false,"username":null,"author":null,"type":"temporary"},{"PCREVersion":"10.32 2018-09-10","PHPVersion":"7.3.11"});</script> </body> </html> 